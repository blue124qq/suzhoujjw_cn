(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1132:function(e,t,a){"use strict";a.r(t);a(553),a(562),a(751);var n=a(0),r=a.n(n),c=a(82),s=a.n(c);a(759),a(760),a(765),a(767),a(769),a(771),a(774),a(786),a(789),a(791),a(793),a(797);!function(){if("function"===typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}e.prototype=window.Event.prototype,window.CustomEvent=e}(),String.prototype.removeWhiteSpace=function(){return this.split(" ").join("")};var o=a(10),i=a(3),l=a.n(i),u=a(135),m=a(551),d=a(2),p="SET_USER_AUTHORIZATION",v="SET_NEXT_USER_AUTHORIZATION",h="SIGN_TERMS_AND_CONDITIONS",f="UPDATE_USER_PROFILE_DATA",b="ACCOUNT_SUMMARY_LOADING",E="ACCOUNT_SUMMARY_LOADED",g="ACCOUNT_SUMMARY_ERROR",y="MONTHLY_ACCOUNT_SUMMARY_LOADED",O="AUTHORIZATION_REQUEST",N="AUTHENTICATION_REQUEST",k="AUTHENTICATION_SUCCESS",j="AUTHENTICATION_FAILED",C="AUTHENTICATION_ERROR",x="CLEAR_AUTHENTICATION",S="TRIP_EXPENSES_LOADING",D="TRIP_EXPENSES_LOADED",A="ADD_FUEL_EXPENSE",w="SUBTRACT_FUEL_EXPENSE",T="ADD_OTHERS_EXPENSE",P="SUBTRACT_OTHERS_EXPENSE",I="SUBMIT_TRANSACTION",M="TRIP_RECORDING_LOADING",R="TRIP_RECORDING_LOADED",_="TRIP_RECORDING_SAVING",L="WEX_TRANSACTIONS_LOADING",U="WEX_TRANSACTIONS_LOADED",V="TRIP_RECORDING_SAVE_AND_APPROVE",F="TRIP_RECORDING_NOT_SAVED",B="TRIP_RECORDING_APPROVAL",Y="TRIP_RECORDING_APPROVED",W="TRIP_RECORDING_NOT_APPROVED",H="TRIP_RECORDING_STATUS_LOADING",G="TRIP_RECORDING_STATUS_LOADED",q="TRIP_RECORDING_STATUS_SUBMITTING",z="TRIP_RECORDING_STATUS_SUBMITTED",K="VANPOOL_MY_TRIPS_LOADING",J="VANPOOL_MY_TRIPS_LOADED",Q="VANPOOL_MY_TRIPS_SAVING",X="REGISTERED_USER_MY_TRIPS_LOADING",$="REGISTERED_USER_MY_TRIPS_LOADED",Z="REGISTERED_USER_MY_TRIPS_SAVING",ee="REGISTERED_USER_MY_TRIPS_APPROVING",te="MY_TRIPS_APPROVAL",ae="DASHBOARD_LOADING",ne="DASHBOARD_LOADED",re="CONTACT_INFO_LOADING",ce="CONTACT_INFO_LOADED",se="EMPLOYER_CONTENT_LOADING",oe="EMPLOYER_CONTENT_LOADED",ie="PAYMENT_HISTORY_LOADING",le="PAYMENT_HISTORY_LOADED",ue="MY_PAYMENT_HISTORY_LOADING",me="MY_PAYMENT_HISTORY_LOADED",de="INVOICE_HISTORY_LOADING",pe="INVOICE_HISTORY_LOADED",ve="INVOICE_HISTORY_DETAILS_LOADING",he="INVOICE_HISTORY_DETAILS_LOADED",fe="DISPLAY_ERROR",be="DISPLAY_SUCCESS",Ee="CLOSE_BANNER",ge="PARTICIPANT_ROUTE_LOADING",ye="PARTICIPANT_ROUTE_LOADED",Oe="ROUTE_LOADING",Ne="ROUTE_LOADED",ke="ROUTE_SAVING",je="VEHICLE_LOADING",Ce="VEHICLE_LOADED",xe="VEHICLE_ODOMETER_SAVING",Se="VEHICLE_SWITCH_REASONS_LOADING",De="VEHICLE_SWITCH_REASONS_LOADED",Ae="VEHICLE_SWITCH_REASONS_ERROR",we="VEHICLE_SWITCH_REQUEST",Te="VEHICLE_SWITCH_SUCCESS",Pe="VEHICLE_SWITCH_FAILURE",Ie="ROSTER_LOADING",Me="ROSTER_LOADED",Re="VANPOOL_INVITE_USERS_LOADING",_e="PARTICIPANT_PROFILE_LOADED",Le="PARTICIPANT_PROFILE_SAVING",Ue="PARTICIPANT_PROFILE_DELETING",Ve="PARTICIPANT_PROFILE_DELETED",Fe="MAP_DIRECTIONS",Be="MAP_GOOGLE_DIRECTIONS",Ye="MAP_DURATIONS",We="VANPOOLER_IMPACT_DATA_LOADING",He="REGISTERED_USER_IMPACT_DATA_LOADING",Ge="IMPACT_DATA_LOADED",qe="VANPOOL_INFO_LOADING",ze="VANPOOL_INFO_LOADED",Ke="VANPOOL_AGGREGATES_LOADING",Je="VANPOOL_AGGREGATES_LOADED",Qe="VANPOOL_ADDONS_LOADING",Xe="VANPOOL_ADDONS_LOADED",$e="VANPOOL_ADDONS_ERROR",Ze="VANPOOL_ADDONS_ADD",et="VANPOOL_ADDONS_REMOVE",tt="ADD_PAYMENT_METHOD_POSTING",at="ADD_PAYMENT_METHOD_RESPONSE",nt="UPDATE_PAYMENT_PUTTING",rt="DELETE_PAYMENT_METHOD",ct="DELETE_PAYMENT_RESPONSE",st="PAYMENT_METHODS_LOADING",ot="PAYMENT_METHODS_LOADED",it="PAYMENT_METHODS_ERROR",lt="LAST_PAYMENT_LOADING",ut="LAST_PAYMENT_LOADED",mt="LAST_PAYMENT_ERROR",dt="ONE_TIME_PAYMENT_POSTING",pt="ONE_TIME_PAYMENT_RESPONSE",vt="RESET_PAYMENT_RESPONSE",ht="RECURRING_PAYMENT_POSTING",ft="RECURRING_PAYMENT_RESPONSE",bt="SCHEDULED_PAYMENTS_LOADING",Et="SCHEDULED_PAYMENTS_LOADED",gt="SCHEDULED_PAYMENTS_DELETING",yt="SERVICE_PROVIDER_LOADING",Ot="SERVICE_PROVIDER_LOADED",Nt="USER_PROFILE_LOADING",kt="USER_PROFILE_LOADED",jt="USER_PERSONAL_INFO_LOADING",Ct="PERSONAL_INFO_SAVING",xt="COMMUTE_PROFILE_LOADING",St="COMMUTE_PROFILE_LOADED",Dt="COMMUTE_PROFILE_SAVING",At="COMMUTE_PROFILE_SAVED",wt="COMMUTE_PROFILE_ERROR",Tt="PARTNER_WORKSITES_LOADING",Pt="PARTNER_WORKSITES_LOADED",It="LICENSE_SAVING",Mt="LEAVE_VANPOOL",Rt="LEFT_VANPOOL",_t="STATES_LOADING",Lt="STATES_LOADED",Ut="TRANSPORTATION_MODES_LOADING",Vt="TRANSPORTATION_MODES_LOADED",Ft="TOGGLE_PREFERENCE",Bt="RESET_PREFERENCE",Yt="REGISTRATION_JOIN_SITE",Wt="LINK_VANPOOL",Ht="LINK_VANPOOL_SUCCESS",Gt="LINK_VANPOOL_FAILURE",qt="VANPOOL_SEARCH_COUNT",zt="VANPOOL_SEARCH_RESULT_COUNT",Kt="REQUEST_TO_JOIN",Jt="REQUEST_TO_JOIN_SUCCESS",Qt="REQUEST_TO_JOIN_FAILURE",Xt="ALERTS_LOADING",$t="ALERTS_LOADED",Zt="MARK_ALL_ALERTS_READ",ea="READ_ALL_ALERTS",ta="DELETE_ALERT",aa="URL_CHANGED",na="SUBMIT_DRIVER_APPLICATION",ra="SUBMIT_COORDINATOR_APPLICATION",ca="UPDATE_COORDINATOR_APPLICATION_DOCUSIGN_STATUS",sa="UPDATE_DRIVER_APPLICATION_DOCUSIGN_STATUS",oa="LAUNCH_DOCUSIGN",ia="DOCUSIGN_CLOSE",la="UPDATE_CONTRACT_DOCUSIGN_STATUS",ua="CREATE_CONTRACT_ENVELOPE",ma="BALANCE_DETAILS_LOADING",da="BALANCE_DETAILS_LOADED",pa="PAYMENT_MANAGEMENT_LOADING",va="PAYMENT_MANAGEMENT_LOADED",ha="PAYMENT_MANAGEMENT_REQUEST",fa="PAYMENT_ALLOCATION_LOADING",ba="PAYMENT_ALLOCATION_LOADED",Ea="STATS_IMPACT_DATA_LOADING",ga="STATS_IMPACT_DATA_LOADED",ya="STATS_IMPACT_DATA_ERROR",Oa="STATS_AGGREGATE_CHANGED",Na="STATS_CSV_DATA_LOADING",ka="STATS_CSV_DATA_LOADED",ja="STATS_CSV_DATA_ERROR",Ca="STATS_MONTHLY_ENROLLMENT_LOADING",xa="STATS_MONTHLY_ENROLLMENT_LOADED",Sa="STATS_MONTHLY_ENROLLMENT_ERROR",Da="STATS_TRIPDATA_LOADING",Aa="STATS_TRIPDATA_LOADED",wa="STATS_TRIPDATA_ERROR",Ta="SHOW_BACKDROP",Pa="HIDE_BACKDROP",Ia="GET_FUEL_CARD_DETAILS",Ma="SET_FUEL_CARD_DETAILS",Ra="GET_FUEL_CARD_SUMMARY",_a="SET_FUEL_CARD_SUMMARY",La="ACTIVATE_FUEL_CARD",Ua="ACTIVATED_FUEL_CARD",Va="RESET_FUEL_CARD_PIN",Fa="ACTIVATE_FUEL_CARD_NUMBER_INPUT",Ba="UPDATE_FUEL_CARD_PIN",Ya="RESET_FUEL_CARD_PININPUT",Wa="RESETTING_FUEL_CARD_PIN",Ha="FUELCARD_API_ENCOUNTERED_ERROR",Ga="TRIP_RECORDING_STATUS_VALIDATE",qa="TRIP_RECORDING_STATUS_VALIDATION",za="SHOW_COMMUTE_MODAL",Ka="HIDE_COMMUTE_MODAL",Ja="GOTO_PAGE_TWO",Qa="GOTO_PAGE_THREE_MATCHES",Xa="GOTO_PAGE_FOUR_SUCCESS",$a="GOTO_PAGE_FOUR_FAILURE",Za="GOTO_PAGE_RIDE_TOGETHER",en="GOTO_STAY_IN_TOUCH",tn="GO_BACK",an="UPDATE_USER_DETAILS",nn="UPDATE_FLEXIBLE_DETAILS",rn="GET_VANPOOL_MATCHES",cn="PROXIMITY_LOADED",sn="VANPOOL_MATCHES_RESULT",on="VANPOOL_MATCHES_ERROR",ln="SAVE_COMMUTE_CONFIRM",un="STAY_IN_TOUCH_CONFIRM",mn="SET_ROUTE_SELECTED",dn="SET_SELECTED_ROUTE",pn="SAVE_MATCHED_ROUTES_SELECTED",vn="SAVE_MATCHES",hn={getItem:function(e){return localStorage.getItem(e)},getJsonItem:function(e){if(localStorage.getItem(e))return JSON.parse(localStorage.getItem(e))},setItem:function(e,t){return localStorage.setItem(e,t)},setJsonItem:function(e,t){return localStorage.setItem(e,JSON.stringify(t))},clear:function(e){return localStorage.removeItem(e)}},fn=hn,bn=["login","passwordReset","mobileDeepLink"],En={getAuthentication:function(){return fn.getJsonItem("EhiUser")},getUserProfile:function(){if(fn.getJsonItem("EhiUser"))return fn.getJsonItem("EhiUser").profile},setAuthorization:function(e){var t=En.getAuthentication(),a=t?{token:t.token,profile:e}:{profile:e};fn.setJsonItem("EhiUser",a)},setAuthentication:function(e){fn.setJsonItem("EhiUser",{token:e})},clearAuthentication:function(){fn.clear("EhiUser"),bn.forEach(fn.clear)},isAuthenticated:function(){return!!fn.getJsonItem("EhiUser")},hasPermissions:function(e){var t=fn.getJsonItem("EhiUser").profile.permissions;return e instanceof Array?e.some(function(e){return t.includes(e)}):t.includes(e)}},gn=En,yn=function(e,t){switch(t.type){case p:return gn.setAuthorization(t.data),t.data;case x:return null;default:return gn.getUserProfile()||null}},On=a(1),Nn={line1:"",line2:"",city:"",state:"",zip:"",country:"",latitude:"",longitude:""},kn="N/A",jn={summary:{currentBalanceAsOfDateTime:kn,priorBalance:{priorBalanceAsOfFullMonth:kn,priorBalanceAsOfMonthDay:kn,priorBalanceAsOfMonth:kn,priorBalanceAmount:0,priorPaymentsAsOfMonthDay:kn,priorPaymentsPeriodStartAsOfMonthDay:kn,priorPaymentsPeriodEndAsOfMonthDay:kn,totalPaymentsReceivedAmount:0,pastDueBalance:0,dateRange:kn},currentCharges:{currentInvoiceBalanceDue:0,currentInvoiceBalanceDueAsOfDate:kn,currentInvoiceBalanceDueAsOfFullMonth:kn,forDate:kn,headerDateRange:kn,totalCurrentCharges:0,billingTransactionDetails:[]},recentPayments:{billingTransactionDetails:[],remainingAccountBalanceDue:0,dateRange:kn,totalRecentPayments:0},upcomingCharges:{dateRange:kn,totalPendingActivity:0,billingTransactionDetails:[]},monthlyAccountSummary:[]},summaryError:!1,accountSummaryLoaded:!1},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(On.a)(Object(On.a)({},e),{},{summary:t.data,summaryError:!1,accountSummaryLoaded:!0});case g:return Object(On.a)(Object(On.a)({},e),{},{summaryError:!0,accountSummaryLoaded:!1});case y:var a=Object(On.a)(Object(On.a)({},e.summary),{},{monthlyAccountSummary:t.data});return Object(On.a)(Object(On.a)({},e),{},{summary:a});default:return e}},xn=/(\/payment\/history\/invoices\/)(.*)/,Sn=/(\/payment\/pay\/recurring\/)(.*)/,Dn={};function An(e,t){return{pagename:e.replace(/^\//,""),pagecategory:t}}Dn.getPageObject=function(e){switch(e=e.replace("#","")){case"/payment":return An("Account Summary","Payment");case"/payment/pay":return An("One Time Payment","Payment");case"/payment/pay/recurring":return An("Recurring Payment","Payment");case"/payment/history/invoices":return An("Invoice History","Payment");case"/payment/history/payments":return An("Payments History","Payment");case"/payment/manage":return An("Manage Payment","Payment");case"/profile":return An("Profile","Profile");case"/profile/azure-settings":return An("Profile","Azure Credentials Change");case"/passwordReset":return An("Password Reset","Azure Password Change");case"/phonePasswordReset":return An("Phone Password Reset","Azure Password Change");case"/route":return An("Route","Route");case"/roster":return An("Roster","Roster");case"/trip-recording":return An("Vanpool Trip Recording","Trip Recording");case"/trip-recording/me":return An("My Trips","Trip Recording");case"/trip-recording/expenses":return An("Trip Expenses","Trip Recording");case"/vanpool":return An("Vanpool","Vanpool");case"/driver-application":return An("Driver Application","Driver Application");case"/dashboard":return An("Dashboard","Dashboard");case"/coordinator-application":return An("Coordinator Application","Coordinator Application");case"/payment/fuel":return An("Fuel Card Summary","Payment");case"/payment/fuel/activated":return An("Fuel Card Activated","Payment")}if(e.match(xn)){var t=e.match(xn)[2];return An("Invoice ".concat(t),"Payment")}if(e.match(Sn)){var a=e.match(Sn)[2];return An("Edit Recurring Payment ".concat(a),"Payment")}return An(e,"Uncategorized")};var wn=Dn,Tn={getUserObject:function(){var e=gn.getAuthentication()||{},t=e.profile||{},a=e.token||{};return{commute:{id:t.vanpoolId,statusCode:t.vanpoolStatus},status:{coordinator:t.coordinatorStatus,driver:t.driverStatus},customer:{id:a.id?a.id.toString():a.id},partner:{name:t.employer},trip:{type:t.tripType},role:{customerRole:t.roles}}}},Pn=Tn,In={};function Mn(e){window._analytics=Pn.getUserObject(),window._analytics.page=wn.getPageObject(e)}function Rn(e,t){document.getElementById("analytics").dispatchEvent(new CustomEvent(e,{detail:t}))}In.pageChange=function(e){Mn(e.pathname),Rn("analyticsReady",window._analytics)},In.analyticsEvent=function(e){Mn(window.location.hash),window._analytics.event={message:e.error,code:e.errorCode,api:e.api,type:e.type},window._analytics=Object(On.a)(Object(On.a)({},window._analytics),e.data),Rn("analyticsEvent",window._analytics)};var _n=In,Ln=function(){return{username:"",password:"",redirectToReferrer:!1,error:!1,authFailed:!1,hasToken:gn.isAuthenticated()}},Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(On.a)(Object(On.a)({},e),{},{username:t.data.username,password:t.data.password});case x:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Ln()),{},{hasToken:!1,redirectUrl:void 0});case k:localStorage.getItem("passwordReset")&&("success"===localStorage.getItem("passwordReset")&&_n.analyticsEvent({type:"Password Reset Success"}),localStorage.removeItem("passwordReset")),"success"===localStorage.getItem("login")&&(localStorage.removeItem("login"),_n.analyticsEvent({type:"Login Success"}));var a=t.data?t.data.redirectUrl:void 0;return Object(On.a)(Object(On.a)({},e),{},{redirectToReferrer:!0,hasToken:!0,authFailed:!1,error:!1,redirectUrl:a});case j:return Object(On.a)(Object(On.a)({},e),{},{redirectToReferrer:!1,hasToken:!1,authFailed:!0});case C:return Object(On.a)(Object(On.a)({},e),{},{error:t.data,hasToken:!1,authFailed:!0});default:return e}},Vn={history:{},myHistory:{}},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(On.a)(Object(On.a)({},e),{},{history:t.data});case me:return Object(On.a)(Object(On.a)({},e),{},{myHistory:t.data});default:return e}},Bn={scheduled:[],error:!1},Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Bn),t.data);default:return e}},Wn=a(22),Hn={history:{},historyLoaded:!1,invoiceSummary:[],summaryLoaded:!1},Gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(On.a)(Object(On.a)({},e),{},{history:t.data,historyLoaded:!0});case he:return Object(On.a)(Object(On.a)({},e),{},{invoiceSummary:Object(Wn.a)(t.data),summaryLoaded:!0});default:return e}},qn={message:"",type:""},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(On.a)(Object(On.a)({},e),{},{message:t.data,type:"error"});case be:return Object(On.a)(Object(On.a)({},e),{},{message:t.data,type:"success"});case Ee:return Object(On.a)({},qn);default:return e}},Kn={runDays:[],outboundRoutePoints:[],inboundRoutePoints:[]},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Kn),t.data);case ke:return Object(On.a)(Object(On.a)({},e),Kn);default:return e}},Qn={outboundRoutePoints:[],inboundRoutePoints:[]},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(On.a)(Object(On.a)({},e),t.data);default:return e}},$n={maxTripRecordersAllowed:0,participants:[]},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(On.a)(Object(On.a)(Object(On.a)({},e),$n),t.data);case"VANPOOL_INVITE_USERS_LOADED":return Object(On.a)(Object(On.a)({},e),t.data);case _e:var a=e.participants.map(function(e){return e.id===t.data.id?t.data:e}),n=a.filter(function(e){return e.roles&&e.roles.tripRecorder}).length>=e.maxTripRecordersAllowed;return Object(On.a)(Object(On.a)({},e),{},{participants:a,atMaxTripRecorders:n});case Ve:return Object(On.a)(Object(On.a)({},e),{},{participants:e.participants.filter(function(e){return e.id!==t.data})});default:return e}},er=a(35),tr={participantRouteProfileId:null,roles:{},rideDays:[],runDays:[],routeId:null,outboundRoutePoints:[],toWorkStart:{},toWorkEnd:{},toHomeStart:{},toHomeEnd:{}},ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:var a=e[t.data.id]||{};return Object(On.a)(Object(On.a)({},e),{},Object(er.a)({},t.data.id,Object(On.a)(Object(On.a)(Object(On.a)({},tr),a),t.data)));case Ve:var n=Object(On.a)({},e);return delete n[t.data],n;default:return e}},nr={environment:window.envConfig.ENVIRONMENT,clientId:window.envConfig.AZURE_CLIENT_ID,azureBaseUrl:window.envConfig.REACT_APP_AZURE_BASE_URL,apiBaseUrl:window.envConfig.REACT_APP_API_BASE_URL,loginUrl:window.envConfig.REACT_APP_LOGIN_URL,logoutUrl:window.envConfig.REACT_APP_B2C_LOGOUT_URL,helpUrl:window.envConfig.REACT_APP_HELP_URL,brochureUrl:window.envConfig.REACT_APP_BROCHURE_URL,pdfPath:window.envConfig.REACT_APP_PDF_PATH,imagePath:window.envConfig.REACT_APP_IMAGE_PATH,redirectLoginToUrl:window.envConfig.REACT_APP_B2C_LOGIN_URL,keepAliveUrl:window.envConfig.REACT_APP_B2C_KEEP_ALIVE_URL,googleMapsCredentials:window.envConfig.REACT_APP_GOOGLE_MAPS_CREDENTIALS,idleTimeout:parseInt(window.envConfig.REACT_APP_IDLE_TIMEOUT,10),keepAliveInterval:parseInt(window.envConfig.REACT_APP_KEEP_ALIVE_INTERVAL,10),apiKey:window.envConfig.REACT_APP_API_KEY,apiKeySharedSecret:window.envConfig.REACT_APP_API_KEY_SHARED_SECRET,apiScope:window.envConfig.REACT_APP_API_SCOPE,enterpriseWebLink:window.envConfig.REACT_APP_ENTERPRISE_WEB_LINK,vansalesLink:window.envConfig.REACT_APP_VANSALES_LINK,privacyLink:window.envConfig.REACT_APP_PRIVACY_LINK,policyLink:window.envConfig.REACT_APP_COOKIE_POLICY_LINK,termsOfUseLink:window.envConfig.REACT_APP_TERMS_OF_USE_LINK,localLogin:window.envConfig.REACT_APP_ALLOW_LOCAL_LOGIN,privacyPolicyLink:window.envConfig.REACT_APP_PRIVACY_POLICY_LINK,contactSupportLink:window.envConfig.REACT_APP_CONTACT_SUPPORT_LINK,toggleFeatures:{vanpoolRoute:window.envConfig.REACT_APP_VANPOOL_ROUTE_FEATURE,vanpoolRoster:window.envConfig.REACT_APP_VANPOOL_ROSTER_FEATURE,profile:window.envConfig.REACT_APP_PROFILE_FEATURE,reduxDevTools:window.envConfig.REACT_APP_REDUX_DEV_TOOLS}},rr={};rr.unnullify=function e(t,a){return Array.isArray(a)?0===a.length?t:a:(null!==t&&"object"===typeof t&&Object.keys(t).forEach(function(e){void 0===a[e]&&(a[e]=null)}),Object.keys(a).reduce(function(n,r){return n[r]=null===a[r]?t[r]:"object"===typeof a[r]?e(t[r],a[r]):a[r],n},{}))};var cr=rr,sr={vehicleDetId:kn,year:kn,make:kn,model:kn,series:kn,vehicleType:kn,vehicleImage:"".concat(nr.imagePath,"/vehicle-images/null.jpg"),VIN:kn,unitNumber:kn,registrationNumber:kn,currentEstimateOdometer:kn,lastActualOdometer:kn,lastActualOdometerDate:kn,lastPreventativeMaintenanceOdometer:kn,lastPreventativeMaintenanceOdometerDate:kn,nextScheduledMaintenanceOdometer:kn,nextScheduledMaintenanceDate:kn,addonsList:kn,equipmentList:[],serviceProviders:[],registrationState:kn,color:kn},or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return Object(On.a)(Object(On.a)({},e),cr.unnullify(e,t.data));default:return e}},ir={switchReasons:[],error:!1},lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(On.a)(Object(On.a)(Object(On.a)({},e),ir),{},{switchReasons:t.data});case Ae:return Object(On.a)(Object(On.a)(Object(On.a)({},e),ir),t.data);case we:return Object(On.a)(Object(On.a)({},e),{},{switchReasonsSuccess:null});case Te:return _n.analyticsEvent({type:"Vehicle Change"}),Object(On.a)(Object(On.a)({},e),{},{switchRequestSuccess:!0});case Pe:return Object(On.a)(Object(On.a)({},e),{},{switchRequestSuccess:!1});default:return e}},ur={cards:[],error:!1,payment:null},mr={date:"",cardType:"",description:"",totalCharges:0},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return Object(On.a)(Object(On.a)(Object(On.a)(Object(On.a)({},e),ur),t.data),{},{error:!1});case ut:return Object(On.a)(Object(On.a)(Object(On.a)(Object(On.a)({},e),mr),t.data),{},{error:!1});case it:return Object(On.a)(Object(On.a)(Object(On.a)({},e),ur),{},{error:!0});case mt:return Object(On.a)(Object(On.a)(Object(On.a)({},e),mr),{},{error:!0});case at:case"UPDATE_PAYMENT_RESPONSE":return Object(On.a)(Object(On.a)({},e),{},{error:!t.data.success});case pt:case ft:return Object(On.a)(Object(On.a)({},e),{},{payment:t.data});case vt:return Object(On.a)(Object(On.a)({},e),{},{payment:null});case ct:return Object(On.a)(Object(On.a)({},e),{},{cards:e.cards.filter(function(e){return e.id!==t.data})});default:return e}},pr={directions:[],googleDirections:null,durations:[]},vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:return Object(On.a)(Object(On.a)({},e),{},{directions:t.data});case Be:return Object(On.a)(Object(On.a)({},e),{},{googleDirections:t.data});case Ye:return Object(On.a)(Object(On.a)({},e),{},{durations:t.data});default:return e}},hr={vanpoolName:kn,vanpoolDescription:kn,vanpoolId:kn,vanpoolStatus:kn,vanpoolStartDate:kn,contractedMileage:kn,insuranceCoverage:kn,monthlyRentAmount:kn,vehicleType:kn,vehicleCapacity:kn,participantCount:kn},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:return Object(On.a)(Object(On.a)(Object(On.a)({},e),hr),t.data);default:return e}},br={participant:{previous:{milesSaved:0,fuelGallonsSaved:0,fuelSavings:0,co2Savings:0,parkingSavings:0},current:{milesSaved:0,fuelGallonsSaved:0,fuelSavings:0,co2Savings:0,parkingSavings:0}},vanpool:{previous:{milesSaved:0,fuelGallonsSaved:0,fuelSavings:0,co2Savings:0,parkingSavings:0},current:{milesSaved:0,fuelGallonsSaved:0,fuelSavings:0,co2Savings:0,parkingSavings:0}}},Er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return Object(On.a)(Object(On.a)({},e),t.data);default:return e}},gr={tree:[]},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(On.a)(Object(On.a)({},e),t.data);default:return e}},Or={addOns:[]},Nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Or),{},{addOns:t.data,error:!1});case $e:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Or),{},{error:!0});default:return e}},kr={name:kn,phone:null,secondPhone:null,email:kn,homeAddress:Nn,mailingAddress:Nn,vanpoolId:"",vanpool:{},driver:{},loading:!1,leftVanpool:!1,states:[],preferences:[]},jr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nt:case Mt:case Ct:case Dt:case It:return Object(On.a)(Object(On.a)({},e),{},{loading:!0});case kt:return Object(On.a)(Object(On.a)(Object(On.a)({},e),t.data),{},{loading:!1});case Rt:return Object(On.a)(Object(On.a)({},e),{},{leftVanpool:t.data,loading:!1});case x:return Object(On.a)(Object(On.a)({},e),{},{leftVanpool:!1,loading:!1});case Lt:return Object(On.a)(Object(On.a)({},e),{},{states:t.data});case At:case wt:return Object(On.a)(Object(On.a)({},e),{},{loading:!1});case Ft:case Bt:return Object(On.a)(Object(On.a)({},e),{},{preferences:e.preferences.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{isSelected:e.preferenceCode===t.data.preferenceCode?!e.isSelected:e.isSelected})})});default:return e}},Cr={commute:{employer:"",activeDays:[],arriveAtWork:kn,departFromWork:kn,homeAddress:kn,workAddress:kn,mode:kn,flexible:!1},worksites:[],modes:[]},xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return Object(On.a)(Object(On.a)({},e),{},{loading:!0});case St:return Object(On.a)(Object(On.a)(Object(On.a)({},e),t.data),{},{loading:!1});case Vt:return Object(On.a)(Object(On.a)({},e),{},{modes:t.data});case Pt:return Object(On.a)(Object(On.a)({},e),{},{worksites:t.data});default:return e}},Sr={locations:[],isMore:!1},Dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ot:return Object(On.a)(Object(On.a)(Object(On.a)({},e),Sr),t.data);default:return e}},Ar={confirmation:{}},wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oa:return Object(On.a)(Object(On.a)(Object(On.a)({},e),t.data),{},{confirmation:{}});case ia:return Object(On.a)(Object(On.a)({},t.data),{},{nextProfile:e.nextProfile});case v:return Object(On.a)(Object(On.a)({},e),{},{nextProfile:t.data});case p:return Object(On.a)(Object(On.a)({},e),{},{nextProfile:null});case Ee:return e;default:return Object(On.a)(Object(On.a)({},e),{},{confirmation:{}})}},Tr={location:{},showBackdrop:!1},Pr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa:return _n.pageChange(t.data.location),Object(On.a)(Object(On.a)({},e),t.data);case Ta:return Object(On.a)(Object(On.a)({},e),{},{showBackdrop:!0});case Pa:return Object(On.a)(Object(On.a)({},e),{},{showBackdrop:!1});default:return e}},Ir={requestToJoin:!1,count:0},Mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jt:return Object(On.a)(Object(On.a)({},e),{},{requestToJoin:!0});case Qt:return Object(On.a)(Object(On.a)({},e),{},{requestToJoin:!1});case zt:return Object(On.a)(Object(On.a)({},e),{},{count:t.data});default:return e}},Rr=[],_r=["NTD","SBY"],Lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $t:return t.data;case Zt:return e.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{isRead:!_r.includes(e.alertTypeCode)})});case ta:return e.filter(function(e){return e.alertId!==t.data.alertId});default:return e}},Ur={vanpoolDetails:{vanpoolId:null,vanpoolName:null,vehicleType:null,vehicleImage:null,lastPreventativeMaintenanceOdometer:kn,lastPreventativeMaintenanceOdometerDate:kn,nextScheduledMaintenanceOdometer:kn,nextScheduledMaintenanceDate:kn},fuelCardBalance:null,employerContent:null,contactInfo:null,status:null},Vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(On.a)(Object(On.a)({},e),t.data);case oe:return Object(On.a)(Object(On.a)({},e),{},{employerContent:t.data});case ce:return Object(On.a)(Object(On.a)({},e),{},{contactInfo:t.data});case G:return Object(On.a)(Object(On.a)({},e),{},{status:t.data});case z:return Object(On.a)(Object(On.a)({},e),{},{status:Object(On.a)(Object(On.a)({},e.status),{},{displayDidEveryoneRideToday:!1})});default:return e}},Fr={current:{vanpoolers:[],days:[]},previous:{vanpoolers:[],days:[]},error:null},Br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(On.a)(Object(On.a)(Object(On.a)({},e),t.data),{},{error:t.data.error});case _:return Object(On.a)(Object(On.a)({},e),{},{error:null});case F:return Object(On.a)(Object(On.a)({},e),{},{error:!0});case x:default:return e}},Yr={current:[],previous:[]},Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:case $:return Object(On.a)(Object(On.a)({},e),t.data);default:return e}},Hr={expenses:null,wexTransactions:null},Gr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(On.a)(Object(On.a)({},e),{},{expenses:t.data});case U:return Object(On.a)(Object(On.a)({},e),{},{wexTransactions:t.data});default:return e}},qr={invoiceDueDate:kn,currentAccountBalance:kn,lastUpdatedDateTime:kn},zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case da:return Object(On.a)(Object(On.a)({},qr),t.data);default:return e}},Kr={approved:null,changeValidation:!1},Jr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(On.a)(Object(On.a)({},e),{},{approved:!0});case W:return Object(On.a)(Object(On.a)({},e),{},{approved:!1});case Ga:return Object(On.a)(Object(On.a)({},e),{},{changeValidation:t.data.changeValidation});default:return e}},Qr={vanpoolLinkSuccess:null},Xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return{vanpoolLinkSuccess:!0,domainMismatch:t.data.isPartner&&!t.data.isPartnerEmailDomainMatch};case Gt:return{vanpoolLinkSuccess:!1,existingEmail:t.data.existingAccountMaskedEmail};case Wt:case x:return{vanpoolLinkSuccess:null};default:return e}},$r={amount:kn,billingDate:kn,requestedPayments:[]},Zr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case va:case ba:return Object(On.a)(Object(On.a)({},$r),t.data);default:return e}},ec={currentAggregate:{},impactData:{employees:{},vanpoolers:{},privateSubsidies:{},transitSubsidies:{}},chartData:!1,monthlyEnrollment:{participants:{labels:[],datasets:[]},vehicles:{labels:[],datasets:[]},occupancy:{labels:[],datasets:[]}},tripData:{commutePrimaryModes:{labels:[],datasets:[]}}},tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ec,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oa:return Object(On.a)(Object(On.a)(Object(On.a)({},e),ec),{},{currentAggregate:Object(On.a)({},t.data),error:!1,csvLoaded:!1});case ga:return Object(On.a)(Object(On.a)({},e),{},{impactData:Object(On.a)({},t.data),error:!1,csvLoaded:!1});case xa:return Object(On.a)(Object(On.a)({},e),{},{monthlyEnrollment:Object(On.a)({},t.data),chartData:!0,error:!1,csvLoaded:!1});case Ca:return Object(On.a)(Object(On.a)({},e),{},{monthlyEnrollment:Object(On.a)({},ec.monthlyEnrollment),chartData:!1,error:!1,csvLoaded:!1});case Na:return Object(On.a)(Object(On.a)({},e),{},{error:!1,csvLoaded:!1});case ka:return Object(On.a)(Object(On.a)(Object(On.a)({},e),t.data),{},{error:!1,csvLoaded:!0});case ja:return Object(On.a)(Object(On.a)({},e),{},{csvLoaded:!0,error:!0});case Da:return Object(On.a)(Object(On.a)({},e),{},{tripData:Object(On.a)({},ec.tripData),chartData:!1,error:!1,csvLoaded:!1});case Aa:return Object(On.a)(Object(On.a)({},e),{},{tripData:Object(On.a)({},t.data),chartData:!0,error:!1,csvLoaded:!1});default:return e}},ac={number:"",pin:"",resetPin:"",activated:!1,pinReset:!1,activeFuelCardDetails:[],apiEncounteredError:!1,summary:{}},nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ac,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ma:return Object(On.a)(Object(On.a)({},e),{},{activeFuelCardDetails:t.payload.activeFuelCardDetails});case Fa:return Object(On.a)(Object(On.a)({},e),{},{number:t.payload});case Ya:return Object(On.a)(Object(On.a)({},e),{},{resetPin:t.payload});case Ua:return Object(On.a)(Object(On.a)({},e),{},{activated:t.data});case Wa:return Object(On.a)(Object(On.a)({},e),{},{pinReset:t.data});case Ha:return Object(On.a)(Object(On.a)({},e),{},{apiEncounteredError:t.error});case _a:return Object(On.a)(Object(On.a)({},e),{},{summary:t.payload.fuelCardSummary});default:return e}},rc={showCommuteModal:!1,reasons:[],otherValue:void 0,userDetails:[],page:1,matchedVanpools:{},matchedVanpoolsError:!1,matchCount:0,selectedRoute:null,updatedUserDetails:null,flexibleDetails:{},matchedSelectedRoutes:{},matches:[],matchesOtherValue:void 0,isInVanpool:!1},cc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case za:return Object(On.a)(Object(On.a)({},e),{},{showCommuteModal:!0,page:1,isInVanpool:t.data.isInVanpool,reasons:[],matches:[],updatedUserDetails:null,selectedRoute:null,otherValue:void 0,matchesOtherValue:void 0});case Ka:return Object(On.a)(Object(On.a)({},e),{},{showCommuteModal:!1});case Ja:return Object(On.a)(Object(On.a)({},e),{},{reasons:t.data.reasons,otherValue:t.data.otherValue,page:2});case tn:return Object(On.a)(Object(On.a)({},e),{},{page:t.data});case an:return Object(On.a)(Object(On.a)({},e),{},{updatedUserDetails:t.data});case nn:return Object(On.a)(Object(On.a)({},e),{},{flexibleDetails:t.data});case sn:return Object(On.a)(Object(On.a)({},e),{},{matchedVanpools:t.data,matchCount:t.data.matches});case dn:return Object(On.a)(Object(On.a)({},e),{},{selectedRoute:t.data});case pn:return Object(On.a)(Object(On.a)({},e),{},{matchedSelectedRoutes:t.data});case on:return Object(On.a)(Object(On.a)({},e),{},{matchedVanpoolsError:t.data});case vn:return Object(On.a)(Object(On.a)({},e),{},{matches:t.data.matches,matchesOtherValue:t.data.matchesOtherValue});case"GET_MATCHED_VANPOOLS":return e.matchedVanpools;case Xa:return Object(On.a)(Object(On.a)({},e),{},{page:4.1});case $a:return Object(On.a)(Object(On.a)({},e),{},{page:4.2});case Za:return Object(On.a)(Object(On.a)({},e),{},{page:5.1});case en:return Object(On.a)(Object(On.a)({},e),{},{page:5.2});case Qa:return Object(On.a)(Object(On.a)({},e),{},{page:3});case cn:return Object(On.a)(Object(On.a)({},e),{},{matches:t.data});default:return e}},sc=a(14),oc=a(16),ic=a.n(oc),lc=a(309),uc=a.n(lc),mc={},dc="YYYY-MM-DD";mc.formatMoment=function(e,t){return e.format(t)},mc.getMoment=function(e,t){return ic()(e,t)},mc.currentMoment=function(){return ic()()},mc.parseDatetimeAsUTCDate=function(e){return"".concat(pc(e,"M/D/YYYY","YYYY-MM-DD HH:mm:ss CST")," at ").concat(pc(e,"h:mma","YYYY-MM-DD HH:mm:ss CST"))},mc.parseDatetimeAsUTCDate2=function(e){return"".concat(pc(e,"M/D/YYYY","MM/DD/YYYY HH:mm:ss")," at ").concat(pc(e,"h:mma","MM/DD/YYYY HH:mm:ss"))},mc.formatToLocal=function(e){var t=ic.a.utc(e),a=ic()(t).local(),n=uc.a.tz.guess(!0),r=uc.a.tz(n).zoneAbbr(),c=mc.parseDatetimeAsUTCDate2(a);return-1!=c.indexOf("Invalid")?"N/A":c+" "+r},mc.yesterday=function(){return ic()().subtract(1,"days").format(dc)},mc.yesterdayMoment=function(){return ic()().subtract(1,"days")},mc.firstDayOfQuarter=function(e){return e.quarter(e.quarter()).startOf("quarter")},mc.startOfQuarter=function(e){return ic()().add(e,"quarter").startOf("quarter").startOf("day")},mc.endOfQuarter=function(e){return ic()().add(e,"quarter").endOf("quarter").startOf("day")},mc.aggregateDate=function(e){return ic()(e+"/01","YYYY/MM/DD")},mc.sixMonthsAgo=function(e){return ic()(e,dc).subtract(5,"months")},mc.parseDate=function(e){return pc(e,"M/DD/YYYY",dc)},mc.parseFormalDate=function(e){return pc(e,"MM/DD/YYYY",dc)},mc.parseFormalDate1=function(e){return pc(e,"MM/DD/YYYY","MM/DD/YYYY HH:mm:ss")},mc.formatexpenses=function(e){return ic()(e).format("MM/DD/YYYY")},mc.currentYear=function(){return ic()().year()},mc.currentMonth=function(){return pc(new Date,"MMMM")},mc.currentMonthAsTwoDigits=function(){return pc(new Date,"MM")},mc.currentMonthAsSingleDigit=function(){return pc(new Date,"M")},mc.currentMonthName=function(){return pc(new Date,"MMMM")},mc.currentYearAsTwoDigits=function(){return pc(new Date,"YY")},mc.parseDateAsMonthYear=function(e){return pc(e,"MMM YYYY",dc)},mc.parseDateAsFullMonthYear=function(e){return pc(e,"MMMM YYYY",dc)},mc.currentTime=function(){return pc(new Date,"HH:mm:ss")},mc.parseDateAsFullMonth=function(e){return pc(e,"MMMM",dc)},mc.parseDateAsMonth=function(e){return pc(e,"MMM",dc)},mc.parseDateAsMonthDay=function(e){return pc(e,"MMM DD",dc)},mc.parseDateAsMonthDayOrdinal=function(e){return pc(e,"MMMM Do",dc)},mc.parseDateAsMonthDayYear=function(e){return pc(e,"MMMM D, YYYY",dc)},mc.formatAsSortableDate=function(e){return pc(e,dc,"MM/DD/YYYY")},mc.formatAsSortableDate2=function(e){return pc(e,"MM/DD/YYYY HH:mm:ss","MM/DD/YYYY HH:mm:ss")},mc.nextMondayAt8Am=function(){var e=ic()(new Date);return e.add(0===e.day()?1:7,"d").day(1).hour(8).minute(0).second(0).millisecond(0).toDate()},mc.parseTimeAsTimeOnly=function(e){return pc(e,"h:mm","HH:mm:ss")},mc.parseTime=function(e){return pc(e,"h:mm A","HH:mm:ss")},mc.parseTimeAsAmPm=function(e){return pc(e,"A","HH:mm:ss")},mc.parseDayAsOrdinal=function(e){return ic()(e,dc).format("Do")},mc.dayOfWeek=function(e){return pc(e,"ddd",dc)},mc.nextMinute=function(e){return ic()(e,"HH:mm:ss").add(1,"m").format("HH:mm:ss")},mc.shiftBySeconds=function(e,t){return ic()(e,"HH:mm:ss").add(t,"s").format("HH:mm:ss")},mc.getMomentInFromDateFormat=function(e){return ic()(e,dc)},mc.getFourDigitYearFromTwoDigits=function(e){return ic()(e,"YY").format("YYYY")},mc.getHoursAndMinutes=function(e){var t=Math.floor(e/60),a=e%60;return(t?"".concat(t,"h"):"")+(a?"".concat(t?" ":"").concat(a,"min"):"")},mc.getMomentInFromDateFormat=function(e){return ic()(e,dc)},mc.ageInDays=function(e){var t=ic()().diff(ic()(e,dc),"days");return t?t+"d":"<1d"},mc.beforeToday=function(e){return ic()("01/"+e,"DD/MM/YY").isBefore(new Date)},mc.beforeTodayMMYY=function(e,t){return ic()("01/"+e+"/"+t,"DD/MM/YY").isBefore(new Date)},mc.afterToday=function(e){return ic()(e,dc).isAfter(new Date)},mc.weekOf=function(e){return ic()(e,dc).week()};var pc=function(e,t,a){return e&&"N/A"!==e?ic()(e,a).format(t):"N/A"};mc.formatDays=function(e){return e.map(function(e){return e.substr(0,3)}).join(", ")},mc.isToday=function(e){return ic()().isSame(ic()(e,dc),"days")},mc.monthNameFromIndex=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]};var vc=mc,hc=a(21),fc={formatUSD:function(e){return!e||isNaN(e)?"$0.00":e.toLocaleString("en-us",{style:"currency",currency:"USD"}).replace(/-|\(/,"\u2212").replace(")","")},round:function(e){return Math.round(100*e)/100},dollarPad:function(e){if(!e)return"";if(e.includes(".")){var t=(e+"00").split("."),a=Object(hc.a)(t,2),n=a[0],r=a[1],c=r.substr(0,2)+"."+r.substr(2);return n+"."+(r=("0"+Math.round(c)).substr(-2)).substr(0,2)}return e+".00"}},bc=fc,Ec={};Ec.getBillingSummary=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=cr.unnullify(jn.summary,t)).currentCharges.currentInvoiceBalanceDue=bc.formatUSD(t.currentCharges.currentInvoiceBalanceDue),a=t.currentCharges.currentInvoiceBalanceDueAsOfDate,t.currentCharges.currentInvoiceBalanceDueAsOfFullMonth=vc.parseDateAsFullMonth(a),t.currentCharges.currentInvoiceBalanceDueAsOfDate=vc.parseDate(a),t.currentCharges.forDate=vc.parseDateAsMonthYear(a),t.currentCharges.totalCurrentCharges=bc.formatUSD(t.currentCharges.totalCurrentCharges),t.currentCharges.headerDateRange=gc(t.currentCharges.dateAccruedFrom,t.currentCharges.dateAccruedTo),yc(t.currentCharges),t.currentBalanceAsOfDateTime=vc.parseDatetimeAsUTCDate(t.currentCharges.calculatedDateTime),t.priorBalance.priorBalanceAsOfFullMonth=vc.parseDateAsFullMonth(t.priorBalance.priorBalanceAsOfDate),t.priorBalance.priorBalanceAsOfMonth=vc.parseDateAsMonth(t.priorBalance.priorBalanceAsOfDate),t.priorBalance.priorBalanceAsOfMonthDay=vc.parseDateAsMonthDay(t.priorBalance.priorBalanceAsOfDate),t.priorBalance.priorBalanceAmount=bc.formatUSD(t.priorBalance.priorBalanceAmount),t.priorBalance.priorPaymentsAsOfMonthDay=vc.parseDateAsMonthDay(t.priorBalance.priorPaymentsReceivedPeriodEndDate),t.priorBalance.totalPaymentsReceivedAmount=bc.formatUSD(t.priorBalance.totalPaymentsReceivedAmount),t.priorBalance.pastDueBalance=bc.formatUSD(t.priorBalance.pastDueBalance),t.priorBalance.dateRange=gc(t.priorBalance.priorPaymentsReceivedPeriodStartDate,t.priorBalance.priorPaymentsReceivedPeriodEndDate),t.recentPayments.remainingAccountBalanceDue=bc.formatUSD(t.recentPayments.remainingAccountBalanceDue),t.recentPayments.totalRecentPayments=bc.formatUSD(t.recentPayments.totalRecentPayments),t.recentPayments.dateRange=gc(t.recentPayments.dateReceivedFrom,t.recentPayments.dateReceivedTo),yc(t.recentPayments),t.upcomingCharges.dateRange=gc(t.upcomingCharges.dateAccruedFrom,t.upcomingCharges.dateAccruedTo),t.upcomingCharges.totalPendingActivity=bc.formatUSD(t.upcomingCharges.totalUpcomingCharges),yc(t.upcomingCharges),e.abrupt("return",t);case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var gc=function(e,t){return"".concat(vc.parseDateAsMonthDay(e)," - ").concat(vc.parseDateAsMonthDay(t))};function yc(e){if(e.billingTransactionDetail){var t=0;e.billingTransactionDetails=e.billingTransactionDetail.map(function(e){return e.id=t++,e.transactionAmount=bc.formatUSD(e.transactionAmount),e.transactionAsOfMonthDay=vc.parseDateAsMonthDay(e.transactionDate),e})}else e.billingTransactionDetails=[];delete e.billingTransactionDetail}Ec.getMonthlyInvoices=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=(n=Object(Wn.a)(t)).map(function(e){var t=a[e.invoiceMonth-1],n=bc.formatUSD(e.invoiceAmount),r=e.invoiceActivities?e.invoiceActivities.map(function(e){var t=bc.formatUSD(e.amount);return Object(On.a)(Object(On.a)({},e),{},{amount:t})}):null;return Object(On.a)(Object(On.a)({},e),{},{invoiceMonth:t,invoiceAmount:n,invoiceActivities:r})}),e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ec.getMonthlyTransactions=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=(n=Object(Wn.a)(t.monthlyAccountSummary)).map(function(e){var t=a[e.itemMonth-1],n=bc.formatUSD(e.itemBalanceAmount),r=e.itemActivities.map(function(e){var t=vc.parseDate(e.activityDate),a=bc.formatUSD(e.amount),n=vc.parseDate(e.invoiceDate);return Object(On.a)(Object(On.a)({},e),{},{activityDate:t,amount:a,invoiceDate:n})});return Object(On.a)(Object(On.a)({},e),{},{itemMonth:t,itemBalanceAmount:n,itemActivities:r})}),e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var Oc=Ec,Nc=a(5),kc=function e(t,a){Object(Nc.a)(this,e),this.message=t,this.code=a},jc={"Content-Type":"application/json"},Cc=Object(On.a)(Object(On.a)({},jc),{},{"accept-version":"application/commute.v1+json;charset=utf-8",pragma:"no-cache"}),xc={400:"Bad Request.",401:"Unauthorized.",403:"Forbidden.",404:"Not Found."};function Sc(e){return Dc.apply(this,arguments)}function Dc(){return(Dc=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i,u,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url,n=t.request,r=t.response,c=t.controller,s=r.clone(),401!==r.status){e.next=7;break}return e.next=5,s.json();case 5:o=e.sent,401!==r.status||window.location.hash.includes("login")||"1091"!=o.error&&"1092"!=o.error?401!==r.status||window.location.hash.includes("login")||(window.location.href="".concat(window.location.origin,"/#/login?error=UNAUTHORIZED"),c.abort()):(window.location.href=nr.redirectLoginToUrl,c.abort());case 7:return i="Unknown",i=xc.hasOwnProperty(r.status)?xc[r.status]:"A server error has occurred.",Xd.dispatch({type:fe,data:i}),(u=new kc(i)).url=a,e.prev=12,e.next=15,r.json();case 15:m=e.sent,u.code=m.error,u.message=m.message||u.message,Xd.dispatch({type:fe,data:u.message}),401!==r.status&&Rc.serverLog({url:a,data:n,message:"API Error : error fetching url",error:m}),_n.analyticsEvent({type:"API Error",error:u.message,errorCode:u.code.toString(),api:u.url}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),Rc.log(e.t0);case 26:throw u;case 27:case"end":return e.stop()}},e,null,[[12,23]])}))).apply(this,arguments)}function Ac(e,t){return wc.apply(this,arguments)}function wc(){return(wc=Object(sc.a)(l.a.mark(function e(t,a){var n,r,c,s,o,i=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:Sc,c=new AbortController,e.prev=2,e.next=5,fetch(t,a);case 5:r=e.sent,e.next=15;break;case 8:throw e.prev=8,e.t0=e.catch(2),s="Network Error Occurred. Please try again later. If your need is more urgent, call 1-800-VAN-4-WORK",Xd.dispatch({type:fe,data:s}),_n.analyticsEvent({type:"Network Error",error:e.t0.stack,errorCode:s,api:t}),Rc.serverLog({url:t,data:a,message:"Network Error Occurred : error fetching url",error:e.t0.stack}),new Error(e.t0);case 15:if(!r.ok){e.next=17;break}return e.abrupt("return",r.json());case 17:return e.next=19,n({url:t,request:a,response:r,controller:c});case 19:return o=e.sent,e.abrupt("return",o);case 21:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}Ac.getStatic=function(e,t,a){return fetch(e,{headers:Ic(t)},a)},Ac.get=function(e,t,a){return Ac(e,{headers:Ic(t)},a)},Ac.post=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;return Ac(e,{method:"post",headers:Ic(a,n),body:t?JSON.stringify(t):null},r)},Ac.put=function(e,t,a,n){return Ac(e,{method:"put",headers:Ic(a),body:t?JSON.stringify(t):null},n)},Ac.delete=function(e,t,a,n){return Ac(e,{method:"delete",headers:Ic(a),body:t?JSON.stringify(t):null},n)};var Tc={};Ac.get.cache=function(){var e=Object(sc.a)(l.a.mark(function e(t,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in Tc)){e.next=4;break}return e.next=3,Tc[t];case 3:return e.abrupt("return",e.sent);case 4:return Tc[t]=Ac.get(t,a),e.next=7,Tc[t];case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),Ac.clearCache=function(){return Tc={}};var Pc=Ac;function Ic(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=gn.getAuthentication(),n=gn.getUserProfile(),r=a?Object(On.a)(Object(On.a)({},Cc),{},{authorization:"".concat(a.token.token_type," ").concat(a.token.access_token),vanpoolId:n?n.vanpoolId:null,participantId:n?n.participantId:null}):Cc,c=t?Object(On.a)(Object(On.a)({},jc),e):Object(On.a)(Object(On.a)({},r),e);return Object.keys(c).reduce(function(e,t){return null!==c[t]?Object(On.a)(Object(On.a)({},e),{},Object(er.a)({},t,c[t])):e},{})}var Mc={log:function(e){e instanceof Error?console.log(e.stack):console.log(e)},serverLog:function(e){Pc.post("".concat(nr.apiBaseUrl,"/user/logger"),e).catch(function(e){return e})}},Rc=Mc,_c=l.a.mark(Uc),Lc=l.a.mark(Vc);function Uc(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(b,Vc);case 2:case"end":return e.stop()}},_c)}function Vc(e){var t,a,n,r,c,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(nr.apiBaseUrl,"/vanpools/vanpool/account"),a="".concat(nr.apiBaseUrl,"/vanpools/vanpool/account/monthly"),e.next=5,Object(d.b)(function(){return Pc.get(t)});case 5:return n=e.sent,e.next=8,Object(d.b)(function(){return Pc.get(a)});case 8:return r=e.sent,e.next=11,Object(d.b)(function(){return Oc.getBillingSummary(n)});case 11:return c=e.sent,e.next=14,Object(d.b)(function(){return Oc.getMonthlyTransactions(r)});case 14:return s=e.sent,e.next=17,Object(d.c)({type:E,data:c});case 17:return e.next=19,Object(d.c)({type:y,data:s});case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(0),Rc.log(e.t0),e.next=26,Object(d.c)({type:g});case 26:case"end":return e.stop()}},Lc,null,[[0,21]])}var Fc=l.a.mark(Wc),Bc=l.a.mark(Hc),Yc=l.a.mark(Gc);function Wc(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ie,Hc);case 2:return e.next=4,Object(d.f)(ue,Gc);case 4:case"end":return e.stop()}},Fc)}function Hc(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/payment/history"))});case 3:return e=a.sent,t={payments:e.transactionGroup.map(qc)},a.next=7,Object(d.c)({type:le,data:t});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:le,data:{error:!0}});case 14:case"end":return a.stop()}},Bc,null,[[0,9]])}function Gc(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/participant/profile/payments"))});case 3:return e=a.sent,t={payments:e.transactionGroup.map(zc)},a.next=7,Object(d.c)({type:me,data:t});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:me,data:{error:!0}});case 14:case"end":return a.stop()}},Yc,null,[[0,9]])}function qc(e){var t={};return t.monthlyTotal=!!e.paymentList.length&&bc.formatUSD(e.paymentList.map(function(e){return e.totalCharges}).reduce(function(e,t){return e+t})),t.receivedEndDate=e.groupTitle,t.billingTransactionDetail=e.paymentList.map(Jc),t}function zc(e){var t={};return t.monthlyTotal=!!e.paymentList.length&&bc.formatUSD(e.paymentList.map(function(e){return e.totalCharges}).reduce(function(e,t){return e+t})),t.receivedEndDate=e.groupTitle,t.billingTransactionDetail=e.paymentList.map(Kc),t}function Kc(e){return{transactionDate:vc.parseDateAsMonthDay(e.date),transactionDescription:"".concat(e.description,": ").concat(e.cardType),transactionAmount:bc.formatUSD(e.totalCharges)}}function Jc(e){var t={transactionDate:e.appliedToInvoiceDate};return t.transactionDescription=e.description,t.transactionAmount=bc.formatUSD(e.totalCharges),t.transactionDate=vc.parseDateAsMonthDay(e.appliedToInvoiceDate),t}var Qc=l.a.mark(Zc),Xc=l.a.mark(es),$c=l.a.mark(ts);function Zc(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(bt,es);case 2:return e.next=4,Object(d.f)(gt,ts);case 4:case"end":return e.stop()}},Qc)}function es(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/participant/profile/payments/recurring"))});case 3:return e=a.sent,t={scheduled:e.recurringPayments.map(as)},a.next=7,Object(d.c)({type:Et,data:t});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:Et,data:{error:!0}});case 14:case"end":return a.stop()}},Xc,null,[[0,9]])}function ts(e){var t,a,n,r;return l.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.data,a=function(e){return"Recurring payment '".concat(e.name,"' has been successfully stopped.")},n=function(e){return"Recurring payment '".concat(e.name,"' cannot be removed at this time, please call 1-800-VAN4WORK.")},r=t.id,c.prev=4,c.next=7,Object(d.b)(function(){return Pc.delete("".concat(nr.apiBaseUrl,"/participant/profile/payment/recurring/").concat(r))});case 7:return c.next=9,Object(d.c)({type:bt});case 9:return c.next=11,Object(d.c)({type:be,data:a(t)});case 11:c.next=18;break;case 13:return c.prev=13,c.t0=c.catch(4),Rc.log(c.t0),c.next=18,Object(d.c)({type:fe,data:n(t)});case 18:case"end":return c.stop()}},$c,null,[[4,13]])}function as(e){return{id:e.recurringPaymentId,name:e.paymentName,amount:e.paymentAmount,month:vc.parseDateAsFullMonth(e.nextRecurringChargeDate),next:vc.parseDateAsMonthDayYear(e.nextRecurringChargeDate),every:vc.parseDayAsOrdinal(e.nextRecurringChargeDate),brand:e.cardBrand,account:"*"+e.partialAccountNumber,exp:e.expirationMMYY.replace(/^\d\d/,"$&/")}}var ns=l.a.mark(is),rs=l.a.mark(ls),cs=l.a.mark(us),ss=l.a.mark(ms),os=0;function is(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Oe,us);case 2:return e.next=4,Object(d.f)(ke,ms);case 4:return e.next=6,Object(d.f)(ge,ls);case 6:case"end":return e.stop()}},ns)}function ls(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/commuteProfile"))});case 3:return e=a.sent,t={outboundRoutePoints:[{address:e.originAddress,latitude:e.originLatitude,longitude:e.originLongitude,stopTime:e.originDepartureTime,description:"Home"},{address:e.destinationAddress,latitude:e.destinationLatitude,longitude:e.destinationLongitude,stopTime:e.destinationArrivalTime,description:e.employerName}],inboundRoutePoints:[{address:e.destinationAddress,latitude:e.destinationLatitude,longitude:e.destinationLongitude,stopTime:e.destinationDepartureTime,description:e.employerName},{address:e.originAddress,latitude:e.originLatitude,longitude:e.originLongitude,stopTime:e.originArrivalTime,description:"Home"}]},a.next=7,Object(d.c)({type:ye,data:t});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Rc.log(a.t0);case 12:case"end":return a.stop()}},rs,null,[[0,9]])}function us(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/route"))});case 3:return(e=t.sent).outboundRoutePoints=ds(e.outboundRoutePoints.map(ps)),e.inboundRoutePoints=ds(e.inboundRoutePoints.map(ps)),t.next=8,Object(d.c)({type:Ne,data:e});case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(0),Rc.log(t.t0),t.next=15,Object(d.c)({type:Ne,data:{error:!0}});case 15:case"end":return t.stop()}},cs,null,[[0,10]])}function ms(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/route"),e.data)});case 3:return t.next=5,Object(d.c)({type:Oe});case 5:_n.analyticsEvent({type:"Route Updated"}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),Rc.log(t.t0),t.next=13,Object(d.c)({type:Ne,data:{error:!0}});case 13:case"end":return t.stop()}},ss,null,[[0,8]])}function ds(e){return e&&e.forEach(function(e){e.isDelete=!1}),e}function ps(e){return Object(On.a)(Object(On.a)({},e),{},{waitTime:!e.waitTime||e.waitTime<0?os:e.waitTime})}var vs={};vs.isValidImage=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc.getStatic(t);case 2:return a=e.sent,e.abrupt("return",a.headers.get("Content-Type").includes("image"));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var hs=vs,fs=l.a.mark(gs),bs=l.a.mark(ys),Es=l.a.mark(Os);function gs(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(je,ys);case 2:return e.next=4,Object(d.f)(xe,Os);case 4:case"end":return e.stop()}},fs)}function ys(){var e,t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle"))});case 3:return e=r.sent,r.next=6,Object(d.b)(function(){return hs.isValidImage("".concat(nr.imagePath,"/vehicle-images/").concat(e.vehicleType,".jpg"))});case 6:return t=r.sent,a=t?"".concat(nr.imagePath,"/vehicle-images/").concat(e.vehicleType,".jpg"):"".concat(nr.imagePath,"/vehicle-images/null.jpg"),n=Object(On.a)(Object(On.a)({},e),{},{vehicleImage:a}),r.next=11,Object(d.c)({type:Ce,data:n});case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(0),Rc.log(r.t0),r.next=18,Object(d.c)({type:Ce,data:{error:!0}});case 18:case"end":return r.stop()}},bs,null,[[0,13]])}function Os(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/odometer"),{odometerReading:e.data})});case 3:return t.next=5,Object(d.c)({type:je});case 5:_n.analyticsEvent({type:"Odometer Updated"}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),Rc.log(t.t0),t.next=13,Object(d.c)({type:Ce,data:{error:!0}});case 13:case"end":return t.stop()}},Es,null,[[0,8]])}var Ns=l.a.mark(Cs),ks=l.a.mark(xs),js=l.a.mark(Ss);function Cs(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Se,xs);case 2:return e.next=4,Object(d.f)(we,Ss);case 4:case"end":return e.stop()}},Ns)}function xs(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get.cache("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/switch/reasons"))});case 3:return e=t.sent,t.next=6,Object(d.c)({type:De,data:e.vehicleSwitchReasons});case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),Rc.log(t.t0),t.next=13,Object(d.c)({type:Ae,data:{error:!0}});case 13:case"end":return t.stop()}},ks,null,[[0,8]])}function Ss(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/switch/request"),e.data)});case 3:if(t.sent.success){t.next=6;break}throw new Error("failed");case 6:return t.next=8,Object(d.c)({type:Te});case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(0),Rc.log(t.t0),t.next=15,Object(d.c)({type:Pe});case 15:case"end":return t.stop()}},js,null,[[0,10]])}var Ds=function(e){return e.some(function(e){return e instanceof Array?e.every(function(e){return gn.getUserProfile().permissions.includes(e)}):gn.getUserProfile().permissions.includes(e)})},As=function(e){return e.some(function(e){return gn.getUserProfile().permissions.includes(e)})},ws=function(e){return function(t){return function(a){return Ds(e)?r.a.createElement(t,a):null}}},Ts=function(e){return function(t){return function(a){return As(e)?null:r.a.createElement(t,a)}}},Ps=function(e){var t=e.children,a=e.roles,n=e.required,r=void 0===n||n;return Ds(a)?r?t():t:null},Is=function(e){var t=e.children,a=e.roles,n=e.required,r=void 0===n||n;return As(a)?null:r?t():t},Ms="PERMISSION_BILLING_VIEWER",Rs="PERMISSION_VANPOOL_STATUS_PRE_DELIVERY",_s="PERMISSION_VANPOOL_STATUS_RENTAL",Ls="VANPOOL_TRIP_RECORDING",Us="PERMISSION_COORDINATOR",Vs="PERMISSION_RIDER",Fs="TRIP_RECORDING",Bs="REGISTERED_USER",Ys="PERMISSION_NTD_TRIP_RECORDING",Ws="PERMISSION_MANAGE_PAYMENT_METHODS",Hs="PERMISSION_IPB",Gs="PERMISSION_ACCOUNT_DASHBOARD_USER",qs="PERMISSION_ACCOUNT_DASHBOARD_ADMIN",zs="PERMISSION_FUEL_CARD_ACTIVE",Ks="PERMISSION_FUEL_CARD_PENDING",Js="PERMISSION_FUEL_CARD_NONE";function Qs(e){var t=["Active","Pending","None"],a=[];if(e.isTripRecordingVanpool&&a.push(Ls),e.isIPB&&a.push(Hs),e.isVanpoolNTDReporting&&a.push(Ys),e.isAllowManagePaymentMethods&&a.push(Ws),["A","P"].includes(e.vanpoolStatusCode)?a.push(Rs):["R","Z"].includes(e.vanpoolStatusCode)&&a.push(_s),e.vanpoolId&&(e.roles.coordinator?a.push(Us):a.push(Vs)),e.vanpoolId||e.roles.accountDashboardUser||a.push(Bs),!e.vanpoolId&&e.roles.accountDashboardUser&&a.push(Gs),(e.roles.tripRecorder||e.isRegisteredUserTripRecorder)&&a.push(Fs),e.roles.billingViewer&&a.push(Ms),t.includes(e.fuelCardStatus))switch(e.fuelCardStatus){case"Active":a.push(zs);break;case"Pending":a.push(Ks);break;case"None":a.push(Js);break;default:a.push(Js)}else a.push(Js);return a}var Xs=l.a.mark(to),$s=l.a.mark(ao),Zs=l.a.mark(no),eo=l.a.mark(ro);function to(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ie,ao);case 2:return e.next=4,Object(d.f)(Re,ro);case 4:return e.next=6,Object(d.f)(Le,no);case 6:case"end":return e.stop()}},Xs)}function ao(){var e,t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)([Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/participants"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/route"))})]);case 3:return e=r.sent,t=Object(hc.a)(e,2),a=t[0],n=t[1],a.atMaxTripRecorders=a.participants.filter(function(e){return e.roles&&e.roles.tripRecorder}).length>=a.maxTripRecordersAllowed,a.participants=a.participants.map(function(e){return co(e,n)}),r.next=11,Object(d.a)(a.participants.map(function(e){return Object(d.c)({type:_e,data:e})}));case 11:return r.next=13,Object(d.c)({type:Me,data:a});case 13:r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(0),Rc.log(r.t0),r.next=20,Object(d.c)({type:Me,data:{error:!0}});case 20:case"end":return r.stop()}},$s,null,[[0,15]])}function no(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.data,s.prev=1,a="".concat(nr.apiBaseUrl,"/vanpools/vanpool/participants/participant/profile"),n="".concat(nr.apiBaseUrl,"/vanpools/vanpool/participants/participant/route"),!Ds([Us])){s.next=15;break}return s.next=7,Object(d.b)(function(){return Pc.put(a,t.payload)});case 7:return r=s.sent,c=r.roleName,s.next=11,Object(d.c)({type:_e,data:Object(On.a)(Object(On.a)({},t.participant),{},{roleName:c})});case 11:return s.next=13,Object(d.c)({type:be,data:"".concat(t.participant.name,"'s roster details have updated successfully")});case 13:s.next=20;break;case 15:return delete t.payload.roles,s.next=18,Object(d.b)(function(){return Pc.put(n,t.payload)});case 18:return s.next=20,Object(d.c)({type:_e,data:Object(On.a)({},t.participant)});case 20:_n.analyticsEvent({type:"Roster Updated"}),s.next=28;break;case 23:return s.prev=23,s.t0=s.catch(1),Rc.log(s.t0),s.next=28,Object(d.c)({type:_e,data:{}});case 28:case"end":return s.stop()}},Zs,null,[[1,23]])}function ro(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpools/vanpool/invite"),t)});case 4:if(!a.sent.success){a.next=11;break}return a.next=8,Object(d.c)({type:be,data:"Invitations were sent!"});case 8:_n.analyticsEvent({type:"Rider Invited"}),a.next=13;break;case 11:return a.next=13,Object(d.c)({type:fe,data:"Server Error"});case 13:a.next=20;break;case 15:return a.prev=15,a.t0=a.catch(1),Rc.log(a.t0),a.next=20,Object(d.c)({type:fe,data:"Server Error"});case 20:case"end":return a.stop()}},eo,null,[[1,15]])}function co(e,t){var a=e.participantRouteProfile,n=a.participantRouteProfileId,r=a.outboundStartStopRoutePoints,c=a.inboundStartStopRoutePoints,s=a.rideDays,o=e.coordinatorStatus&&!e.coordinatorStatus.includes("Approved")?"Coordinator ".concat(e.coordinatorStatus):"",i=e.driverStatus&&!e.driverStatus.includes("Approved")?"Driver ".concat(e.driverStatus):"";return{id:e.participantId,name:e.firstName+" "+e.lastName,status:[o,i].filter(function(e){return e}).join(", "),roleName:e.roleName,roles:e.roles,email:e.emailId||kn,phone:e.phone?e.phone.number:kn,participantRouteProfileId:n,rideDays:s,runDays:t.runDays,outboundRoutePoints:t.outboundRoutePoints,inboundRoutePoints:t.inboundRoutePoints,routeId:t.routeId,toWorkStart:t.outboundRoutePoints.find(function(e){return e.routePointId===r.startRoutePointId}),toWorkEnd:t.outboundRoutePoints.find(function(e){return e.routePointId===r.stopRoutePointId}),toHomeStart:t.inboundRoutePoints.find(function(e){return e.routePointId===c.startRoutePointId}),toHomeEnd:t.inboundRoutePoints.find(function(e){return e.routePointId===c.stopRoutePointId})}}var so=l.a.mark(io),oo=l.a.mark(lo);function io(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ue,lo);case 2:case"end":return e.stop()}},so)}function lo(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.b)(function(){return Pc.delete("".concat(nr.apiBaseUrl,"/vanpools/vanpool/participant/").concat(t))});case 4:return a.next=6,Object(d.c)({type:Ve,data:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(1),Rc.log(a.t0),a.next=13,Object(d.c)({type:_e,data:{id:t,error:!0}});case 13:case"end":return a.stop()}},oo,null,[[1,8]])}var uo=a(59),mo={processExistingCard:function(e){return"number"===typeof e.selectedCard.id?{paymentAmount:e.amount,recurringPaymentId:e.selectedCard.id}:{paymentAmount:e.amount,cvc:e.cvc,storedMethodReference:e.selectedCard.id}}};mo.processNewCard=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(t.selectedCard.num);case 2:return a=e.sent,n={paymentAmount:t.amount,cvc:t.selectedCard.cvc,expirationMMYY:t.selectedCard.exp.replace("/",""),postalCode:t.selectedCard.zip,isSave:t.selectedCard.saving,tokenId:a},e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),mo.addCard=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(t.num);case 2:return a=e.sent,n={tokenId:a,cvc:t.cvc,expirationMMYY:t.exp.replace("/",""),postalCode:t.zip},e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var po=mo;function vo(e){return ho.apply(this,arguments)}function ho(){return(ho=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc.get("".concat(nr.apiBaseUrl,"/payment/apiKey"));case 2:return a=e.sent,n=a.tokenGroup,r=a.tokenEndpoint,c=a.keyId,s=a.keyValidTimestamp,o=a.trxHmac,i={TKN:{TGP:n,ACN:t,PMT:"CARD"}},e.next=11,Pc.post(r,i,{"Content-Type":"application/json",keyId:c,keyValidTimestamp:s,trxHmac:o},!0);case 11:return u=e.sent,e.abrupt("return",u.TKN.TKI);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fo=l.a.mark(jo),bo=l.a.mark(Co),Eo=l.a.mark(xo),go=l.a.mark(So),yo=l.a.mark(Do),Oo=l.a.mark(Ao),No=l.a.mark(wo),ko=l.a.mark(To);function jo(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(st,Co);case 2:return e.next=4,Object(d.f)(lt,xo);case 4:return e.next=6,Object(d.f)(dt,wo);case 6:return e.next=8,Object(d.f)(ht,To);case 8:return e.next=10,Object(d.f)(tt,Do);case 10:return e.next=12,Object(d.f)(nt,So);case 12:return e.next=14,Object(d.f)(rt,Ao);case 14:case"end":return e.stop()}},fo)}function Co(e){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(nr.apiBaseUrl,"/participant/profile/payment/methods"),e.next=4,Object(d.b)(function(){return Pc.get(t)});case 4:return a=e.sent,e.next=7,Object(d.c)({type:ot,data:{cards:(a.storedPaymentMethods||[]).map(function(e){return{id:e.referenceId,deletable:!e.isLinkedToRecurringPayment,brand:e.cardBrand,account:"*"+e.partialAccountNumber,exp:e.expirationMMYY.replace(/^\d\d/,"$&/"),next:vc.parseDateAsMonthDayYear(e.nextRecurringChargeDate),every:vc.parseDayAsOrdinal(e.nextRecurringChargeDate)}})}});case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),Rc.log(e.t0),e.next=14,Object(d.c)({type:it});case 14:case"end":return e.stop()}},bo,null,[[0,9]])}function xo(e){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(nr.apiBaseUrl,"/participant/profile/payments/last"),e.next=4,Object(d.b)(function(){return Pc.get(t)});case 4:return a=e.sent,e.next=7,Object(d.c)({type:ut,data:a});case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),Rc.log(e.t0),e.next=14,Object(d.c)({type:mt});case 14:case"end":return e.stop()}},Eo,null,[[0,9]])}function So(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t="".concat(nr.apiBaseUrl,"/participant/profile/payment/methods/method"),a={cvc:e.data.cvc,expirationMMYY:e.data.expirationMMYY,postalCode:e.data.postalCode,storedMethodReference:e.data.id},n.next=5,Object(d.b)(function(){return Pc.put(t,a)});case 5:if(n.sent.isCardSavedSuccessful){n.next=11;break}return n.next=9,Object(d.c)({type:fe,data:"Unable to update payment."});case 9:n.next=13;break;case 11:return n.next=13,Object(d.c)({type:st});case 13:n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(0),Rc.log(n.t0),n.next=20,Object(d.c)({type:fe,data:"Unable to update payment."});case 20:case"end":return n.stop()}},go,null,[[0,15]])}function Do(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t="".concat(nr.apiBaseUrl,"/participant/profile/payment/methods/method"),r.next=4,po.addCard(e.data);case 4:return a=r.sent,r.next=7,Object(d.b)(function(){return Pc.post(t,a)});case 7:return n=r.sent,r.next=10,Object(d.c)({type:at,data:{success:n.isCardSavedSuccessful}});case 10:return r.next=12,Object(d.c)({type:st});case 12:r.next=19;break;case 14:return r.prev=14,r.t0=r.catch(0),Rc.log(r.t0),r.next=19,Object(d.c)({type:at,data:{success:!1}});case 19:case"end":return r.stop()}},yo,null,[[0,14]])}function Ao(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.delete("".concat(nr.apiBaseUrl,"/participant/profile/payment/methods/method"),{storedMethodReference:e.data})});case 3:return t.next=5,Object(d.c)({type:ct,data:e.data});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Rc.log(t.t0);case 10:case"end":return t.stop()}},Oo,null,[[0,7]])}function wo(e){var t,a,n,r;return l.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t="".concat(nr.apiBaseUrl,"/participant/profile/payment"),c.prev=1,c.next=4,Object(d.b)(function(){return Pc.post(t,e.data)});case 4:return a=c.sent,n=a.isPaymentSuccessful,r=Object(uo.a)(a,["isPaymentSuccessful"]),n&&(Rc.serverLog({url:t,data:e.data,message:"payment completes",error:null}),_n.analyticsEvent({type:"Payment Completes",data:{payment:{type:"one-time payment made",amount:"".concat(e.data.paymentAmount),currencyCode:"USD"}}})),c.next=10,Object(d.c)({type:pt,data:Object(On.a)(Object(On.a)({success:n},r),{},{isDeclined:!n})});case 10:c.next=18;break;case 12:return c.prev=12,c.t0=c.catch(1),Rc.log(c.t0),Rc.serverLog({url:t,data:e.data,message:"one-time payment error",error:c.t0.stack}),c.next=18,Object(d.c)({type:pt,data:{success:!1,isDeclined:!1}});case 18:case"end":return c.stop()}},No,null,[[1,12]])}function To(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=!(!e.data.storedMethodReference&&!e.data.tokenId),e.data.storedMethodReference&&delete e.data.cvc,n.next=5,Object(d.b)(function(){return t?(a=e.data,Pc.post("".concat(nr.apiBaseUrl,"/participant/profile/payment/recurring"),a)):Po(e.data);var a});case 5:return(a=n.sent).success&&(Rc.serverLog({url:e.data.url,data:e.data,message:"recurring payment submitted",error:null}),_n.analyticsEvent({type:"Payment Completes",data:{payment:{type:"recurring payment made",amount:"".concat(e.data.paymentAmount),currencyCode:"USD"}}})),n.next=9,Object(d.c)({type:ft,data:{success:a.success}});case 9:n.next=17;break;case 11:return n.prev=11,n.t0=n.catch(0),Rc.log(n.t0),Rc.serverLog({url:e.data.url,data:e.data,message:"recurring payment error",error:n.t0.stack}),n.next=17,Object(d.c)({type:ft,data:{success:!1,isDeclined:!1}});case 17:case"end":return n.stop()}},ko,null,[[0,11]])}function Po(e){return Pc.put("".concat(nr.apiBaseUrl,"/participant/profile/payment/recurring/").concat(e.recurringPaymentId),e)}var Io=a(221),Mo=a.n(Io),Ro=a(136),_o={},Lo=function(e){return new google.maps.LatLng(e.latitude,e.longitude)};_o.waitForGoogle=function(){return new Promise(function(e){var t=setInterval(function(){try{Lo({latitude:0,longitude:0}),clearInterval(t),e()}catch(a){}},10)})},_o.getAddressAndLocation=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.waitForGoogle();case 2:return e.next=4,Object(Io.geocodeByAddress)(t);case 4:return a=e.sent,n=a[0].place_id,e.next=8,_o.getPlaceDetails(a[0].place_id);case 8:return r=e.sent,c=r.formatted_address,s=r.name,o=r.geometry,i=o.location.lat(),u=o.location.lng(),null!=i&&"undefined"!=i&&""!=i&&null!=u&&"undefined"!=u&&""!=u||Rc.serverLog({url:"".concat(nr.apiBaseUrl,"/user/participant/contract"),data:{address:t},message:"latitude and longitude are not returned from google",error:"latLngError"}),e.abrupt("return",{place_id:n,address:c,latitude:i,longitude:u,description:s,geocode:a});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_o.getPlaceDetails=function(e){return _o.waitForGoogle().then(function(){return new Promise(function(t,a){new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e},function(e,n){if(n===google.maps.places.PlacesServiceStatus.OK)return t(e);a({status:n})})})})},_o.calculateRoute=function(e){return _o.waitForGoogle().then(function(){return new Promise(function(t,a){var n=new google.maps.DirectionsService,r=(e=e.filter(function(e){return e.latitude&&e.longitude}))[0],c=e[e.length-1],s=e.filter(function(e){return e!==r&&e!==c});n.route({origin:Lo(r),destination:Lo(c),drivingOptions:{departureTime:vc.nextMondayAt8Am()},waypoints:s.map(function(e){return{location:Lo(e),stopover:!0}}),travelMode:google.maps.TravelMode.DRIVING},function(e,n){n===google.maps.DirectionsStatus.OK?t(e):a({status:n})})})})},_o.MapWrapperComponent=Object(Ro.withScriptjs)(Object(Ro.withGoogleMap)(function(e){var t=e.children,a=e.mapRef,n=Object(uo.a)(e,["children","mapRef"]);return r.a.createElement(Ro.GoogleMap,Object.assign({},n,{ref:a}),t)}));var Uo="https://maps.googleapis.com/maps/api/js?".concat(nr.googleMapsCredentials,"&libraries=places,geometry,drawing");_o.MapWithDirections=function(e){var t=e.directions,a=Object(uo.a)(e,["directions"]);return r.a.createElement(_o.MapWrapperComponent,Object.assign({defaultZoom:8,googleMapURL:Uo,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})},a),t?r.a.createElement(Ro.DirectionsRenderer,{directions:t}):null)},_o.MapWithMarkers=function(e){var t=e.markers,a=void 0===t?[]:t,n=e.selected;return r.a.createElement(_o.MapWrapperComponent,{mapRef:function(e){return e&&a&&function(e,t){var a=new window.google.maps.LatLngBounds;t.forEach(function(e,t){return a.extend(new window.google.maps.LatLng(e.lat,e.lng))}),e.fitBounds(a)}(e,a)},googleMapURL:Uo,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"100%",width:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})},a.map(function(e,t){return r.a.createElement(Ro.Marker,{key:t,position:e,visible:-1===n||n===t,zIndex:t,label:String.fromCharCode(t+"A".charCodeAt())})}))};var Vo=_o,Fo=l.a.mark(Yo),Bo=l.a.mark(Wo);function Yo(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Fe,Wo);case 2:case"end":return e.stop()}},Fo)}function Wo(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==e.data.length){r.next=6;break}return r.next=3,Object(d.c)({type:Be,data:null});case 3:return r.next=5,Object(d.c)({type:Ye,data:[]});case 5:return r.abrupt("return");case 6:return r.prev=6,r.next=9,Object(d.b)(function(){return Vo.calculateRoute(e.data)});case 9:return t=r.sent,r.next=12,Object(d.c)({type:Be,data:t});case 12:return a=t.routes[0].legs,n=a.map(function(e){return t=e.duration.value,60*Math.ceil(t/60);var t}),r.next=16,Object(d.c)({type:Ye,data:n});case 16:r.next=25;break;case 18:return r.prev=18,r.t0=r.catch(6),Rc.log(r.t0),r.next=23,Object(d.c)({type:Be,data:{error:!0}});case 23:return r.next=25,Object(d.c)({type:Ye,data:{error:!0}});case 25:case"end":return r.stop()}},Bo,null,[[6,18]])}var Ho=l.a.mark(qo),Go=l.a.mark(zo);function qo(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(qe,zo);case 2:case"end":return e.stop()}},Ho)}function zo(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool"))});case 3:return e=t.sent,t.next=6,Object(d.c)({type:ze,data:e});case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),Rc.log(t.t0),t.next=13,Object(d.c)({type:ze,data:{error:!0}});case 13:case"end":return t.stop()}},Go,null,[[0,8]])}var Ko=l.a.mark(Xo),Jo=l.a.mark($o),Qo=l.a.mark(Zo);function Xo(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(We,$o);case 2:return e.next=4,Object(d.f)(He,Zo);case 4:case"end":return e.stop()}},Ko)}function $o(){var e,t,a,n,r,c,s,o;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(d.a)([Object(d.b)(function(){return ei(!1)}),Object(d.b)(function(){return ei(!0)}),Object(d.b)(function(){return ti(!1)}),Object(d.b)(function(){return ti(!0)})]);case 2:return e=i.sent,t=Object(hc.a)(e,4),a=t[0],n=t[1],r=t[2],c=t[3],s={previous:a,current:n},o={previous:r,current:c},i.next=12,Object(d.c)({type:Ge,data:{participant:s,vanpool:o}});case 12:case"end":return i.stop()}},Jo)}function Zo(){var e,t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(d.a)([Object(d.b)(function(){return ai(!1)}),Object(d.b)(function(){return ai(!0)})]);case 2:return e=r.sent,t=Object(hc.a)(e,2),a=t[0],n=t[1],r.next=8,Object(d.c)({type:Ge,data:{registeredUser:{previous:a,current:n}}});case 8:case"end":return r.stop()}},Qo)}function ei(e){return ni("".concat(nr.apiBaseUrl,"/vanpools/vanpool/participant/impactData?current=").concat(e))}function ti(e){return ni("".concat(nr.apiBaseUrl,"/vanpools/vanpool/impactData?current=").concat(e))}function ai(e){return ni("".concat(nr.apiBaseUrl,"/user/profile/impactData?current=").concat(e))}function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=Object(sc.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pc.get(t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Rc.log(e.t0);case 9:return e.abrupt("return",{milesSaved:0,fuelGallonsSaved:0,fuelSavings:0,co2Savings:0,parkingSavings:0});case 10:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}var ci=l.a.mark(li),si=l.a.mark(ui),oi=l.a.mark(mi),ii=l.a.mark(di);function li(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Qe,ui);case 2:return e.next=4,Object(d.f)(Ze,mi);case 4:return e.next=6,Object(d.f)(et,di);case 6:case"end":return e.stop()}},ci)}function ui(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/addOns"))});case 3:return e=a.sent,a.next=6,Object(d.a)(e.addOns.map(function(e){return Object(d.b)(l.a.mark(function t(){var a,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.b)(function(){return hs.isValidImage("".concat(nr.imagePath,"/vehicle-addons/").concat(e.addOnName,".svg"))});case 2:return a=t.sent,n=a?"".concat(nr.imagePath,"/vehicle-addons/").concat(e.addOnName,".svg"):"".concat(nr.imagePath,"/vehicle-addons/null.svg"),t.abrupt("return",Object(On.a)(Object(On.a)({},e),{},{addOnImage:n}));case 5:case"end":return t.stop()}},t)}))}));case 6:return t=a.sent,a.next=9,Object(d.c)({type:Xe,data:t});case 9:a.next=16;break;case 11:return a.prev=11,a.t0=a.catch(0),Rc.log(a.t0),a.next=16,Object(d.c)({type:$e,data:{error:!0}});case 16:case"end":return a.stop()}},si,null,[[0,11]])}function mi(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/addOns/").concat(t))});case 4:return a.next=6,Object(d.c)({type:Qe});case 6:return a.next=8,Object(d.e)(Xe);case 8:return a.next=10,Object(d.c)({type:be,data:"Added! An Enterprise representative will contact you within 24 hours with further details."});case 10:a.next=19;break;case 12:return a.prev=12,a.t0=a.catch(1),Rc.log(a.t0),a.next=17,Object(d.c)({type:fe,data:"Failed to add. Please call 1-800-VAN-4-WORK for assistance."});case 17:return a.next=19,Object(d.c)({type:$e,data:{error:!0}});case 19:case"end":return a.stop()}},oi,null,[[1,12]])}function di(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.b)(function(){return Pc.delete("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle/addOns/").concat(t))});case 4:return a.next=6,Object(d.c)({type:Qe});case 6:return a.next=8,Object(d.e)(Xe);case 8:return a.next=10,Object(d.c)({type:be,data:"Removed! Any equipment will need to be dropped off at an Enterprise office."});case 10:a.next=19;break;case 12:return a.prev=12,a.t0=a.catch(1),Rc.log(a.t0),a.next=17,Object(d.c)({type:fe,data:"Failed to remove. Please call 1-800-VAN-4-WORK for assistance."});case 17:return a.next=19,Object(d.c)({type:$e,data:{error:!0}});case 19:case"end":return a.stop()}},ii,null,[[1,12]])}var pi=l.a.mark(fi),vi=l.a.mark(bi),hi=21;function fi(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(yt,bi);case 2:case"end":return e.stop()}},pi)}function bi(e){var t,a,n,r,c,s;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.data,a=t.zip,n=t.distance,o.prev=1,o.next=4,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/location/serviceProviders/").concat(a,"/").concat(n))});case 4:return r=o.sent,c=r.locationList.length,s=r.locationList.slice(0,hi),o.next=9,Object(d.c)({type:Ot,data:{locations:s,isMore:c>hi}});case 9:o.next=16;break;case 11:return o.prev=11,o.t0=o.catch(1),Rc.log(o.t0),o.next=16,Object(d.c)({type:Ot,data:{error:!0}});case 16:case"end":return o.stop()}},vi,null,[[1,11]])}var Ei=l.a.mark(Oi),gi=l.a.mark(Ni),yi="".concat(nr.apiBaseUrl,"/aggregates");function Oi(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ke,Ni);case 2:case"end":return e.stop()}},Ei)}function Ni(){var e,t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.b)(function(){return Pc.get(yi)});case 3:return e=r.sent,t=e.aggregates,a=void 0===t?[]:t,r.next=8,Object(d.a)(a.map(function(e){return Object(d.b)(function(){return"T"===e.aggregateType?ki(e):Ci(e)})}));case 8:return n=r.sent,r.next=11,Object(d.c)({type:Je,data:{tree:n}});case 11:return r.next=13,Object(d.c)({type:Oa,data:Object(On.a)({},n[0])});case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),Rc.log(r.t0);case 18:case"end":return r.stop()}},gi,null,[[0,15]])}function ki(e){return ji.apply(this,arguments)}function ji(){return(ji=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc.get("".concat(yi,"/transitAgencyAggregate/").concat(t.aggregateId));case 2:return a=e.sent,n=a.transitAgency,r={name:t.aggregateName,id:t.aggregateId,isTransit:!0,isAdmin:"true"===t.isAdmin.toLowerCase()},c=n.vanpools||[],r.children=c.map(function(e){return{parent:r,name:e.vanpoolName||e.vanpoolId,id:e.vanpoolId,isVanpool:!0,isAdministrable:r.isAdmin}}),e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ci(e){return xi.apply(this,arguments)}function xi(){return(xi=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc.get("".concat(yi,"/employerAggregate/").concat(t.aggregateId));case 2:return a=e.sent,n=a.employers,r=void 0===n?[]:n,(c={name:t.aggregateName,id:t.aggregateId,isTransit:!1,isAdmin:"true"===t.isAdmin.toLowerCase()}).children=r.map(function(e){return Si(e)}),c.children.forEach(function(e){return e.parent=c}),e.abrupt("return",c);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Si(e){var t={name:e.employerName,id:e.employerId};return t.children=e.worksites.map(function(e){return function(e){var t={name:e.worksiteName,id:e.worksiteId};return t.children=e.vanpools.map(function(e){return{parent:t,name:e.vanpoolName,id:e.vanpoolId,isVanpool:!0,isAdministrable:"true"===e.isAdministrable}}),t}(e)}),t.children.forEach(function(e){return e.parent=t}),t}var Di={getRedirectUrl:function(e,t){return e||"#/passwordReset"===t||"#/phonePasswordReset"===t?e?e.registrationComplete?e.isPendingCoordinator?"/coordinator-application":e.hasPendingContract?"/contract":e.isPendingDriver?"/driver-application":e.isAccountDashboardUser?"/stats":"/dashboard":"/registration":void 0:"/login"}},Ai=Di;function wi(e){return e.isVanpoolNTDReporting?"ntd":e.isTripRecordingVanpool||e.isRegisteredUserTripRecorder?"standard":"none"}function Ti(e){var t;if(e.vanpoolId){var a=[];Object.keys(e.roles).forEach(function(t){e.roles[t]&&a.push(t)}),0===a.length?t="rider":(a.some(function(e){return"coordinator"===e})||a.push("rider"),t=a.map(function(e){return function(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}(e)}).sort().join(", "))}else t="registered user";return t}var Pi={generateProfile:function(e){return{firstName:e.firstName,lastName:e.lastName,coordinatorStatus:e.coordinatorStatus,driverStatus:e.driverStatus,vanpoolStatus:e.vanpoolStatusCode,isPendingCoordinator:"Pending Application"===e.coordinatorStatus,isPendingDriver:"Pending Application"===e.driverStatus,isPendingDriverApproval:"Pending Approval"===e.driverStatus,isInVanpool:""!==e.vanpoolId,isDriver:!!e.roles.driver,isAccountDashboardUser:!!e.roles.accountDashboardUser,isPartner:e.registration.isPartner,hasPendingContract:e.newContracts.length>0,contracts:e.newContracts,permissions:Qs(e),roles:Ti(e),tripType:wi(e),registrationComplete:"Complete"===e.registration.registrationStatus,linkVanpool:e.registration.isVanpoolValidationRequired,employer:e.registration.companyName||"",phone:e.registration.phone,vanpoolId:e.vanpoolId||null,participantId:e.participantId||null,termsAndConditions:e.employerTermsToAccept}}},Ii=Pi,Mi={getAggregateIndex:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.parent?this.getAggregateIndex(e.parent,t+1):t},getRootAggregate:function(e){return e.parent?this.getRootAggregate(e.parent):e},getEmployer:function(e,t,a){return 0===t||a?void 0:1===t?e:this.getEmployer(e.parent,--t)},getWorksite:function(e,t,a){return t<=1||a?void 0:2===t?e:this.getWorksite(e.parent,--t)},getVanpool:function(e,t,a){return a&&1===t?e:t<=2?void 0:e}},Ri=Mi,_i=a(52),Li=a.n(_i),Ui=l.a.mark(Wi),Vi=l.a.mark(Hi),Fi=l.a.mark(Gi),Bi=l.a.mark(qi),Yi=l.a.mark(Ki);function Wi(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(N,qi);case 2:return e.next=4,Object(d.f)(x,zi);case 4:return e.next=6,Object(d.f)(O,Hi);case 6:return e.next=8,Object(d.f)(Oa,Gi);case 8:return e.next=10,Object(d.f)(f,Ki);case 10:case"end":return e.stop()}},Ui)}function Hi(){var e,t,a,n,r;return l.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(d.a)([Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/loginProfile"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/registration/status"))})]);case 3:return e=c.sent,t=Object(hc.a)(e,2),a=t[0],n=t[1],a.registration=n,r=Ii.generateProfile(a),c.next=11,Object(d.c)({type:p,data:r});case 11:return c.next=13,Object(d.c)({type:k,data:{redirectUrl:Ai.getRedirectUrl(r)}});case 13:return c.abrupt("return",r);case 16:return c.prev=16,c.t0=c.catch(0),Rc.log(c.t0),c.next=21,Object(d.c)({type:C,data:c.t0});case 21:case"end":return c.stop()}},Vi,null,[[0,16]])}function Gi(e){var t,a,n,r,c,s,o;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.data,a=Ri.getAggregateIndex(t),n=Ri.getRootAggregate(t),r=gn.getUserProfile(),c=Ri.getVanpool(t,a,n.isTransit),r.permissions=Li.a.filter(r.permissions,function(e){return e!==qs&&e!==Ls&&e!==Ys}),r.vanpoolId=c?c.id:null,gn.setAuthorization(r),!(c&&c.isAdministrable&&n.isAdmin)){i.next=17;break}if(s=[].concat(Object(Wn.a)(r.permissions),[qs]),!r.vanpoolId){i.next=16;break}return i.next=13,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool"))});case 13:(o=i.sent)&&o.isTripRecordingVanpool&&s.push(Ls),o&&o.isVanpoolNTDReporting&&s.push(Ys);case 16:r.permissions=s;case 17:return i.next=19,Object(d.c)({type:p,data:r});case 19:case"end":return i.stop()}},Fi)}function qi(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.data,n.next=4,Object(d.b)(function(){return Pc.post(nr.loginUrl,{oAuthusername:t.username,oAuthpassword:t.password,apiKeySharedSecret:nr.apiKeySharedSecret,oAuthScope:nr.apiScope},{apiKey:nr.apiKey})});case 4:if(!(a=n.sent)){n.next=13;break}return gn.setAuthentication(a),n.next=9,Object(d.b)(function(){return Hi()});case 9:return n.next=11,Object(d.c)({type:Ee});case 11:n.next=15;break;case 13:return n.next=15,Object(d.c)({type:j});case 15:n.next=22;break;case 17:return n.prev=17,n.t0=n.catch(0),Rc.log(n.t0),n.next=22,Object(d.c)({type:C,data:n.t0});case 22:case"end":return n.stop()}},Bi,null,[[0,17]])}function zi(){gn.clearAuthentication()}function Ki(){var e,t,a,n,r;return l.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(d.a)([Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/loginProfile"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/registration/status"))})]);case 3:return e=c.sent,t=Object(hc.a)(e,2),a=t[0],n=t[1],a.registration=n,r=Ii.generateProfile(a),c.next=11,Object(d.c)({type:p,data:r});case 11:return c.abrupt("return",r);case 14:return c.prev=14,c.t0=c.catch(0),Rc.log(c.t0),c.next=19,Object(d.c)({type:C,data:c.t0});case 19:case"end":return c.stop()}},Yi,null,[[0,14]])}var Ji=l.a.mark(Zi),Qi=l.a.mark(el),Xi=l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(de,el);case 2:case"end":return e.stop()}},e)}),$i=l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ve,Zi);case 2:case"end":return e.stop()}},e)});function Zi(){var e,t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/invoices/summary/details"))});case 3:return e=n.sent,t=Object(Wn.a)(e.invoiceSummary),n.next=7,Object(d.b)(function(){return Oc.getMonthlyInvoices(t)});case 7:return a=n.sent,n.next=10,Object(d.c)({type:he,data:a});case 10:n.next=17;break;case 12:return n.prev=12,n.t0=n.catch(0),Rc.log(n.t0),n.next=17,Object(d.c)({type:he,data:[]});case 17:case"end":return n.stop()}},Ji,null,[[0,12]])}function el(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/invoices/summary"))});case 3:return e=a.sent,(t={invoices:e.invoiceSummaryList}).invoices.map(function(e){return e.invoiceDate=vc.parseDateAsFullMonthYear(e.generatedDate),e.totalAmountDue=bc.formatUSD(e.amountDue),e.totalPayments=e.payment,delete e.payment,delete e.amountDue,delete e.generatedDate,e}),a.next=8,Object(d.c)({type:pe,data:t});case 8:a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(0),Rc.log(a.t0),a.next=15,Object(d.c)({type:pe,data:{error:!0}});case 15:case"end":return a.stop()}},Qi,null,[[0,10]])}var tl={SIGNING_COMPLETE:"signing_complete",CANCEL:"cancel",DECLINE:"decline",EXCEPTION:"exception",FAX_PENDING:"fax_pending",ID_CHECK_FAILED:"id_check_failed",SESSION_TIMEOUT:"session_timeout",TTL_EXPIRED:"ttl_expired",VIEWING_COMPLETE:"viewing_complete"},al=a(486),nl=a.n(al),rl={};rl.updateStatus=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=nl()(t.data).query,n=a.envelopeId,r=a.contractName,c=a.event,e.next=3,Pc.put("".concat(nr.apiBaseUrl,"/user/participant/contract/status"),{envelopeId:n,contractName:r,docusignEventStatus:c});case 3:return e.abrupt("return",{contractName:r,event:c});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),rl.getSigningEventConfirmation=function(e){switch(e){case tl.SIGNING_COMPLETE:return{title:"Thank You",confirmMessage:"Continue",message:"Your contract/application was submitted, and we will be in touch if we require additional information to complete the process. If you have any questions, please call 800-VAN-4-WORK"};case tl.DECLINE:case tl.CANCEL:return{declined:!0};case tl.EXCEPTION:case tl.FAX_PENDING:case tl.ID_CHECK_FAILED:case tl.SESSION_TIMEOUT:case tl.TTL_EXPIRED:case tl.VIEWING_COMPLETE:return{title:"Sorry For The Inconvenience",confirmMessage:"Continue",message:"We are experiencing technical difficulties and this process must be completed before you can proceed.  Please call 1-(800)-VAN-4-WORK for assistance."};default:return{}}};var cl=rl,sl=l.a.mark(pl),ol=l.a.mark(vl),il=l.a.mark(hl),ll=l.a.mark(fl),ul=l.a.mark(bl),ml=l.a.mark(El),dl=l.a.mark(gl);function pl(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(na,vl);case 2:return e.next=4,Object(d.f)(sa,hl);case 4:return e.next=6,Object(d.f)(ra,fl);case 6:return e.next=8,Object(d.f)(ca,bl);case 8:return e.next=10,Object(d.f)(ua,El);case 10:return e.next=12,Object(d.f)(la,gl);case 12:case"end":return e.stop()}},sl)}function vl(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return yl(e.data,{isCoordinatorApplication:!1,isDriverApplication:!0,licenses:e.data.licenses.map(function(e,t){return Object(On.a)(Object(On.a)({},e),{},{isLatestLicense:0===t})}),isActiveMilitary:e.data.militaryLicense,isForeignLicense:e.data.foreignLicense})});case 3:return t=a.sent,a.next=6,Object(d.c)({type:oa,data:Object(On.a)(Object(On.a)({},t),{},{title:"Driver Application"})});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),Rc.log(a.t0),a.next=13,Object(d.c)({type:oa,data:{error:!0}});case 13:case"end":return a.stop()}},ol,null,[[0,8]])}function hl(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(d.b)(function(){return cl.updateStatus(e)});case 3:if(t=s.sent,(a=t.event)!==tl.SIGNING_COMPLETE){s.next=11;break}return(n=gn.getUserProfile()).isPendingDriver=!1,n.isPendingDriverApproval=!0,s.next=11,Object(d.c)({type:v,data:n});case 11:return r=cl.getSigningEventConfirmation(a),s.next=14,Object(d.c)({type:ia,data:{confirmation:r}});case 14:s.next=22;break;case 16:return s.prev=16,s.t0=s.catch(0),Rc.log(s.t0),c=cl.getSigningEventConfirmation(tl.EXCEPTION),s.next=22,Object(d.c)({type:ia,data:{confirmation:c}});case 22:case"end":return s.stop()}},il,null,[[0,16]])}function fl(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(t={isCoordinatorApplication:!0,isDriverApplication:e.data.applyToBeDriver}).isDriverApplication&&Object.assign(t,{licenses:e.data.licenses.map(function(e,t){return Object(On.a)(Object(On.a)({},e),{},{isLatestLicense:0===t})}),isActiveMilitary:e.data.militaryLicense,isForeignLicense:e.data.foreignLicense}),n.next=5,Object(d.b)(function(){return yl(e.data,t)});case 5:return a=n.sent,n.next=8,Object(d.c)({type:oa,data:Object(On.a)(Object(On.a)({},a),{},{title:"Coordinator Application"})});case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(0),Rc.log(n.t0),n.next=15,Object(d.c)({type:oa,data:{error:!0}});case 15:case"end":return n.stop()}},ll,null,[[0,10]])}function bl(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(d.b)(function(){return cl.updateStatus(e)});case 3:if(t=s.sent,(a=t.event)!==tl.SIGNING_COMPLETE){s.next=11;break}return(n=gn.getUserProfile()).isPendingCoordinator=!1,n.isPendingDriver&&(n.isPendingDriver=!1,n.isPendingDriverApproval=!0),s.next=11,Object(d.c)({type:v,data:n});case 11:return r=cl.getSigningEventConfirmation(a),s.next=14,Object(d.c)({type:ia,data:{confirmation:r}});case 14:s.next=22;break;case 16:return s.prev=16,s.t0=s.catch(0),Rc.log(s.t0),c=cl.getSigningEventConfirmation(tl.EXCEPTION),s.next=22,Object(d.c)({type:ia,data:{confirmation:c}});case 22:case"end":return s.stop()}},ul,null,[[0,16]])}function El(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t={contractName:e.data.contractName,templateUUID:e.data.templateUUID,callbackURL:"".concat(window.location.origin,"/docusign/")},n.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/participant/contract/envelope"),t)});case 4:return a=n.sent,n.next=7,Object(d.c)({type:oa,data:Object(On.a)(Object(On.a)({},a),{},{title:e.data.contractName})});case 7:n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(0),Rc.log(n.t0),n.next=14,Object(d.c)({type:oa,data:{error:!0}});case 14:case"end":return n.stop()}},ml,null,[[0,9]])}function gl(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(d.b)(function(){return cl.updateStatus(e)});case 3:if(t=s.sent,(a=t.event)!==tl.SIGNING_COMPLETE){s.next=11;break}return(n=gn.getUserProfile()).contracts.shift(),n.hasPendingContract=n.contracts.length>0,s.next=11,Object(d.c)({type:v,data:n});case 11:return r=cl.getSigningEventConfirmation(a),s.next=14,Object(d.c)({type:ia,data:{confirmation:r}});case 14:s.next=22;break;case 16:return s.prev=16,s.t0=s.catch(0),Rc.log(s.t0),c=cl.getSigningEventConfirmation(tl.EXCEPTION),s.next=22,Object(d.c)({type:ia,data:{confirmation:c}});case 22:case"end":return s.stop()}},dl,null,[[0,16]])}function yl(e,t){return Ol.apply(this,arguments)}function Ol(){return(Ol=Object(sc.a)(l.a.mark(function e(t,a){var n,r,c,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.homeAddress,r=t.mailingAddress,c=t.phone,s=t.secondPhone,o=t.birthDate,c.isPreferred=!0,s.isPreferred=!1,i=Object(On.a)({homeAddress:n,mailingAddress:r,phones:s.number?[c,s]:[c],dateOfBirth:vc.formatAsSortableDate(o),callbackURL:"".concat(window.location.origin,"/docusign/")},a),e.abrupt("return",Pc.post("".concat(nr.apiBaseUrl,"/user/participant/contract"),i));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Nl=l.a.mark(wl),kl=l.a.mark(Tl),jl=l.a.mark(Pl),Cl=l.a.mark(Il),xl=l.a.mark(Ml),Sl=l.a.mark(Rl),Dl=l.a.mark(_l),Al=l.a.mark(Ll);function wl(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Nt,Il);case 2:return e.next=4,Object(d.f)(jt,Pl);case 4:return e.next=6,Object(d.f)(Ct,Tl);case 6:return e.next=8,Object(d.f)(It,_l);case 8:return e.next=10,Object(d.f)(Mt,Rl);case 10:return e.next=12,Object(d.f)(Ft,Ll);case 12:return e.next=14,Object(d.f)(_t,Ml);case 14:case"end":return e.stop()}},Nl)}function Tl(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.data,s.prev=1,a=t.homeAddress,n=t.mailingAddress,r=t.phone,c=t.secondPhone,r.isPreferred=!0,c.isPreferred=!1,s.next=7,Pc.put("".concat(nr.apiBaseUrl,"/user/profile"),{phones:c.number?[r,c]:[r],homeAddress:a,mailingAddress:n});case 7:s.next=12;break;case 9:s.prev=9,s.t0=s.catch(1),Rc.log(s.t0);case 12:return s.next=14,Object(d.c)({type:Nt});case 14:case"end":return s.stop()}},kl,null,[[1,9]])}function Pl(){var e,t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e="".concat(nr.apiBaseUrl,"/user/profile"),t="".concat(nr.apiBaseUrl,"/user/participant/profile/preferences"),s.next=5,Object(d.a)([Object(d.b)(function(){return Pc.get(e)}),Object(d.b)(function(){return Pc.get(t)}),Object(d.c)({type:_t})]);case 5:return a=s.sent,n=Object(hc.a)(a,2),r=n[0],c=n[1],s.next=11,Object(d.c)({type:kt,data:{phone:r.phones?r.phones[0]:{number:kn},secondPhone:r.phones&&r.phones[1]?r.phones[1]:{number:""},homeAddress:r.homeAddress?Object(On.a)(Object(On.a)({},r.homeAddress),{},{state:Ul(r.homeAddress.state)}):Nn,mailingAddress:r.mailingAddress?Object(On.a)(Object(On.a)({},r.mailingAddress),{},{state:Ul(r.mailingAddress.state)}):Nn,preferences:c.preferences}});case 11:s.next=15;break;case 13:s.prev=13,s.t0=s.catch(0);case 15:case"end":return s.stop()}},jl,null,[[0,13]])}function Il(e){var t,a,n,r,c,s,o,i,u,m,p,v,h,f,b,E,g,y;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(nr.apiBaseUrl,"/user/profile"),a="".concat(nr.apiBaseUrl,"/user/profile/license"),n="".concat(nr.apiBaseUrl,"/vanpools/vanpool"),r="".concat(nr.apiBaseUrl,"/vanpools/search/count"),c="".concat(nr.apiBaseUrl,"/user/participant/profile/preferences"),s="".concat(nr.apiBaseUrl,"/user/profile/commuteProfile"),o={vanpoolName:null},i=gn.getUserProfile(),e.next=11,Object(d.a)([Object(d.b)(function(){return Pc.get(t)}),Object(d.b)(function(){return i.isInVanpool&&i.isDriver?Pc.get(a):{partialLicenseNumber:"",stateOfIssue:""}}),Object(d.b)(function(){return Pc.get(c)}),Object(d.c)({type:_t})]);case 11:if(u=e.sent,m=Object(hc.a)(u,3),p=m[0],v=m[1],h=m[2],!i.isInVanpool){e.next=22;break}return e.next=19,Object(d.b)(function(){return Pc.get(n)});case 19:o=e.sent,e.next=29;break;case 22:return e.next=24,Object(d.b)(function(){return Pc.get(s)});case 24:return f=e.sent,b={homeLongitude:f.originLongitude,homeLatitude:f.originLatitude,workLongitude:f.destinationLongitude,workLatitude:f.destinationLatitude,arriveTime:f.destinationArrivalTime,departTime:f.destinationDepartureTime},e.next=28,Object(d.b)(function(){return Pc.post(r,b)});case 28:o=e.sent;case 29:return E=p.firstName?"".concat(p.firstName," ").concat(p.middleName?p.middleName[0]+" ":"").concat(p.lastName):kn,g=p.coordinatorStatus&&!p.coordinatorStatus.includes("Approved")?"Coordinator ".concat(p.coordinatorStatus):"",y=p.driverStatus&&!p.driverStatus.includes("Approved")?"Driver ".concat(p.driverStatus):"",e.next=34,Object(d.c)({type:kt,data:{name:E,phone:p.phones?p.phones[0]:{number:kn},secondPhone:p.phones&&p.phones[1]?p.phones[1]:{number:""},email:p.emailAddress||kn,homeAddress:p.homeAddress?Object(On.a)(Object(On.a)({},p.homeAddress),{},{state:Ul(p.homeAddress.state)}):Nn,mailingAddress:p.mailingAddress?Object(On.a)(Object(On.a)({},p.mailingAddress),{},{state:Ul(p.mailingAddress.state)}):Nn,vanpoolId:p.vanpoolId,preferences:h.preferences,vanpool:{name:o.vanpoolName,id:p.vanpoolId,participant:p.participantId,role:p.roleName,status:[g,y].filter(function(e){return e}).join(", ")||"No Active Applications",isAbleToLeave:p.isAbleToLeaveVanpool,matches:o.matches||0},driver:{license:"*****".concat(v.partialLicenseNumber),state:v.stateOfIssue?Ul(v.stateOfIssue):""}}});case 34:e.next=41;break;case 36:return e.prev=36,e.t0=e.catch(0),Rc.log(e.t0),e.next=41,Object(d.c)({type:kt,data:{}});case 41:case"end":return e.stop()}},Cl,null,[[0,36]])}function Ml(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e="".concat(nr.apiBaseUrl,"/location/states"),a.next=4,Object(d.b)(function(){return Pc.get.cache(e)});case 4:return t=a.sent,a.next=7,Object(d.c)({type:Lt,data:t.states.map(function(e){return Ul(e.name)})});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:Lt,data:[]});case 14:case"end":return a.stop()}},xl,null,[[0,9]])}function Rl(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,r.prev=1,a="".concat(nr.apiBaseUrl,"/vanpools/vanpool/participant/").concat(t),r.next=5,Object(d.b)(function(){return Pc.delete(a)});case 5:return n=r.sent,r.next=8,Object(d.c)({type:Rt,data:n.success});case 8:r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(1),Rc.log(r.t0),r.next=15,Object(d.c)({type:Rt,data:!1});case 15:case"end":return r.stop()}},Sl,null,[[1,10]])}function _l(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,a="".concat(nr.apiBaseUrl,"/user/profile/license"),n.next=5,Object(d.b)(function(){return Pc.put(a,{licenseNumber:t.license,stateOfIssue:t.state})});case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),Rc.log(n.t0);case 10:return n.next=12,Object(d.c)({type:Nt});case 12:case"end":return n.stop()}},Dl,null,[[1,7]])}function Ll(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,a="".concat(nr.apiBaseUrl,"/user/participant/profile/preferences"),n.next=5,Object(d.b)(function(){return Pc.put(a,{preferences:[{preferenceCode:t.preferenceCode,isSelected:!t.isSelected}]})});case 5:if(n.sent.success){n.next=11;break}return n.next=9,Object(d.c)({type:fe,data:"Unable to update preference."});case 9:return n.next=11,Object(d.c)({type:Bt,data:t});case 11:n.next=18;break;case 13:return n.prev=13,n.t0=n.catch(1),Rc.log(n.t0),n.next=18,Object(d.c)({type:Bt,data:t});case 18:case"end":return n.stop()}},Al,null,[[1,13]])}function Ul(e){return e.split(" ").map(function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()}).join(" ")}var Vl=l.a.mark(Hl),Fl=l.a.mark(Gl),Bl=l.a.mark(ql),Yl=l.a.mark(zl),Wl=l.a.mark(Kl);function Hl(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(xt,Gl);case 2:return e.next=4,Object(d.f)(Dt,Kl);case 4:return e.next=6,Object(d.f)(Ut,ql);case 6:return e.next=8,Object(d.f)(Tt,zl);case 8:case"end":return e.stop()}},Vl)}function Gl(){var e,t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,e="".concat(nr.apiBaseUrl,"/user/profile/commuteProfile"),t="".concat(e,"/transportation/modes"),s.next=5,Object(d.a)([Object(d.b)(function(){return Pc.get(e)}),Object(d.b)(function(){return Pc.get.cache(t)})]);case 5:return a=s.sent,n=Object(hc.a)(a,2),r=n[0],c=n[1],s.next=11,Object(d.c)({type:St,data:{commute:{employer:r.employerName||"",activeDays:r.commuteDays||[],arriveAtWork:r.destinationArrivalTime||kn,departFromWork:r.destinationDepartureTime||kn,homeAddress:r.originAddress||kn,workAddress:r.destinationAddress||kn,worksiteId:r.worksiteId||void 0,mode:r.defaultTransportationModeId?c.modes.find(function(e){return e.domainId===r.defaultTransportationModeId}).label:kn,arriveFlexible:!!r.isWorkArriveTimeFlexible,departFlexible:!!r.isWorkDepartTimeFlexible,isEditable:!!r.isEditable},modes:c.modes}});case 11:s.next=18;break;case 13:return s.prev=13,s.t0=s.catch(0),Rc.log(s.t0),s.next=18,Object(d.c)({type:St,data:{}});case 18:case"end":return s.stop()}},Fl,null,[[0,13]])}function ql(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e="".concat(nr.apiBaseUrl,"/user/profile/commuteProfile/transportation/modes"),a.next=4,Object(d.b)(function(){return Pc.get.cache(e)});case 4:return t=a.sent,a.next=7,Object(d.c)({type:Vt,data:t.modes});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:Vt,data:[]});case 14:case"end":return a.stop()}},Bl,null,[[0,9]])}function zl(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e="".concat(nr.apiBaseUrl,"/user/profile/parentCompanyWorksites"),a.prev=1,a.next=4,Object(d.b)(function(){return Pc.get.cache(e)});case 4:return t=a.sent,a.next=7,Object(d.c)({type:Pt,data:t.worksites});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),Rc.log(a.t0);case 12:case"end":return a.stop()}},Yl,null,[[1,9]])}function Kl(e){var t,a,n,r,c,s,o,i,u,m,p,v,h,f,b,E,g,y,O,N,k,j,C,x,S,D,A,w;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.data,l.prev=1,a=t.employer,n=t.homeAddress,r=t.workAddress,c=t.activeDays,s=t.arriveAtWork,o=t.departFromWork,i=t.arriveFlexible,u=t.departFlexible,m=t.phone,p=t.referral,v=t.shouldContact,h=t.mode,f=t.worksiteId,b="".concat(nr.apiBaseUrl,"/user/profile/commuteProfile"),E="".concat(b,"/transportation/modes"),l.next=7,Object(d.b)(function(){return Pc.get.cache(E)});case 7:return g=l.sent,y=g.modes.find(function(e){return e.label===h}).domainId,l.next=11,Object(d.a)([Object(d.b)(function(){return Vo.getAddressAndLocation(n)}),Object(d.b)(function(){return Vo.getAddressAndLocation(r)})]);case 11:return O=l.sent,N=Object(hc.a)(O,2),k=N[0],j=N[1],l.next=17,Object(d.c)({type:Fe,data:[k,j]});case 17:return l.next=19,Object(d.e)(Ye);case 19:return C=l.sent,x=Object(hc.a)(C.data,1),S=x[0],D=vc.shiftBySeconds(s,-S),A=vc.shiftBySeconds(o,S),w={},m&&(w.phone=m,w.referralChannel=p,w.isAllowNotifyCommuteMatch=v),l.next=28,Object(d.b)(function(){return Pc.put(b,Object(On.a)({employerName:a,defaultTransportationModeId:y,originAddress:k.address,originLatitude:k.latitude,originLongitude:k.longitude,destinationAddress:j.address,destinationLatitude:j.latitude,destinationLongitude:j.longitude,destinationDepartureTime:o,destinationArrivalTime:s,isWorkArriveTimeFlexible:i,isWorkDepartTimeFlexible:u,commuteDays:c,worksiteId:f,originArrivalTime:A,originDepartureTime:D},w))});case 28:return l.next=30,Object(d.c)({type:At});case 30:return l.next=32,Object(d.c)({type:St,data:{commute:t}});case 32:l.next=39;break;case 34:return l.prev=34,l.t0=l.catch(1),Rc.log(l.t0),l.next=39,Object(d.c)({type:wt});case 39:return l.next=41,Object(d.c)({type:xt});case 41:case"end":return l.stop()}},Wl,null,[[1,34]])}var Jl=l.a.mark($l),Ql=l.a.mark(Zl),Xl=l.a.mark(eu);function $l(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(qt,Zl);case 2:return e.next=4,Object(d.f)(Kt,eu);case 4:case"end":return e.stop()}},Jl)}function Zl(){var e,t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e="".concat(nr.apiBaseUrl,"/vanpools/search/count"),t="".concat(nr.apiBaseUrl,"/user/profile/commuteProfile"),s.prev=2,s.next=5,Object(d.b)(function(){return Pc.get(t)});case 5:return a=s.sent,n={homeLongitude:a.originLongitude,homeLatitude:a.originLatitude,workLongitude:a.destinationLongitude,workLatitude:a.destinationLatitude,arriveTime:a.destinationArrivalTime,departTime:a.destinationDepartureTime},s.next=9,Object(d.b)(function(){return Pc.post(e,n)});case 9:return r=s.sent,c=r.matches,s.next=13,Object(d.c)({type:zt,data:c});case 13:s.next=20;break;case 15:return s.prev=15,s.t0=s.catch(2),Rc.log(s.t0),s.next=20,Object(d.c)({type:zt,data:0});case 20:case"end":return s.stop()}},Ql,null,[[2,15]])}function eu(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpool/requestToJoin"),e.data)});case 3:if(!t.sent.success){t.next=9;break}return t.next=7,Object(d.c)({type:Jt});case 7:t.next=11;break;case 9:return t.next=11,Object(d.c)({type:Qt});case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(0),Rc.log(t.t0),t.next=18,Object(d.c)({type:Qt});case 18:case"end":return t.stop()}},Xl,null,[[0,13]])}var tu=l.a.mark(cu),au=l.a.mark(ou),nu=l.a.mark(iu),ru=l.a.mark(lu);function cu(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Xt,ou);case 2:return e.next=4,Object(d.f)(ea,iu);case 4:return e.next=6,Object(d.f)(ta,lu);case 6:case"end":return e.stop()}},tu)}var su="".concat(nr.apiBaseUrl,"/user/participant/profile/message/alerts");function ou(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get.cache(su)});case 3:return e=a.sent,t=e.alertList,a.next=7,Object(d.c)({type:$t,data:t||[]});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:$t,data:[]});case 14:case"end":return a.stop()}},au,null,[[0,9]])}function iu(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.put(su,{alerts:e.data.map(function(e){return{alertId:e.alertId,isRead:!0,isActive:!0}})})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Rc.log(t.t0);case 8:case"end":return t.stop()}},nu,null,[[0,5]])}function lu(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.put(su,{alerts:[{alertId:e.data.alertId,isRead:!0,isActive:!1}]})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Rc.log(t.t0);case 8:case"end":return t.stop()}},ru,null,[[0,5]])}var uu=l.a.mark(fu),mu=l.a.mark(bu),du=l.a.mark(Eu),pu=l.a.mark(gu),vu=l.a.mark(yu),hu=l.a.mark(Ou);function fu(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ae,gu);case 2:return e.next=4,Object(d.f)(re,yu);case 4:return e.next=6,Object(d.f)(se,Ou);case 6:return e.next=8,Object(d.f)(H,bu);case 8:return e.next=10,Object(d.f)(q,Eu);case 10:case"end":return e.stop()}},uu)}function bu(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e=Ds([Bs])?"".concat(nr.apiBaseUrl,"/user/profile/tripdata/status"):"".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata/status"),a.next=4,Object(d.b)(function(){return Pc.get(e)});case 4:return t=a.sent,a.next=7,Object(d.c)({type:G,data:t});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Rc.log(a.t0);case 12:case"end":return a.stop()}},mu,null,[[0,9]])}function Eu(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e=Ds([Bs])?"".concat(nr.apiBaseUrl,"/user/profile/checkin"):"".concat(nr.apiBaseUrl,"/vanpools/vanpool/checkin"),a.next=4,Object(d.b)(function(){return Pc.put(e)});case 4:return t=a.sent,a.next=7,Object(d.c)({type:z,data:t});case 7:return a.next=9,Object(d.c)({type:be,data:"Thanks!  Your data has been saved.  Please record all trips and approve before the 10th of the following month."});case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),Rc.log(a.t0);case 14:case"end":return a.stop()}},du,null,[[0,11]])}function gu(){var e,t,a,n,r,c,s,o,i,u,m,p,v,h;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Object(d.a)([Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/vehicle"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/participant/fuelCard/balance"))})]);case 3:return e=l.sent,t=Object(hc.a)(e,3),a=t[0],n=t[1],r=t[2],l.next=10,Object(d.b)(function(){return hs.isValidImage("".concat(nr.imagePath,"/vehicle-images/").concat(a.vehicleType,".jpg"))});case 10:return c=l.sent,s=c?"".concat(nr.imagePath,"/vehicle-images/").concat(a.vehicleType,".jpg"):"".concat(nr.imagePath,"/vehicle-images/null.jpg"),o=Object(On.a)(Object(On.a)({},a),{},{vehicleImage:s}),i=Object(On.a)(Object(On.a)({},n),{},{nextScheduledMaintenanceOdometer:n.nextScheduledMaintenanceOdometer||0,lastPreventativeMaintenanceOdometer:n.lastPreventativeMaintenanceOdometer||0}),l.next=16,Object(d.a)([Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/loginProfile"))}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/registration/status"))})]);case 16:return u=l.sent,m=Object(hc.a)(u,2),p=m[0],v=m[1],p.registration=v,h=Ii.generateProfile(p),l.next=24,Object(d.c)({type:ne,data:{vanpoolDetails:Object(On.a)(Object(On.a)({},o),i),fuelCardBalance:r.balance,profile:h}});case 24:l.next=29;break;case 26:l.prev=26,l.t0=l.catch(0),Rc.log(l.t0);case 29:case"end":return l.stop()}},pu,null,[[0,26]])}function yu(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/account/ehiContact"))});case 3:return e=t.sent,t.next=6,Object(d.c)({type:ce,data:e});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}},vu,null,[[0,8]])}function Ou(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/employer/benefits"))});case 3:return e=t.sent,t.next=6,Object(d.c)({type:oe,data:e});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Rc.log(t.t0);case 11:case"end":return t.stop()}},hu,null,[[0,8]])}var Nu={getOrientation:function(e){return e.toHome&&e.toWork?"R":e.toHome?"H":e.toWork?"W":"U"}},ku=Nu,ju=l.a.mark(Tu),Cu=l.a.mark(Pu),xu=l.a.mark(Iu),Su=l.a.mark(Mu),Du=l.a.mark(Ru),Au=l.a.mark(_u),wu=l.a.mark(Lu);function Tu(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(M,Ru);case 2:return e.next=4,Object(d.f)(B,Lu);case 4:return e.next=6,Object(d.f)(_,Mu);case 6:return e.next=8,Object(d.f)(V,Iu);case 8:return e.next=10,Object(d.f)(qa,Pu);case 10:case"end":return e.stop()}},ju)}function Pu(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=!1,e.data.filter(function(e){e.vanpoolers.filter(function(e){!0===e.isChanged&&(t=!0)})}),a.next=4,Object(d.c)({type:Ga,data:{changeValidation:t}});case 4:case"end":return a.stop()}},Cu)}function Iu(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.c)({type:_,data:t});case 4:return a.next=6,Object(d.d)({success:Object(d.e)(M),failure:Object(d.e)(F)});case 6:if(!a.sent.failure){a.next=9;break}return a.abrupt("return");case 9:return a.next=11,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata"))});case 11:return a.next=13,Object(d.c)({type:Y});case 13:return a.next=15,Object(d.c)({type:be,data:"Your ".concat(t.monthToSave," trip data has been submitted and can no longer be updated.")});case 15:return a.next=17,Object(d.c)({type:Ga,data:{changeValidation:!1}});case 17:_n.analyticsEvent({type:"Trip Approved"}),a.next=25;break;case 20:return a.prev=20,a.t0=a.catch(1),Rc.log(a.t0),a.next=25,Object(d.c)({type:Ga,data:{changeValidation:!1}});case 25:case"end":return a.stop()}},xu,null,[[1,20]])}function Mu(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,a={dailyTripDataList:t.tripData.filter(function(e){return e.vanpoolers.length>0}).filter(Fu).map(function(e){return{date:vc.parseFormalDate(e.date),riderTripDataList:e.vanpoolers.map(function(e){var t=ku.getOrientation(e);return{riderId:e.riderId,orientation:t}})}})},n.next=5,Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata?current=").concat("current"===t.monthStatus),a);case 5:return n.next=7,Object(d.c)({type:be,data:"Thanks!  Your data has been saved.  Please record all trips and approve before the 10th of the following month."});case 7:return n.next=9,Object(d.c)({type:M});case 9:return n.next=11,Object(d.c)({type:We});case 11:return n.next=13,Object(d.c)({type:Ga,data:{changeValidation:!1}});case 13:_n.analyticsEvent({type:"Trip Recorded"}),n.next=23;break;case 16:return n.prev=16,n.t0=n.catch(1),Rc.log(n.t0),n.next=21,Object(d.c)({type:F});case 21:return n.next=23,Object(d.c)({type:Ga,data:{changeValidation:!1}});case 23:case"end":return n.stop()}},Su,null,[[1,16]])}function Ru(){var e,t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)([Object(d.b)(function(){return _u()}),Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata?current=true"))})]);case 3:return e=r.sent.map(function(e,t){return Uu(t,e)}),t=Object(hc.a)(e,2),a=t[0],n=t[1],r.next=9,Object(d.c)({type:R,data:{current:n,previous:a,error:null}});case 9:r.next=16;break;case 11:return r.prev=11,r.t0=r.catch(0),Rc.log(r.t0),r.next=16,Object(d.c)({type:R,data:{error:!0}});case 16:case"end":return r.stop()}},Du,null,[[0,11]])}function _u(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata?current=false"),{},function(){throw new Error("Could not get previous vanpool data.")})});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),Rc.log(e.t0),e.abrupt("return",{riderTripDataList:[]});case 10:case"end":return e.stop()}},Au,null,[[0,6]])}function Lu(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripdata/date"),{},function(){throw new Error("Could not get approval data.")})});case 3:if(!!!e.sent.recordingCompleteDate){e.next=9;break}return e.next=7,Object(d.c)({type:Y});case 7:e.next=11;break;case 9:return e.next=11,Object(d.c)({type:W});case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),Rc.log(e.t0),e.next=18,Object(d.c)({type:W});case 18:case"end":return e.stop()}},wu,null,[[0,13]])}function Uu(e,t){if(!t.riderTripDataList.length)return{vanpoolers:[],days:[]};var a=t.riderTripDataList.map(function(t){return function(e,t){var a=e?ic()().date(1):ic()().date(1).subtract(1,"month"),n=e?ic()().add(1,"day"):a.clone().add(1,"month"),r=[];for(;a.isBefore(n,"day");)r.push(Vu(a.format("MM/DD/YYYY"),t)),a=a.add(1,"day");return{id:t.riderId,firstName:t.riderFirstName,lastName:t.riderLastName,driver:t.isDriver,data:r}}(e,t)}),n=a[0].data.map(function(e,t){return{date:e.date,future:!1,vanpoolers:a.map(function(e){return e.data[t]})}}),r=vc.getMomentInFromDateFormat(n[n.length-1].date),c=r.week(),s=r.month();for(r=r.add(1,"day");r.week()===c&&r.month()===s;)n.push({date:r.format("YYYY-MM-DD"),future:!0,vanpoolers:[]}),r=r.add(1,"day");return{vanpoolers:a,days:n}}function Vu(e,t){var a=t.dailyTripDataList.find(function(t){return t.date===e});return a?{riderId:t.riderId,toWork:"R"===a.orientation||"W"===a.orientation,toHome:"R"===a.orientation||"H"===a.orientation,date:vc.formatAsSortableDate(a.date),didNotCommute:"U"===a.orientation,saved:a.isSaved,inVanpool:!0}:{riderId:t.riderId,toWork:!1,toHome:!1,date:vc.formatAsSortableDate(e),didNotCommute:!0,saved:!1,inVanpool:!1}}function Fu(e){return e.vanpoolers.some(function(e){return!e.didNotCommute||e.isChanged})}var Bu=l.a.mark(Ju),Yu=l.a.mark(Qu),Wu=l.a.mark(Xu),Hu=l.a.mark($u),Gu=l.a.mark(em),qu=l.a.mark(tm),zu=l.a.mark(am),Ku=l.a.mark(nm);function Ju(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(K,Qu);case 2:return e.next=4,Object(d.f)(X,Xu);case 4:return e.next=6,Object(d.f)(Q,em);case 6:return e.next=8,Object(d.f)(Z,tm);case 8:return e.next=10,Object(d.f)(te,am);case 10:return e.next=12,Object(d.f)(ee,nm);case 12:case"end":return e.stop()}},Bu)}function Qu(){var e,t,a,n,r,c,s,o,i;return l.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,e="".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripmodes"),l.next=4,Object(d.a)([Object(d.b)(function(){return Pc.get.cache("".concat(nr.apiBaseUrl,"/user/profile/commuteProfile/transportation/modes"))}),Object(d.b)(function(){return $u(e)}),Object(d.b)(function(){return Pc.get("".concat(e,"?current=true"))})]);case 4:return t=l.sent,a=Object(hc.a)(t,3),n=a[0],r=a[1],c=a[2],s=n.modes.find(function(e){return"Did not commute"===e.label}),o=r.dailyTripModesList.map(function(e){return{date:vc.formatAsSortableDate(e.date),saved:e.isSaved,toWork:["U","H"].includes(e.orientation)?n.modes.find(function(t){return t.domainId===(e.workTripMode||s.domainId)}).label:"Vanpool",toHome:["U","W"].includes(e.orientation)?n.modes.find(function(t){return t.domainId===(e.homeTripMode||s.domainId)}).label:"Vanpool",orientation:e.orientation,editable:!0}}),i=c.dailyTripModesList.map(function(e){return{date:vc.formatAsSortableDate(e.date),saved:e.isSaved,toWork:["U","H"].includes(e.orientation)?n.modes.find(function(t){return t.domainId===(e.workTripMode||s.domainId)}).label:"Vanpool",toHome:["U","W"].includes(e.orientation)?n.modes.find(function(t){return t.domainId===(e.homeTripMode||s.domainId)}).label:"Vanpool",orientation:e.orientation,editable:!0}}),Zu(o),Zu(i),l.next=16,Object(d.c)({type:J,data:{current:i,previous:o}});case 16:l.next=23;break;case 18:return l.prev=18,l.t0=l.catch(0),Rc.log(l.t0),l.next=23,Object(d.c)({type:J,data:{error:!0}});case 23:case"end":return l.stop()}},Yu,null,[[0,18]])}function Xu(){var e,t,a,n,r,c,s,o;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,e="".concat(nr.apiBaseUrl,"/user/profile/tripmodes"),i.next=4,Object(d.a)([Object(d.b)(function(){return Pc.get.cache("".concat(nr.apiBaseUrl,"/user/profile/commuteProfile/transportation/modes"))}),Object(d.b)(function(){return $u(e)}),Object(d.b)(function(){return Pc.get("".concat(e,"?current=true"))})]);case 4:return t=i.sent,a=Object(hc.a)(t,3),n=a[0],r=a[1],c=a[2],s=r.dailyTripModesList.filter(function(e){return"workTripMode"in e}).map(function(e){return{date:vc.formatAsSortableDate(e.date),saved:e.isSaved,toWork:n.modes.find(function(t){return t.domainId===e.workTripMode}).label,toHome:n.modes.find(function(t){return t.domainId===e.homeTripMode}).label,editable:!0}}),o=c.dailyTripModesList.filter(function(e){return"workTripMode"in e}).map(function(e){return{date:vc.formatAsSortableDate(e.date),saved:e.isSaved,toWork:n.modes.find(function(t){return t.domainId===e.workTripMode}).label,toHome:n.modes.find(function(t){return t.domainId===e.homeTripMode}).label,editable:!0}}),Zu(s),Zu(o),i.next=15,Object(d.c)({type:$,data:{current:o,previous:s}});case 15:i.next=22;break;case 17:return i.prev=17,i.t0=i.catch(0),Rc.log(i.t0),i.next=22,Object(d.c)({type:$,data:{error:!0}});case 22:case"end":return i.stop()}},Wu,null,[[0,17]])}function $u(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(e,"?current=false"),{},function(){throw new Error("Could not get previous trip data.")})});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),Rc.log(t.t0),t.abrupt("return",{dailyTripModesList:[]});case 10:case"end":return t.stop()}},Hu,null,[[0,6]])}function Zu(e){if(!e.length)return[];var t=vc.getMomentInFromDateFormat(e[0].date),a=t.month();t=t.subtract(t.date()-1,"day");for(var n=function(e,t){return e.some(function(e){return e.date===t.format("YYYY-MM-DD")})};t.month()===a;)n(e,t)||e.push({date:t.format("YYYY-MM-DD"),editable:!1,toWork:"",toHome:"",saved:!1}),t=t.add(1,"day");e.sort(function(e,t){return t.date>e.date?-1:1})}function em(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,r.prev=1,r.next=4,Object(d.b)(function(){return Pc.get.cache("".concat(nr.apiBaseUrl,"/user/profile/commuteProfile/transportation/modes"))});case 4:return a=r.sent,n=t.days.filter(function(e){return e.differentToWork||e.differentToHome}).map(function(e){return{date:vc.parseFormalDate(e.date),workTripMode:"W"===e.orientation?void 0:a.modes.find(function(t){return t.label===e.toWork}).domainId,homeTripMode:"H"===e.orientation?void 0:a.modes.find(function(t){return t.label===e.toHome}).domainId}}),r.next=8,Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/tripmodes?current=").concat("current"===t.monthStatus),{dailyTripModesList:n});case 8:return r.next=10,Object(d.c)({type:K});case 10:return r.next=12,Object(d.c)({type:be,data:"Thanks!  Your data has been saved.  Please record all trips before the 10th of the following month."});case 12:_n.analyticsEvent({type:"Trip Recorded"}),r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(1),Rc.log(r.t0),r.next=20,Object(d.c)({type:J,data:{error:!0}});case 20:case"end":return r.stop()}},Gu,null,[[1,15]])}function tm(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.data,r.prev=1,r.next=4,Object(d.b)(function(){return Pc.get.cache("".concat(nr.apiBaseUrl,"/user/profile/commuteProfile/transportation/modes"))});case 4:if(a=r.sent,!(n=t.days.filter(function(e){return e.editable&&(!e.saved||e.differentToHome||e.differentToWork)}).map(function(e){return{date:vc.parseFormalDate(e.date),workTripMode:a.modes.find(function(t){return t.label===e.toWork}).domainId,homeTripMode:a.modes.find(function(t){return t.label===e.toHome}).domainId}})).length){r.next=9;break}return r.next=9,Pc.put("".concat(nr.apiBaseUrl,"/user/profile/tripmodes?current=").concat("current"===t.monthStatus),{dailyTripModesList:n});case 9:return r.next=11,Object(d.c)({type:X});case 11:return r.next=13,Object(d.c)({type:be,data:"Thanks!  Your data has been saved.  Please record all trips and approve before the 10th of the following month."});case 13:_n.analyticsEvent({type:"Trip Recorded"}),r.next=21;break;case 16:return r.prev=16,r.t0=r.catch(1),Rc.log(r.t0),r.next=21,Object(d.c)({type:$,data:{error:!0}});case 21:case"end":return r.stop()}},qu,null,[[1,16]])}function am(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/profile/tripdata/date"))});case 3:if(!!!e.sent.recordingCompleteDate){e.next=9;break}return e.next=7,Object(d.c)({type:Y});case 7:e.next=11;break;case 9:return e.next=11,Object(d.c)({type:W});case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),Rc.log(e.t0),e.next=18,Object(d.c)({type:W});case 18:case"end":return e.stop()}},zu,null,[[0,13]])}function nm(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,n.next=4,Object(d.c)({type:Z,data:t});case 4:return n.next=6,Object(d.e)(X);case 6:return n.next=8,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/profile/tripdata"))});case 8:return a=ic()().subtract(1,"month").format("MMMM"),n.next=11,Object(d.c)({type:Y});case 11:return n.next=13,Object(d.c)({type:be,data:"Your ".concat(a," trip data has been submitted and can no longer be updated.")});case 13:_n.analyticsEvent({type:"Trip Approved"}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),Rc.log(n.t0);case 19:case"end":return n.stop()}},Ku,null,[[1,16]])}var rm=l.a.mark(dm),cm=l.a.mark(pm),sm=l.a.mark(vm),om=l.a.mark(hm),im=l.a.mark(fm),lm=l.a.mark(bm),um=l.a.mark(Em),mm=l.a.mark(gm);function dm(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(S,pm);case 2:return e.next=4,Object(d.f)(L,vm);case 4:return e.next=6,Object(d.f)(A,fm);case 6:return e.next=8,Object(d.f)(w,bm);case 8:return e.next=10,Object(d.f)(T,Em);case 10:return e.next=12,Object(d.f)(P,gm);case 12:return e.next=14,Object(d.f)(I,hm);case 14:case"end":return e.stop()}},rm)}function pm(e){var t,a,n,r,c,s;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t="".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/monthly?month=").concat(e.data.month,"&year=").concat(e.data.year),o.next=4,Object(d.b)(function(){return Pc.get(t)});case 4:return(a=o.sent)&&a.expenses&&a.expenses.length&&(n=0,r=0,c=0,a.expenses.map(function(e){e.isSelected&&(n="Fuel"==e.type?n+e.cost:n,r+=e.fuelGallons,c="Other"==e.type?c+e.cost:c)}),s={previous:{fuelCost:n,fuelGallons:r,others:c}}),o.next=8,Object(d.c)({type:D,data:s});case 8:o.next=15;break;case 10:return o.prev=10,o.t0=o.catch(0),Rc.log(o.t0),o.next=15,Object(d.c)({type:D,data:{previous:{}}});case 15:case"end":return o.stop()}},cm,null,[[0,10]])}function vm(e){var t,a,n,r;return l.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.month,a=e.year,c.prev=1,n="".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/monthly?month=").concat(t,"&year=").concat(a),c.next=5,Object(d.b)(function(){return Pc.get(n)});case 5:return r=c.sent,c.next=8,Object(d.c)({type:U,data:r});case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),Rc.log(c.t0),c.next=15,Object(d.c)({type:U,data:null});case 15:case"end":return c.stop()}},sm,null,[[1,10]])}function hm(e){var t,a,n;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.current,r.prev=1,r.next=4,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses?current=").concat(t),e.data)});case 4:return a=e.month,n=e.year,r.next=8,Object(d.c)({type:L,month:a,year:n});case 8:return r.next=10,Object(d.c)({type:be,data:"Transactions successfully updated."});case 10:_n.analyticsEvent({type:"WEX transations Submitted",data:{expense:{type:"Fuel & Other "}}}),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),Rc.log(r.t0);case 16:case"end":return r.stop()}},om,null,[[1,13]])}function fm(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.current,a=e.payload,n.prev=1,n.next=4,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/fuel?current=").concat(t),a)});case 4:return n.next=6,Object(d.c)({type:S});case 6:return n.next=8,Object(d.c)({type:be,data:"Expenses successfully updated."});case 8:_n.analyticsEvent({type:"Expense Added",data:{expense:{type:"Fuel"}}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),Rc.log(n.t0);case 14:case"end":return n.stop()}},im,null,[[1,11]])}function bm(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.current,a=e.payload,n.prev=1,a.fuelCost?a.fuelCost=-1*a.fuelCost:a.fuelCost=0,a.fuelGallons?a.fuelGallons=-1*a.fuelGallons:a.fuelGallons=0,n.next=6,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/fuel?current=").concat(t),a)});case 6:return n.next=8,Object(d.c)({type:S});case 8:return n.next=10,Object(d.c)({type:be,data:"Expenses successfully updated."});case 10:_n.analyticsEvent({type:"Expense Subtracted",data:{expense:{type:"Fuel"}}}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),Rc.log(n.t0);case 16:case"end":return n.stop()}},lm,null,[[1,13]])}function Em(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.current,a=e.payload,n.prev=1,n.next=4,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/others?current=").concat(t),a)});case 4:return n.next=6,Object(d.c)({type:S});case 6:return n.next=8,Object(d.c)({type:be,data:"Expenses successfully updated."});case 8:_n.analyticsEvent({type:"Expense Added",data:{expense:{type:"Other Expense"}}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),Rc.log(n.t0);case 14:case"end":return n.stop()}},um,null,[[1,11]])}function gm(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.current,(a=e.payload).othersCost?a.othersCost=-1*a.othersCost:a.othersCost=0,n.prev=2,n.next=5,Object(d.b)(function(){return Pc.put("".concat(nr.apiBaseUrl,"/vanpools/vanpool/expenses/others?current=").concat(t),a)});case 5:return n.next=7,Object(d.c)({type:S});case 7:return n.next=9,Object(d.c)({type:be,data:"Expenses successfully updated."});case 9:_n.analyticsEvent({type:"Expense Subtracted",data:{expense:{type:"Other Expense"}}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),Rc.log(n.t0);case 15:case"end":return n.stop()}},mm,null,[[2,12]])}var ym=l.a.mark(Nm),Om=l.a.mark(km);function Nm(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ma,km);case 2:case"end":return e.stop()}},ym)}function km(){var e,t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/balance"))});case 3:return e=n.sent,t=vc.parseDatetimeAsUTCDate(e.lastUpdatedDateTime),a=bc.formatUSD(e.currentAccountBalance),e=Object(On.a)(Object(On.a)({},e),{},{lastUpdatedDateTime:t,currentAccountBalance:a}),n.next=9,Object(d.c)({type:da,data:e});case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(0),Rc.log(n.t0),n.next=16,Object(d.c)({type:da,data:{error:!0}});case 16:case"end":return n.stop()}},Om,null,[[0,11]])}var jm=l.a.mark(Sm),Cm=l.a.mark(Dm),xm=l.a.mark(Am);function Sm(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Yt,Dm);case 2:return e.next=4,Object(d.f)(Wt,Am);case 4:case"end":return e.stop()}},jm)}function Dm(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,n.next=4,Object(d.c)({type:Dt,data:Object(On.a)(Object(On.a)({},t),{},{refresh:!1})});case 4:return n.next=6,Object(d.e)(At);case 6:return(a=gn.getUserProfile()).registrationComplete=!0,a.employer=t.employer,_n.analyticsEvent({type:"Enrollment Submit"}),n.next=12,Object(d.c)({type:p,data:a});case 12:return n.next=14,Object(d.c)({type:k,data:{redirectUrl:Ai.getRedirectUrl(a)}});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),Rc.log(n.t0);case 19:case"end":return n.stop()}},Cm,null,[[1,16]])}function Am(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data,n.prev=1,n.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/profile/vanpool/link"),t)});case 4:if(!(a=n.sent).isJoinedToParticipant){n.next=11;break}return _n.analyticsEvent({type:"Enrollment Submit"}),n.next=9,Object(d.c)({type:Ht,data:a});case 9:n.next=13;break;case 11:return n.next=13,Object(d.c)({type:Gt,data:a});case 13:n.next=20;break;case 15:return n.prev=15,n.t0=n.catch(1),Rc.log(n.t0),n.next=20,Object(d.c)({type:Gt,data:{}});case 20:case"end":return n.stop()}},xm,null,[[1,15]])}var wm=l.a.mark(Pm),Tm=l.a.mark(Im);function Pm(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(h,Im);case 2:case"end":return e.stop()}},wm)}function Im(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.data,a.prev=1,a.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/profile/terms"),{termsId:t.termsId})});case 4:return a.next=6,Object(d.c)({type:O});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),Rc.log(a.t0);case 11:case"end":return a.stop()}},Tm,null,[[1,8]])}var Mm=l.a.mark(Um),Rm=l.a.mark(Vm),_m=l.a.mark(Fm),Lm=l.a.mark(Bm);function Um(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(pa,Vm);case 2:return e.next=4,Object(d.f)(ha,Bm);case 4:return e.next=6,Object(d.f)(fa,Fm);case 6:case"end":return e.stop()}},Mm)}function Vm(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/payment/distributions"))});case 3:return e=a.sent,t=e.distributionList,a.next=7,Object(d.c)({type:va,data:{billed:t.reduce(function(e,t){return e+t.totalAllocationAmount},0),lastBilled:t.length?t[0].createdDate:""}});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),Rc.log(a.t0);case 12:case"end":return a.stop()}},Rm,null,[[0,9]])}function Fm(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/participant/payment/allocation"))});case 3:return e=t.sent,t.next=6,Object(d.c)({type:ba,data:e});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Rc.log(t.t0);case 11:case"end":return t.stop()}},_m,null,[[0,8]])}function Bm(e){var t,a,n,r,c;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.data,a=t.roster,n=t.total,r=t.comments,c=t.mode,s.prev=1,s.next=4,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/vanpools/vanpool/payment/distributions"),{totalAllocationAmount:"credit"===c?-n:n,vanpoolNote:r,vanpoolCalculatorItems:a.filter(function(e){return e.selected&&("0.00"===e.amount&&(r.length>0||e.comments.length>0)||"0.00"!==e.amount)}).map(function(e){return{participantId:e.key,allocationAmount:("credit"===c?-1:1)*parseFloat(e.amount),participantNote:e.comments}})})});case 4:return s.next=6,Object(d.c)({type:pa});case 6:return s.next=8,Object(d.c)({type:be,data:"Your request has been sent to your fellow commuters."});case 8:_n.analyticsEvent({type:"Payment Completes",data:{payment:{type:"credit"===c?"payment credit sent":"request sent",amount:"".concat(n),currencyCode:"USD"}}}),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(1),Rc.log(s.t0);case 14:case"end":return s.stop()}},Lm,null,[[1,11]])}var Ym={},Wm="percentage",Hm="commute",Gm=function(e){var t=Math.ceil(e.reduce(function(e,t){return Math.max.apply(Math,[e].concat(Object(Wn.a)(t.data)))},0));return Math.ceil(t+1)},qm={maintainAspectRatio:!0,scales:{yAxes:[{gridLines:{display:!1},ticks:{fontStyle:"bold",min:0,callback:function(e){return e.toLocaleString()}}}],xAxes:[{ticks:{fontStyle:"bold"}}]},tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){var a=[],n=null;return t.datasets.forEach(function(t){"Total"===t.label&&(n=t.data[e.index].toLocaleString())}),t.datasets.forEach(function(t){"Potential"===t.label||"Goal"===t.label?a.push("".concat(t.data[e.index].toLocaleString(),"     ").concat(Math.floor(n/t.data[e.index]*100),"%")):a.push(t.data[e.index].toLocaleString()),a.push(t.label),a.push("")}),a.reverse()}},backgroundColor:"#049b5c",titleFontSize:25,titleFontColor:"#FFFFFF",bodyFontColor:"#FFFFFF",bodyFontSize:20,displayColors:!1,xPadding:30,yPadding:10}},zm={maintainAspectRatio:!0,scales:{yAxes:[{gridLines:{display:!1},ticks:{fontStyle:"bold",min:0,callback:function(e){return e.toLocaleString()+"%"}}}],xAxes:[{ticks:{fontStyle:"bold"}}]},tooltips:{callbacks:{title:function(e,t){return t.labels[e[0].index]},label:function(e,t){var a=[];return t.datasets.forEach(function(t){a.push("".concat(t.data[e.index].toLocaleString(),"%")),a.push(t.label),a.push("")}),a.reverse()}},backgroundColor:"#049b5c",titleFontSize:25,titleFontColor:"#FFFFFF",bodyFontColor:"#FFFFFF",bodyFontSize:20,displayColors:!1,xPadding:30,yPadding:10}},Km={maintainAspectRatio:!0,scales:{yAxes:[{ticks:{fontStyle:"bold",min:0,callback:function(e){return e.toLocaleString()}}}],xAxes:[{maxBarThickness:40,gridLines:{display:!1},ticks:{display:!1}}]},tooltips:{callbacks:{label:function(e,t){return"  ".concat(t.datasets[e.datasetIndex].label,": ").concat(t.datasets[e.datasetIndex].data[0].toLocaleString())}},bodyFontSize:20,displayColors:!0,xPadding:30,yPadding:10}},Jm={maintainAspectRatio:!0,scales:{yAxes:[{ticks:{fontStyle:"bold",min:0}}],xAxes:[{maxBarThickness:40,gridLines:{display:!1},ticks:{fontStyle:"bold"}}]},tooltips:{callbacks:{title:function(){},label:function(e,t){return"".concat(t.datasets[e.datasetIndex].data[e.index].toLocaleString())}},bodyFontSize:20,displayColors:!1,xPadding:30,yPadding:10}},Qm={maintainAspectRatio:!0,scales:{yAxes:[{ticks:{fontStyle:"bold",min:0,callback:function(e){return e.toLocaleString()+"%"}}}],xAxes:[{maxBarThickness:40,gridLines:{display:!1},ticks:{display:!1}}]},tooltips:{callbacks:{label:function(e,t){return"  ".concat(t.datasets[e.datasetIndex].label,": ").concat(t.datasets[e.datasetIndex].data[0].toLocaleString(),"%")}},bodyFontSize:20,displayColors:!0,xPadding:30,yPadding:10}},Xm={display:!1,labels:{usePointStyle:!0}},$m={"NTD Data":"#fa6f01","NTD Vanpools":"#b8e986",Total:"#5e83ad",Goal:"#a5b0ba",Potential:"#130c0e"};Ym.formatVanpoolLineChart=function(e){var t={fill:!1,lineTension:0,backgroundColor:"white",borderWidth:4,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBackgroundColor:"white",pointBorderWidth:4,pointHoverRadius:8,pointHoverBackgroundColor:"white",pointHoverBorderWidth:4,pointRadius:8,pointHitRadius:10},a=e.datasets.map(function(e){var a={borderColor:$m[e.label],pointBorderColor:$m[e.label],pointHoverBorderColor:$m[e.label]};return Object(On.a)(Object(On.a)(Object(On.a)({},e),t),a)});return e.datasets=a,e},Ym.formatVanpoolBarChart=function(e){var t=e.datasets.map(function(e){var t={backgroundColor:$m[e.label]||"#5e83ad"};return Object(On.a)(Object(On.a)({},e),t)});return e.datasets=t,e},Ym.generateLegend=function(e){return e.datasets.map(function(e){return{label:e.label,color:$m[e.label]}})};var Zm=Ym,ed="".concat(nr.apiBaseUrl,"/aggregates"),td={0:{url:function(e){return"".concat(ed,e?"/transitAgency/enrollmentImpact/corporate":"/enrollmentImpact/corporate")}},1:{url:function(e){return"".concat(ed,e?"/transitAgency/enrollmentImpact/vanpool":"/enrollmentImpact/employer")}},2:{url:function(e){return"".concat(ed,"/enrollmentImpact/worksite")}},3:{url:function(e){return"".concat(ed,"/enrollmentImpact/vanpool")}}},ad={0:{url:function(e){return"".concat(ed,e?"/transitAgency/enrollmentMonthly/corporate":"/enrollmentMonthly/corporate")}},1:{url:function(e){return"".concat(ed,e?"/transitAgency/enrollmentMonthly/vanpool":"/enrollmentMonthly/employer")}},2:{url:function(e){return"".concat(ed,"/enrollmentMonthly/worksite")}},3:{url:function(e){return"".concat(ed,"/enrollmentMonthly/vanpool")}}},nd={0:{url:function(e){return"".concat(ed,e?"/transitAgency/tripdata/corporate":"/tripdata/corporate")}},1:{url:function(e){return"".concat(ed,e?"/transitAgency/tripdata/vanpool":"/tripdata/employer")}},2:{url:function(e){return"".concat(ed,"/tripdata/worksite")}},3:{url:function(e){return"".concat(ed,"/tripdata/vanpool")}}},rd=[{vanpool_triprecorded:"VANPOOL"},{carpool_driver_triprecorded:["CARPOOL","DRIVER"]},{carpool_rider_triprecorded:["CARPOOL","RIDER"]},{commuterrail_triprecorded:["COMMUTER","RAIL"]},{lighrail_triprecorded:["LIGHT","RAIL"]},{carsov_triprecorded:"CAR"},{tnc_triprecorded:["RIDE HAIL","(TNC)"]},{bus_triprecorded:"BUS"},{ferry_triprecorded:"FERRY"},{bike_triprecorded:"BIKE"},{walk_triprecorded:"WALK"},{didnotcommute_triprecorded:["DID NOT","COMMUTE"]}],cd={};cd.impactData=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentAggregate,n=t.timePeriod,r=n.startDate,c=n.endDate,s=n.displayValue,o=a.parent?a.parent.isTransit:a.isTransit,e.next=5,od(a,r,c,td);case 5:if((i=e.sent).rows[0]){e.next=8;break}return e.abrupt("return",{});case 8:return u=i.rows[0].columns,e.abrupt("return",{employees:{count:u.no_of_emp,description:"Current Quarter"},vanpoolers:{count:u.potn_vp,description:"Current Quarter"},privateSubsidies:{count:u.vp_private_subsidies,description:s},transitSubsidies:{count:u.vp_transit_subsidies,description:s},vanpoolImpactData:{milesSaved:{total:pd(u.miles_saved_tot),goals:pd(u.miles_saved_goal),potential:pd(u.miles_saved_potn),isCurrency:!1},parkingSpotsSaved:{total:pd(u.parking_spots_saved_tot),goals:pd(u.parking_spots_goal),potential:pd(u.parking_spots_potn),isCurrency:!1},parkingSavings:{total:pd(o?24e3*u.parking_spots_saved_tot:u.parking_savings_tot),goals:pd(u.parking_savings_goal),potential:pd(u.parking_savings_potn),isCurrency:!0},fuelGallonsSaved:{total:pd(u.fuel_gallons_saved_tot),goals:pd(u.fuel_gallons_saved_goal),potential:pd(u.fuel_gallons_saved_potn),isCurrency:!1},fuelSavings:{total:pd(u.fuel_savings_tot),goals:pd(u.fuel_savings_goal),potential:pd(u.fuel_savings_potn),isCurrency:!0},co2Saved:{total:pd(u.co2_savings_tot),goals:pd(u.co2_savings_goal),potential:pd(u.co2_savings_potn),isCurrency:!1}}});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),cd.csvData=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentAggregate,n=t.timePeriod,r=n.startDate,c=n.endDate,s={aggregate_id:Ri.getRootAggregate(a).id,proc_dt_start:r,proc_dt_end:c},e.next=5,Pc.post("".concat(nr.apiBaseUrl,"/aggregates/export/csv"),s);case 5:return o=e.sent,e.abrupt("return",o.csvData?o:{csvData:[["No Data"],["No data for selected time period"]]});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),cd.enrollmentMonthly=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i,u,m,d,p,v,h,f,b,E,g;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentAggregate,n=t.timePeriod,r=t.isQuarter,c=n.startDate,s=n.endDate,o=vc.getMoment(c,dc),i=vc.getMoment(s,dc).endOf("quarter").endOf("day"),u=vc.getMoment(s,dc).subtract(1,"quarter").startOf("quarter").startOf("day"),m=r?vc.formatMoment(u,dc):c,e.next=8,od(a,m,s,ad);case 8:if((d=e.sent).proc_month){e.next=14;break}return p=[o],r&&(p=new Array(5).fill(1).map(function(e,t){return u.clone().add(e+t,"month")})).unshift(u),v=p.map(function(e){return vc.formatMoment(e,"MMM")}),e.abrupt("return",r?{participants:{labels:v,datasets:[]},vehicles:{labels:v,datasets:[]},occupancy:{labels:v,datasets:[]}}:{participants:{labels:[],datasets:[]},vehicles:{labels:[],datasets:[]},occupancy:{labels:[],datasets:[]}});case 14:if(h=d.proc_month.map(function(e){return vc.getMoment(e,dc)}),f=[d.vp_partcpnt_tot,d.vp_partcpnt_potn,d.vp_partcpnt_goal,d.vp_veh_tot,d.vp_veh_potn,d.vp_veh_goal,d.ntd_data_cmpl_tot,d.ntd_vp_tot,d.vp_seat_util_goal,d.rideshare_capacity],r&&h.length<6){if(h[0].diff(u,"months")>0)for(;h[0].diff(u,"months")>0;)(b=h[0].clone()).subtract(1,"month"),h.unshift(b),f.forEach(function(e){return e.unshift(null)});if(i.diff(h[h.length-1],"months")>0)for(;i.diff(h[h.length-1],"months")>0;)(E=h[h.length-1].clone()).add(1,"month"),h.push(E),f.forEach(function(e){return e.push(null)})}return g=h.map(function(e){return vc.formatMoment(e,"MMM")}),e.abrupt("return",{participants:{labels:r?g:[],datasets:ud([md("Total",d.vp_partcpnt_tot),md("Goal",d.vp_partcpnt_goal),md("Potential",d.vp_partcpnt_potn)])},vehicles:{labels:r?g:[],datasets:ud([md("NTD Data",r?id(d.ntd_data_cmpl_tot,h):d.ntd_data_cmpl_tot),md("NTD Vanpools",d.ntd_vp_tot),md("Total",d.vp_veh_tot),md("Goal",d.vp_veh_goal),md("Potential",d.vp_veh_potn)])},occupancy:{labels:r?g:[],datasets:ud([md("Total",ld(d.rideshare_capacity,d.vp_partcpnt_tot)),md("Goal",d.vp_seat_util_goal),{label:"Potential",data:new Array(r?6:1).fill(100)}])}});case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),cd.tripData=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.currentAggregate,n=t.timePeriod,r=n.startDate,c=n.endDate,s=a.parent?a.parent.isTransit:a.isTransit,e.next=5,od(a,r,c,nd);case 5:if(o=e.sent,i=o.rows[0].columns,o.rows[0]){e.next=9;break}return e.abrupt("return",{commutePrimaryModes:{labels:rd.map(function(e){return e[Object.keys(e)[0]]}),datasets:new Array(rd.length-1).fill(0)}});case 9:return e.abrupt("return",{activeUsers:{total:pd(i.active_users_total),goals:pd(i.active_users_goal),potential:pd(i.active_users_potential)},commutePrimaryModes:{labels:rd.map(function(e){return e[Object.keys(e)[0]]}),datasets:sd(i.commute_primary_modes)},recordedTripsImpactData:{milesSaved:{total:pd(i.miles_saved_total),goals:pd(i.miles_saved_goal),potential:pd(i.miles_saved_potential),isCurrency:!1},parkingSpotsSaved:{total:pd(i.parking_spots_saved_total),goals:pd(i.parking_spots_goal),potential:pd(i.parking_spots_potential),isCurrency:!1},parkingSavings:{total:pd(s?24e3*i.parking_spots_saved_total:i.parking_savings_total),goals:pd(i.parking_savings_goal),potential:pd(i.parking_savings_potential),isCurrency:!0},fuelGallonsSaved:{total:pd(i.fuel_gallons_saved_total),goals:pd(i.fuel_gallons_saved_goal),potential:pd(i.fuel_gallons_saved_potential),isCurrency:!1},fuelSavings:{total:pd(i.fuel_savings_total),goals:pd(i.fuel_savings_goal),potential:pd(i.fuel_savings_potential),isCurrency:!0},co2Saved:{total:pd(i.co2_saved_total),goals:pd(i.co2_saved_goal),potential:pd(i.co2_saved_potential),isCurrency:!1}}});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();var sd=function(e){var t=e.labels,a=e.datasets;return[{label:"travel modes",data:rd.map(function(e){return a[0].data[t.indexOf(Object.keys(e)[0])]})}]},od=function(){var e=Object(sc.a)(l.a.mark(function e(t,a,n,r){var c,s,o,i,u,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=Ri.getAggregateIndex(t),s=t.parent?t.parent.isTransit:t.isTransit,o=Ri.getEmployer(t,c,s),i=Ri.getWorksite(t,c,s),u=Ri.getVanpool(t,c,s),m={aggregate_id:Ri.getRootAggregate(t).id,employer_id:o?o.id:void 0,worksite_id:i?i.id:void 0,vp_id:u?u.id:void 0,proc_dt_start:a,proc_dt_end:n},e.next=8,Pc.post(r[c].url(s),m);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),id=function(e,t){var a=vc.currentMoment(),n=new Array(6).fill(null),r=t.map(function(e){return e.month()}).indexOf(a.month());return r>-1&&t[r].year()===a.year()?(n[r]=e[r],n):n},ld=function(e,t){return t.map(function(t,a){if(!t)return null;var n=e[a];return n?Math.floor(n/t*100):null})},ud=function(e){return e.filter(function(e){return void 0!==e})},md=function(e,t){var a=dd(t);if(!a.every(function(e){return null===e}))return{label:e,data:a}},dd=function(e){return e.map(function(e){return""===e?null:e})};function pd(e){return e||void 0}var vd=cd,hd=l.a.mark(yd),fd=l.a.mark(Od),bd=l.a.mark(Nd),Ed=l.a.mark(kd),gd=l.a.mark(jd);function yd(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ea,Od);case 2:return e.next=4,Object(d.f)(Na,Nd);case 4:return e.next=6,Object(d.f)(Ca,kd);case 6:return e.next=8,Object(d.f)(Da,jd);case 8:case"end":return e.stop()}},hd)}function Od(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return vd.impactData(e.data)});case 3:return t=a.sent,a.next=6,Object(d.c)({type:ga,data:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),Rc.log(a.t0),a.next=13,Object(d.c)({type:ya});case 13:case"end":return a.stop()}},fd,null,[[0,8]])}function Nd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return vd.csvData(e.data)});case 3:return t=a.sent,a.next=6,Object(d.c)({type:ka,data:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),Rc.log(a.t0),a.next=13,Object(d.c)({type:ja});case 13:case"end":return a.stop()}},bd,null,[[0,8]])}function kd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return vd.enrollmentMonthly(e.data)});case 3:return t=a.sent,a.next=6,Object(d.c)({type:xa,data:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),Rc.log(a.t0),a.next=13,Object(d.c)({type:Sa});case 13:case"end":return a.stop()}},Ed,null,[[0,8]])}function jd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return vd.tripData(e.data)});case 3:return t=a.sent,a.next=6,Object(d.c)({type:Aa,data:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(0),Rc.log(a.t0),a.next=13,Object(d.c)({type:wa});case 13:case"end":return a.stop()}},gd,null,[[0,8]])}var Cd=l.a.mark(Id),xd=l.a.mark(Md),Sd=l.a.mark(Rd),Dd=l.a.mark(_d),Ad=l.a.mark(Ld),wd=l.a.mark(Ud),Td=l.a.mark(Vd),Pd=l.a.mark(Fd);function Id(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ia,Rd);case 2:return e.next=4,Object(d.f)(La,Ld);case 4:return e.next=6,Object(d.f)(Va,Vd);case 6:return e.next=8,Object(d.f)(Ra,Md);case 8:case"end":return e.stop()}},Cd)}function Md(){var e,t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/participant/fuelcard/summary"))});case 3:return e=a.sent,t=Object(On.a)(Object(On.a)({},e),{},{fuelCardSummary:Object(On.a)(Object(On.a)({},e.fuelCardSummary),{},{wexFilelastImportedDate:vc.parseFormalDate(e.fuelCardSummary.wexFilelastImportedDate)})}),a.next=7,Object(d.c)({type:_a,payload:t});case 7:a.next=16;break;case 9:return a.prev=9,a.t0=a.catch(0),Rc.log(a.t0),a.next=14,Object(d.c)({type:Ha,error:!0});case 14:return a.next=16,Object(d.c)({type:fe,data:a.t0.message});case 16:case"end":return a.stop()}},xd,null,[[0,9]])}function Rd(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_d();case 3:if(void 0===(e=t.sent)){t.next=14;break}if(9999!==e.error&&"9999"!==e.error){t.next=12;break}return t.next=8,Object(d.c)({type:Ha,error:!0});case 8:return t.next=10,Object(d.c)({type:fe,data:e.message});case 10:t.next=14;break;case 12:return t.next=14,Object(d.c)({type:Ma,payload:{activeFuelCardDetails:e}});case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),Rc.log(t.t0);case 19:case"end":return t.stop()}},Sd,null,[[0,16]])}function _d(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.b)(function(){return Pc.get("".concat(nr.apiBaseUrl,"/user/participant/fuelcard/details"))});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),Rc.log(e.t0),e.next=11,Object(d.c)({type:Ha,error:!0});case 11:return e.next=13,Object(d.c)({type:fe,data:e.t0.message});case 13:case"end":return e.stop()}},Dd,null,[[0,6]])}function Ld(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Ud(e.payload);case 3:if(void 0===(t=a.sent)){a.next=13;break}return a.next=7,Object(d.c)({type:be,data:"Your Commute fuel card and pin have been activated."});case 7:return a.next=9,Object(d.c)({type:Ia});case 9:return a.next=11,Object(d.c)({type:f});case 11:return a.next=13,Object(d.c)({type:Ua,data:t});case 13:a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),Rc.log(a.t0);case 18:case"end":return a.stop()}},Ad,null,[[0,15]])}function Ud(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/participant/fuelcard/activate"),e)});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),Rc.log(t.t0),t.next=11,Object(d.c)({type:Ha,error:!0});case 11:return t.next=13,Object(d.c)({type:fe,data:t.t0.message});case 13:case"end":return t.stop()}},wd,null,[[0,6]])}function Vd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Fd(e.payload);case 3:if(void 0===(t=a.sent)){a.next=9;break}return a.next=7,Object(d.c)({type:Wa,data:t.success});case 7:return a.next=9,Object(d.c)({type:be,data:"Your Commute fuel card pin has been reset."});case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),Rc.log(a.t0);case 14:case"end":return a.stop()}},Td,null,[[0,11]])}function Fd(e){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.b)(function(){return Pc.post("".concat(nr.apiBaseUrl,"/user/participant/fuelcard/pin"),e)});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),Rc.log(t.t0),t.next=11,Object(d.c)({type:Ha,error:!0});case 11:return t.next=13,Object(d.c)({type:fe,data:t.t0.message});case 13:case"end":return t.stop()}},Pd,null,[[0,6]])}var Bd=l.a.mark(qd),Yd=l.a.mark(zd),Wd=l.a.mark(Kd),Hd=l.a.mark(Jd),Gd=l.a.mark(Qd);function qd(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(rn,zd);case 2:return e.next=4,Object(d.f)(mn,Kd);case 4:return e.next=6,Object(d.f)(ln,Jd);case 6:return e.next=8,Object(d.f)(un,Qd);case 8:case"end":return e.stop()}},Bd)}function zd(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t="".concat(nr.apiBaseUrl,"/vanpools/search/count"),n.prev=1,n.next=4,Object(d.b)(function(){return Pc.post(t,e.data)});case 4:return a=n.sent,n.next=7,Object(d.c)({type:sn,data:a});case 7:n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(1),Rc.log(n.t0),n.next=14,Object(d.c)({type:on,data:!1});case 14:case"end":return n.stop()}},Yd,null,[[1,9]])}function Kd(e){var t,a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],e.data.forEach(function(e){e.selectedOption&&(t.push(e.workBoundOriginStop),t.push(e.workBoundDestinationStop),a=e)}),n.next=4,Object(d.c)({type:Fe,data:t});case 4:return n.next=6,Object(d.c)({type:dn,data:a});case 6:case"end":return n.stop()}},Wd)}function Jd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat(nr.apiBaseUrl,"/vanpool/requestToJoin"),a.prev=1,a.next=4,Object(d.b)(function(){return Pc.post(t,e.data)});case 4:if(!a.sent.success){a.next=11;break}return _n.analyticsEvent({type:"requestToJoin submit"}),a.next=9,Object(d.c)({type:be,data:"Thanks!  Your request has been saved."});case 9:return a.next=11,Object(d.c)({type:Ka});case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),Rc.log(a.t0);case 16:case"end":return a.stop()}},Hd,null,[[1,13]])}function Qd(e){var t;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat(nr.apiBaseUrl,"/vanpool/requestToJoin"),a.prev=1,a.next=4,Object(d.b)(function(){return Pc.post(t,e.data)});case 4:if(!a.sent.success){a.next=11;break}return _n.analyticsEvent({type:"stayInTouch submit"}),a.next=9,Object(d.c)({type:be,data:"Thanks!  Your request has been saved."});case 9:return a.next=11,Object(d.c)({type:Ka});case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),Rc.log(a.t0);case 16:case"end":return a.stop()}},Gd,null,[[1,13]])}var Xd,$d=l.a.mark(ep),Zd=Object(m.a)();function ep(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([Uc(),Wc(),Xi(),$i(),Wi(),is(),gs(),Cs(),qo(),Xo(),li(),to(),io(),jo(),Zc(),Yo(),fi(),wl(),Hl(),Oi(),pl(),$l(),cu(),fu(),Tu(),Ju(),dm(),Nm(),Sm(),Pm(),Um(),yd(),Id(),qd()]);case 2:case"end":return e.stop()}},$d)}var tp=a(12),ap=a(6),np=a(8),rp=a(7),cp=a(48),sp=a(487),op=a.n(sp),ip={a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,q:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9,z:9};function lp(e){return e&&e.toLowerCase().replace(/[^a-zA-Z0-9]/g,"").replace(/[a-z]/g,function(e){return ip[e]})}function up(e){var t=e.phone;return t===kn?r.a.createElement("span",{className:"callable"},kn):r.a.createElement("span",{className:"callable"},r.a.createElement("span",{className:"desktop"},t),r.a.createElement("a",{href:"tel:+1"+lp(t)},t))}function mp(e){var t=e.isLoading,a=e.absolute;return t?r.a.createElement("div",{className:"overlay ".concat(a?"absolute":"")},r.a.createElement("div",{className:"loader"})):null}var dp=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={srcdoc:"",loading:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.loadTerms(this.props)}},{key:"componentWillUnmount",value:function(){this.unlockScrolling&&this.unlockScrolling(),this.unmounted=!0}},{key:"componentWillReceiveProps",value:function(e){this.loadTerms(e),this.unlockScrolling&&!e.termsAndConditions&&this.unlockScrolling()}},{key:"lockScrolling",value:function(){if(!this.unlockScrolling){var e=function(e){return window.scrollTo(0,0)||e.preventDefault()||e.stopPropagation()};window.addEventListener("scroll",e),this.unlockScrolling=function(){return window.removeEventListener("scroll",e)}}}},{key:"loadTerms",value:function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.registrationComplete&&t.termsAndConditions){e.next=2;break}return e.abrupt("return",null);case 2:return this.lockScrolling(),a=t.termsAndConditions.documentId,e.next=6,Pc.get.cache("".concat(nr.apiBaseUrl,"/user/profile/terms?documentId=").concat(a));case 6:if(n=e.sent,r=n.terms,!this.unmounted){e.next=10;break}return e.abrupt("return");case 10:this.setState({srcdoc:r}),setTimeout(function(){return c.iframeFallback()},200);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"iframeFallback",value:function(){this.frame&&("about:blank"===this.frame.contentWindow.location.toString()&&(this.frame.contentWindow.location="javascript: window.frameElement.getAttribute('srcdoc');"))}},{key:"signTerms",value:function(){this.setState({loading:!0}),this.props.dispatch({type:h,data:{termsId:this.props.termsAndConditions.termsId}})}},{key:"handleAttemptedFocusChange",value:function(e){e.stopPropagation(),e.preventDefault(),e.target.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.employer,n=t.termsAndConditions,c=this.state,s=c.loading,o=c.srcdoc;return o&&n?r.a.createElement("div",{className:"terms-overlay"},r.a.createElement("div",{className:"terms"},r.a.createElement("div",{className:"title"},a?a+" Terms and Conditions":"Terms and Conditions"),r.a.createElement("div",{className:"desc"},"Before you can proceed you must you must review and accept your employers terms of service. If you have questions or require assistance, please call ",r.a.createElement(up,{phone:"(800)-VAN-4-WORK"}),"."),r.a.createElement("div",{className:"frame"},r.a.createElement(mp,{isLoading:s,absolute:!0}),r.a.createElement("iframe",{ref:function(t){return e.frame=t},srcDoc:o,title:"Terms and Conditions",onLoad:function(){return e.setState({loading:!1})}})),r.a.createElement("div",{className:"desc bottom"},"By clicking Agree and Continue, you agree and consent to"," ",a||"the"," Terms of Service and/or Privacy Policy listed above."," "),r.a.createElement("button",{className:"button primary",disabled:s,onClick:function(){return e.signTerms()},onBlur:function(t){return!s&&e.handleAttemptedFocusChange(t)},ref:function(e){return e&&e.focus()}},"Accept & Continue"),s?r.a.createElement("button",{className:"hidden",onBlur:function(t){return s&&e.handleAttemptedFocusChange(t)},ref:function(e){return e&&e.focus()}}):null)):null}}]),a}(n.Component);var pp=Object(o.b)(function(e){return e.userAuth||{}},null)(dp),vp={logout:function(){gn.clearAuthentication(),window.location.href=nr.logoutUrl}},hp=vp;var fp=Object(o.b)(function(e){return{hasUser:!!e.loginState.hasToken}})(function(e){var t=e.component,a=e.hasUser,n=Object(uo.a)(e,["component","hasUser"]);return r.a.createElement(cp.c,Object.assign({},n,{render:function(e){return a?r.a.createElement("div",{className:"private-route"},r.a.createElement(op.a,{timeout:nr.idleTimeout,idleAction:function(){hp.logout()}}),r.a.createElement(pp,null),r.a.createElement(t,e)):null}}))}),bp=a(19),Ep=a(223),gp=a.n(Ep),yp=a(489),Op=a.n(yp),Np={generateAndStoreNonce:function(){var e=Op()();return localStorage.setItem("nonce",e),e},addNonceToUrl:function(e){return e+(e.includes("?")?"&":"?")+"nonce="+Np.generateAndStoreNonce()}},kp=Np,jp=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){window.location.href=kp.addNonceToUrl(nr.redirectLoginToUrl)}},{key:"render",value:function(){return null}}]),a}(n.Component);function Cp(){return r.a.createElement("div",{className:"login-error"},r.a.createElement("img",{src:gp.a,alt:"Logo",className:"branding"}),r.a.createElement("p",null,"Sorry, Commute is currently experiencing technical issues. Please try back again later."),r.a.createElement("p",null,"If your need is more immediate, please call"," ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),"."),r.a.createElement("button",{className:"button primary",onClick:function(){return hp.logout()}},"Try Again"),r.a.createElement("iframe",{id:"silentLogout",name:"silentLogout",title:"silentLogout",src:nr.logoutUrl}))}var xp=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={authenticated:!1},n.handleSubmit=n.handleSubmit.bind(Object(bp.a)(n)),n.updateUserName=n.updateUserName.bind(Object(bp.a)(n)),n.updatePassword=n.updatePassword.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.loginState.hasToken&&this.props.init(),this.setState({authenticated:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState({authenticated:e.loginState.hasToken&&e.loginState.redirectToReferrer})}},{key:"updateUserName",value:function(e){this.props.loginState.username=e.target.value}},{key:"updatePassword",value:function(e){this.props.loginState.password=e.target.value}},{key:"handleSubmit",value:function(e){e.stopPropagation(),e.preventDefault();var t=this.props.loginState.username,a=this.props.loginState.password;this.props.authenticate(t,a)}},{key:"render",value:function(){var e=this,t=this.state.authenticated,a=this.props,n=a.loginState,c=a.location;if(t){var s=n.redirectUrl,o=(s?{from:s}:c.state||{from:{pathname:"/"}}).from;return r.a.createElement(cp.b,{to:o})}if(c.search){var i=function(e){for(var t=e.substr(1).split("&"),a={},n=0;n<t.length;n++){var r=decodeURIComponent(t[n].split("=")[0]),c=decodeURIComponent(t[n].split("=")[1]);a[r]=c}return a}(c.search);if(Rc.log(c.search),Rc.log("Displaying error message, clearing Auth, and silently logging out"),gn.clearAuthentication(),i.error)return _n.analyticsEvent({type:"Login Error",error:i.error_description?i.error+":"+i.error_description:i.error}),r.a.createElement(Cp,null)}return nr.localLogin?r.a.createElement("div",{className:"login"},r.a.createElement("form",{className:"card",onSubmit:this.handleSubmit},r.a.createElement("img",{src:gp.a,alt:"Logo",className:"branding"}),r.a.createElement("input",{className:"long",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",name:"username",placeholder:"Username",type:"text",onInput:function(t){return e.updateUserName(t)}}),r.a.createElement("input",{className:"long",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",name:"password",placeholder:"Password",type:"password",onInput:function(t){return e.updatePassword(t)}}),r.a.createElement("input",{className:"submit",name:"submit",type:"submit",value:"Sign In"}))):r.a.createElement(jp,null)}}]),a}(n.Component);var Sp=Object(o.b)(function(e){return{loginState:e.loginState}},function(e,t){return{init:function(){e({type:x})},authenticate:function(t,a){e({type:N,data:{username:t,password:a}})}}})(xp),Dp=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={nonce:kp.generateAndStoreNonce()},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){localStorage.setItem("passwordReset","start"),_n.analyticsEvent({type:"Password Reset Start"});var e=this.props.policy,t=this.state.nonce,a=encodeURIComponent(window.location.origin+"/azure/"),n="p="+e,r="client_id="+nr.clientId,c="redirect_uri="+a,s="nonce="+t;window.location.href=nr.azureBaseUrl+"?"+[n,r,s,c,"scope=openid","response_type=id_token","prompt=login"].join("&")}},{key:"render",value:function(){return null}}]),a}(r.a.Component),Ap=Dp,wp=a(490),Tp=a.n(wp),Pp=a(491),Ip=a.n(Pp),Mp=a(492),Rp=a.n(Mp),_p=a(493),Lp=a.n(_p),Up=a(494),Vp=a.n(Up),Fp=a(495),Bp=a.n(Fp),Yp=a(496),Wp=a.n(Yp),Hp=a(497),Gp=a.n(Hp),qp=a(498),zp=a.n(qp),Kp=a(499),Jp=a.n(Kp),Qp=a(500),Xp=a.n(Qp),$p=a(501),Zp=a.n($p),ev=a(502),tv=a.n(ev),av=a(503),nv=a.n(av),rv=a(504),cv=a.n(rv),sv=a(505),ov=a.n(sv),iv=a(506),lv=a.n(iv),uv=a(507),mv=a.n(uv),dv=a(508),pv=a.n(dv),vv=a(509),hv=a.n(vv),fv=a(510),bv=a.n(fv),Ev=a(511),gv=a.n(Ev),yv=a(512),Ov=a.n(yv),Nv=a(513),kv=a.n(Nv),jv=a(514),Cv=a.n(jv),xv=a(515),Sv=a.n(xv),Dv=a(516),Av=a.n(Dv),wv=a(517),Tv=a.n(wv),Pv=a(518),Iv=a.n(Pv),Mv=a(519),Rv=a.n(Mv),_v=a(520),Lv=a.n(_v),Uv=a(521),Vv=a.n(Uv),Fv=a(522),Bv=a.n(Fv),Yv=a(523),Wv=a.n(Yv),Hv=a(524),Gv=a.n(Hv),qv=a(525),zv=a.n(qv),Kv=a(526),Jv=a.n(Kv),Qv=a(527),Xv=a.n(Qv),$v=a(528),Zv=a.n($v),eh=a(529),th=a.n(eh),ah=a(530),nh=a.n(ah),rh=a(531),ch=a.n(rh),sh=a(532),oh=a.n(sh),ih=a(533),lh=a.n(ih),uh=a(534),mh=a.n(uh),dh=a(535),ph=a.n(dh),vh=a(536),hh=a.n(vh),fh=a(537),bh=a.n(fh),Eh=a(538),gh=a.n(Eh),yh=a(539),Oh=a.n(yh),Nh=a(540),kh=a.n(Nh),jh=a(541),Ch=a.n(jh),xh=a(542),Sh=a.n(xh),Dh=a(543),Ah=a.n(Dh),wh=a(544),Th=a.n(wh),Ph=a(451),Ih=a.n(Ph),Mh=a(452),Rh=a.n(Mh),_h=a(453),Lh=a.n(_h),Uh=a(454),Vh=a.n(Uh),Fh=a(455),Bh=a.n(Fh),Yh=a(456),Wh=a.n(Yh),Hh=a(457),Gh=a.n(Hh),qh=a(458),zh=a.n(qh),Kh=a(459),Jh=a.n(Kh),Qh=a(460),Xh=a.n(Qh),$h=a(461),Zh=a.n($h),ef=a(462),tf=a.n(ef),af=a(463),nf=a.n(af),rf=a(464),cf=a.n(rf),sf=(a(465),a(466)),of=a.n(sf),lf=a(467),uf=a.n(lf),mf=function(e){return function(t){return r.a.createElement(e,Object.assign({focusable:"false"},t))}},df=function(e){return r.a.createElement(Tp.a,Object.assign({focusable:"false"},e,{className:"edit-icon "+(e.className||"")}))},pf=mf(Av.a),vf=mf(nh.a),hf=mf(th.a),ff=mf(Rp.a),bf=mf(Lp.a),Ef=mf(Vp.a),gf=mf(Bp.a),yf=mf(Wp.a),Of=mf(Gp.a),Nf=mf(zp.a),kf=mf(Jp.a),jf=mf(Xp.a),Cf=mf(Zp.a),xf=mf(tv.a),Sf=mf(nv.a),Df=mf(cv.a),Af=mf(ov.a),wf=mf(lv.a),Tf=mf(mv.a),Pf=mf(pv.a),If=mf(hv.a),Mf=mf(bv.a),Rf=mf(gv.a),_f=(mf(Ov.a),mf(kv.a),mf(Cv.a)),Lf=mf(Sv.a),Uf=mf(Tv.a),Vf=mf(Iv.a),Ff=mf(Rv.a),Bf=mf(Lv.a),Yf=mf(Vv.a),Wf=mf(Bv.a),Hf=mf(Wv.a),Gf=mf(Gv.a),qf=mf(zv.a),zf=mf(Jv.a),Kf=mf(Xv.a),Jf=mf(Zv.a),Qf=mf(ch.a),Xf=mf(oh.a),$f=mf(lh.a),Zf=mf(mh.a),eb=mf(ph.a),tb=mf(hh.a),ab=mf(bh.a),nb=mf(gh.a),rb=mf(Oh.a),cb=mf(kh.a),sb=mf(Ch.a),ob=mf(Sh.a),ib=mf(Ah.a),lb=mf(Th.a),ub=mf(Ip.a),mb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={deactivating:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.message;this.setState({deactivating:!1}),a&&setTimeout(function(){return t.close()},5500)}},{key:"close",value:function(){this.setState({deactivating:!0}),setTimeout(this.props.close,500)}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.type,c=t.hideNavigation,s=t.root,o=this.state.deactivating,i=window.location.hash.includes("login");return a?r.a.createElement("div",{className:"banner ".concat(n," ").concat(i||s?"login-page":""," ").concat(c?"short-nav":""," ").concat(o?"out":"")},r.a.createElement("div",{className:"message"},a),r.a.createElement("div",{onClick:function(){return e.close()},onKeyPress:function(t){return"Enter"===t.key&&e.close()},className:"close-button",tabIndex:"0",ref:function(e){return e&&e.focus()},"aria-label":a},r.a.createElement(gf,null))):null}}]),a}(n.Component);var db=Object(o.b)(function(e){return{message:e.banner.message,type:e.banner.type}},function(e,t){return{close:function(){e({type:Ee})}}})(mb),pb=a(545),vb=a.n(pb);function hb(){var e=gn.hasPermissions([Us,Ms]);return r.a.createElement("div",{className:"faded-overlay"},r.a.createElement("ul",{className:"main-nav"},r.a.createElement("li",null,r.a.createElement(Ps,{roles:[qs],required:!1},r.a.createElement(tp.c,{id:"stats-nav-link",replace:"#/stats"===window.location.hash,activeClassName:"active",to:"/stats"},"Stats"))),r.a.createElement("li",null,r.a.createElement(tp.c,{id:"dashboard-nav-link",replace:"#/dashboard"===window.location.hash,activeClassName:"active",to:"/dashboard"},"Dashboard")),r.a.createElement(Ps,{roles:[Ws,qs],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{id:"payment-nav-link",replace:"#/payment"===window.location.hash,activeClassName:"active",to:"/payment"},e?"Account":"Payment"))),r.a.createElement(Ps,{roles:[[_s,Ls],[Bs,Fs],[qs,Ls]],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{id:"trip-recording-nav-link",replace:"#/trip-recording"===window.location.hash,activeClassName:"active",to:"/trip-recording"},"Trip Recording"))),r.a.createElement(Ps,{roles:[_s,qs],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{id:"roster-nav-link",replace:"#/roster"===window.location.hash,activeClassName:"active",to:"/roster"},"Roster"))),r.a.createElement(Is,{roles:[Rs,Bs],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{id:"route-nav-link",replace:"#/route"===window.location.hash,activeClassName:"active",to:"/route"},"Route")),r.a.createElement("li",null,r.a.createElement(tp.c,{id:"vanpool-nav-link",replace:"#/vanpool"===window.location.hash,activeClassName:"active",to:"/vanpool"},"Vanpool")))))}var fb=a(313),bb=a.n(fb),Eb=a(314),gb=a.n(Eb),yb=a(546),Ob=a.n(yb);function Nb(){return r.a.createElement("h1",null,r.a.createElement(Is,{roles:[Gs],required:!1},r.a.createElement(tp.c,{id:"logo-dashboard-nav-link",replace:"#/dashboard"===window.location.hash,activeClassName:"active",to:"/dashboard"},r.a.createElement("img",{className:"branding",src:bb.a,alt:"Commute by Enterprise"}),r.a.createElement("img",{className:"branding-mobile",src:gb.a,alt:"Commute"}))),r.a.createElement(Ps,{roles:[Gs],required:!1},r.a.createElement(tp.c,{id:"logo-dashboard-nav-link",replace:"#/stats"===window.location.hash,activeClassName:"active",to:"/stats"},r.a.createElement("img",{className:"branding",src:bb.a,alt:"Commute by Enterprise"}),r.a.createElement("img",{className:"branding-mobile",src:gb.a,alt:"Commute"}))),r.a.createElement("span",{className:"print-only"},"COMMUTE"))}function kb(e){var t=e.Icon,a=e.title,n=e.children,c=e.isEditable,s=e.edit;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"head"},r.a.createElement(t,null),r.a.createElement("h3",null,a),c?r.a.createElement("button",{className:"edit",onClick:s,"aria-label":"Edit ".concat(a)},r.a.createElement(df,null)):null),r.a.createElement("div",{className:"body"},n))}function jb(e){var t=e.label,a=e.children,n=e.className;return r.a.createElement("div",{className:"entry"},r.a.createElement("div",{className:"label"},t),r.a.createElement("div",{className:"value ".concat(n||"").trim()},a))}Nb.Footer=function(){return r.a.createElement("h1",null,r.a.createElement("img",{className:"branding",src:Ob.a,alt:"Commute by Enterprise"}))};var Cb={format:function(e){return(e.address.indexOf(e.description)>-1?"":"".concat(e.description,", "))+e.address},lines:function(e){return[e.line1,e.line2,"".concat(e.city,", ").concat(e.state," ").concat(e.zip)].filter(function(e){return e})},equal:function(e,t){return Cb.lines(e).join(" ")===Cb.lines(t).join(" ")},valid:function(e){return!(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]||!Cb.empty(e))||!(!(e.line1&&e.city&&e.state)||5!==e.zip.length&&10!==e.zip.length)},empty:function(e){return",  "===Cb.lines(e).join("")}};Cb.fromGeocode=function(e){var t=function(e){return e.address_components.reduce(function(e,t){return Object(On.a)(Object(On.a)({},e),{},Object(er.a)({},t.types[0],t.long_name))},{})}(Object(hc.a)(e.geocode,1)[0]),a=t.street_number,n=t.route,r=t.locality,c=t.administrative_area_level_1,s=t.postal_code,o=t.subpremise;return{line1:(a?"".concat(a," ").concat(n):n)||e.description,line2:o||"",city:r||"",state:c,zip:s||"",country:"USA",latitude:e.latitude,longitude:e.longitude}};var xb=Cb;var Sb=Object(o.b)(function(e){return{requestResult:e.findARide.requestToJoin,matches:e.findARide.count,profile:e.userAuth,commuteProfile:e.commuteProfile,userProfile:e.profile}},function(e){return e({type:qt}),{requestToJoin:function(t){e({type:Kt,data:t})}}})(function(e){var t=e.matches,a=e.requestResult,n=void 0!==a&&a,c=e.requestToJoin,s=e.showVan,o=e.profile,i=e.commuteProfile,u=e.userProfile,m=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.map(function(e){return t.indexOf(e)+1})},d=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo.getAddressAndLocation(t);case 2:return a=e.sent,n=xb.fromGeocode(a),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(sc.a)(l.a.mark(function e(){var t,a,n,r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.commute,e.next=3,d(t.homeAddress);case 3:return a=e.sent,e.next=6,d(t.workAddress);case 6:return n=e.sent,e.next=9,m(t.activeDays);case 9:r=e.sent,s={firstName:o.firstName,lastName:o.lastName,emailAddress:u.email,employerId:null,employerName:t.employer,homeAddress:a,workAddress:n,phone:o.phone,workArrivalTime:t.arriveAtWork,workDepartureTime:t.departFromWork,isWorkArriveTimeFlexible:t.arriveFlexible,isWorkDepartTimeFlexible:t.departFlexible,commuteDays:r,vanpoolMatch:[]},c(s);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(kb,{title:"Vanpool",Icon:Rf},r.a.createElement("div",{className:"upper"},s?r.a.createElement("img",{src:Ih.a,alt:"van"}):null,r.a.createElement("div",{className:"no-vanpool"},"You are currently ",r.a.createElement("span",null,o.isInVanpool?"":"not ")," ","part of a commute.",s?r.a.createElement(tp.b,{to:"/link-vanpool",className:"link"},"Link My Commute"):null)),r.a.createElement("div",{className:"lower"},n?r.a.createElement("div",{className:"request-result"},"Thanks!"," ",r.a.createElement("span",null,"We've got all your information and will be reaching out shortly to find you the perfect Commute.")):r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement("div",{className:"search"},"There are ",r.a.createElement("span",{className:"result"},t)," Commute vanpools available that match your current Commute Profile."),r.a.createElement("div",{className:"more-info"},"Would you like an Enterprise associate to reach out to you?")),r.a.createElement("button",{className:"button request",onClick:function(){return p()}},"Contact Me"))))});function Db(e){var t=e.fineNewCommute;return r.a.createElement("div",null,r.a.createElement(kb,{title:"Vanpool",Icon:Rf},r.a.createElement("div",{className:"upper"},r.a.createElement("div",{className:"no-vanpool"},"Need a new ride to work?")),r.a.createElement("div",{className:"lower"},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement("div",{className:"search"},"We understand circumstances change. So we're making it easy for you to find a new Commute.")),r.a.createElement("button",{className:"button request",onClick:function(){return t()}},"Find New Commute")))))}function Ab(e){var t=e.fineNewCommute;return r.a.createElement("div",null,r.a.createElement(kb,{title:"Vanpool",Icon:Rf},r.a.createElement("div",{className:"upper"},r.a.createElement("div",{className:"no-vanpool"},"Want to change your Commute?")),r.a.createElement("div",{className:"lower"},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement("div",{className:"search"},"If you would like to change your current commute, please click below to find a new Commute.")),r.a.createElement("button",{className:"button request",onClick:function(){return t()}},"Find New Commute")))))}var wb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ap.a)(a,[{key:"fineNewCommute",value:function(){this.props.newCommute(this.props.profile.isInVanpool)}},{key:"closeModal",value:function(){this.props.closeCommute()}},{key:"render",value:function(){var e=this;return this.props.profile.isInVanpool?r.a.createElement(Ab,{fineNewCommute:function(){return e.fineNewCommute()}}):r.a.createElement(Db,{fineNewCommute:function(){return e.fineNewCommute()}})}}]),a}(n.Component);var Tb=Object(o.b)(function(e){return{isOpen:e.changeMyCommute.showCommuteModal,reasons:e.changeMyCommute.reasons,page:e.changeMyCommute.page,profile:e.userAuth}},function(e){return{newCommute:function(t){e({type:za,data:{isInVanpool:t}})},closeCommute:function(){e({type:Ka})}}})(wb);function Pb(e){var t=e.active,a=e.close,n=e.children;return t?r.a.createElement("div",{className:"changeCommuteModal-container change"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"pageOrder"},n.props.page),r.a.createElement("span",{className:"contact"}," ",r.a.createElement("span",{className:"phoneIcon"},r.a.createElement(wf,null)),r.a.createElement("a",{href:nr.contactSupportLink,target:"_blank"},"contact")),r.a.createElement("span",{onClick:a,className:"close"},r.a.createElement(gf,null))),r.a.createElement("div",{className:"body"},n),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"privacy"},r.a.createElement("a",{href:nr.privacyPolicyLink,target:"_blank"},"Privacy Policy"))))):null}var Ib=function(e){return"Other:"!==e.value?r.a.createElement("li",null,r.a.createElement("label",{className:"radio-label"},r.a.createElement("input",{className:"reasonsRadio",onChange:e.handleCheckChildElement,type:"radio",checked:1==e.isChecked,value:e.value}),r.a.createElement("span",{className:"radio-custom rectangular"},r.a.createElement("span",{className:"circle"})),r.a.createElement("span",{className:"commuteLabel checkLabel"}," \xa0 ",e.value))):r.a.createElement("li",null,r.a.createElement("label",{className:"radio-label"},r.a.createElement("input",{className:"reasonsRadio",onChange:e.handleCheckChildElement,type:"radio",checked:1==e.isChecked,value:e.value}),r.a.createElement("span",{className:"radio-custom rectangular"},r.a.createElement("span",{className:"circle"})),r.a.createElement("span",{className:"commuteLabel checkLabel"}," \xa0 ",e.value)),r.a.createElement("input",{type:"text",className:"otherInput",value:e.otherValue,onChange:e.changeOther}))},Mb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).setReasons=function(){return n.props.profile.isInVanpool?[{id:1,value:"Moving to New Location",name:"Moving to New Location",isChecked:!1},{id:2,value:"New Job",name:"New Job",isChecked:!1},{id:3,value:"Changing Shifts",name:"Changing Shifts",isChecked:!1},{id:4,value:"Current Van is Not Working Out",name:"Current Van is Not Working Out",isChecked:!1},{id:5,value:"Other:",name:"Other:",isChecked:!1}]:[{id:1,value:"Moving to New Location",name:"Moving to New Location",isChecked:!1},{id:2,value:"New Job",name:"New Job",isChecked:!1},{id:3,value:"Changing Shifts",name:"Changing Shifts",isChecked:!1},{id:5,value:"Other:",name:"Other:",isChecked:!1}]},n.handleCheckChildElement=function(e){e.stopPropagation();var t=n.state.reasons;t.forEach(function(t){t.value===e.target.value?t.isChecked=e.target.checked:t.isChecked=!1}),n.setState({reasons:t}),n.checkDisable()},n.checkDisable=function(){var e=[];n.state.reasons.map(function(t){t.isChecked&&e.push(t)}),e.length>0?e.map(function(e){"Other:"==e.value?n.state.otherValue?n.setState({selected:!0}):n.setState({selected:!1}):n.setState({selected:!0})}):n.setState({selected:!1})},n.changeOther=function(e){n.setState({otherValue:e.target.value},function(){n.checkDisable()})},n.reasonsNext=function(){n.props.reasonsNext(n.state.reasons,n.state.otherValue)},n.closeCommuteModal=function(){n.props.closeCommute()},n.state={reasons:n.props.reasons.length?n.props.reasons:n.setReasons(),otherValue:n.props.otherValue?n.props.otherValue:void 0,selected:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=Object(sc.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.init();case 2:this.checkDisable();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("p",{className:"reasonsHeading"},"Why are you looking for a new Commute?"),r.a.createElement("div",{className:"reasons"},r.a.createElement("p",null,"We get it, things change. If we understand why, we'll be able to connect you with a better Commute solution. Don't worry, we'll keep your response to ourselves. "),r.a.createElement("div",{className:"resonsCheckContainer"},r.a.createElement("ul",null,this.state.reasons.map(function(t,a){return r.a.createElement(Ib,Object.assign({key:a,handleCheckChildElement:e.handleCheckChildElement},t,{otherValue:e.state.otherValue,changeOther:e.changeOther}))})))),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.closeCommuteModal},"BACK"),r.a.createElement("button",{className:"button confirm primary validation",disabled:!this.state.selected,onClick:this.reasonsNext},"NEXT"))))}}]),a}(n.Component);var Rb=Object(o.b)(function(e){return{reasons:e.changeMyCommute.reasons,otherValue:e.changeMyCommute.otherValue,profile:e.userAuth}},function(e){return{init:function(){e({type:xt}),e({type:Nt})},reasonsNext:function(t,a){e({type:Ja,data:{reasons:t,otherValue:a}})},closeCommute:function(){e({type:Ka})}}})(Mb),_b="https://maps.googleapis.com/maps/api/js?".concat(nr.googleMapsCredentials,"&libraries=places,geometry,drawing"),Lb=function(e){Object(np.a)(n,e);var t=Object(rp.a)(n);function n(e){var a;return Object(Nc.a)(this,n),(a=t.call(this,e)).state={value:e.value||"",original:e.value||"",ready:!1,valid:!0},a.handleChange=a.handleChange.bind(Object(bp.a)(a)),a}return Object(ap.a)(n,[{key:"componentDidMount",value:function(){var e=this;a(430)(_b,function(){return e.setState({ready:!0})}),this.setState({value:this.props.value||"",original:this.props.value||""})}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value||""})}},{key:"handleChange",value:function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n,r,c,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo.getAddressAndLocation(t);case 2:a=e.sent,n=a.geocode[0].address_components,r=["street_number","route","locality","administrative_area_level_1","postal_code","country"],c=n.map(function(e){return e.types[0]}),s=r.every(function(e){return c.includes(e)}),this.setState({valid:s}),this.props.value&&-1===this.props.value.indexOf(a.address)&&(this.props.existingAddresses||[]).includes(a.address)?(alert("That address is already in use."),this.setState({value:this.props.value})):this.props.onChange(a,s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.ready?r.a.createElement("div",null,r.a.createElement(Mo.a,{className:"autocomplete",options:{componentRestrictions:{country:"US"},types:["address"]},styles:{autocompleteContainer:{zIndex:99,top:40,boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)",border:"none",overflow:"hidden"}},classNames:{input:(this.state.valid?this.state.value!==this.props.value?"validation-error":this.props.value?this.state.value!==this.state.original?"changed":"":"new-item":"invalid-address-auto")+" "+(this.props.className||"")},inputProps:{placeholder:this.props.placeholder,value:this.state.value,onChange:function(t){return e.setState({value:t})},onBlur:function(){return e.setState({value:e.props.value})},onFocus:function(e){return e.target.select()},autoFocus:this.props.autoFocus},onSelect:this.handleChange}),this.state.valid?null:r.a.createElement("div",{className:"invalid-address"},"Please select a valid, full address from the dropdown.")):null}}]),n}(n.Component),Ub=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function Vb(e,t){return e&&t?"Day with riders. Remove riders and try again.":!e&&t?"Unavailable":e&&!t?"Commuting":"Not Commuting"}function Fb(e){var t=e.value,a=e.notAllowed,n=void 0===a?[]:a,c=e.allowed,s=void 0===c?Ub:c,o=e.onChange;return r.a.createElement("div",{className:"days"},Ub.map(function(e){return{day:e,disabled:n.includes(e)||!s.includes(e),active:t.includes(e)}}).map(function(e){var a=e.day,n=e.active,c=e.disabled;return r.a.createElement("button",{disabled:c,day:a,key:a,onClick:function(){return o(n?(e=t,r=a,Ub.filter(function(t){return e.includes(t)&&t!==r})):function(e,t){return Ub.filter(function(a){return e.includes(a)||a===t})}(t,a));var e,r},type:"button",title:Vb(n,c),className:"day-btn ".concat(n?"active":"")},a.substr(0,3))}))}var Bb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={value:e.value,original:e.value,open:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value,original:this.props.value})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"delayedClose",value:function(){var e=this;this.props.onSelected(this.state.value),this.setState({open:0}),setTimeout(function(){return e.setState({open:!1})},50)}},{key:"render",value:function(){var e=this,t={};return!1===this.state.open&&(t.tabIndex=0),r.a.createElement("div",Object.assign({className:"time-picker ".concat(this.state.open?"active":""),onKeyDown:function(t){return t.key===Hb&&e.setState({open:!0})},onClick:function(){return e.setState({open:!0})}},t),r.a.createElement("div",{className:"time-display"},vc.parseTime(this.state.value)),this.state.open?r.a.createElement(qb,{value:this.state.value,onChange:function(t){return e.setState({value:t})},close:function(){return e.delayedClose()}}):r.a.createElement(Bf,null))}}]),a}(n.Component),Yb=["12","01","02","03","04","05","06","07","08","09","10","11"],Wb=["00","15","30","45"],Hb="Enter",Gb={key:Hb,preventDefault:function(){},stopPropagation:function(){}},qb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={original:e.value,value:e.value},n.hours=[],n.minutes=[],n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.close=function(){e.props.close(),window.removeEventListener("mousedown",e.close)},window.addEventListener("mousedown",this.close),this.hours[0].focus()}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"setHour",value:function(e,t,a){e.key===Hb&&("am"===a?this.setAM(t):this.setPM(t));var n=Yb.indexOf(t);"ArrowUp"===e.key&&n>0&&(e.preventDefault(),this.hours[n-1].focus()),"ArrowDown"===e.key&&n<this.hours.length-1&&(e.preventDefault(),this.hours[n+1].focus())}},{key:"setMinute",value:function(e,t){if(e.key===Hb){var a=this.state.value.replace(/:\d\d/,":"+t);this.setState({value:a}),this.props.onChange(a)}var n=Wb.indexOf(t);"ArrowUp"===e.key&&n>0&&(e.preventDefault(),this.minutes[n-1].focus()),"ArrowDown"===e.key&&n<this.minutes.length-1&&(e.preventDefault(),this.minutes[n+1].focus())}},{key:"setAM",value:function(e){e="12"===e?"00":e;var t=this.state.value.replace(/^\d+/,e);this.setState({value:t}),this.props.onChange(t)}},{key:"setPM",value:function(e){e="12"===e?"12":parseInt(e,10)+12;var t=this.state.value.replace(/^\d+/,e);this.setState({value:t}),this.props.onChange(t)}},{key:"tabOnHours",value:function(e){if(e.stopPropagation(),e.preventDefault(),e.shiftKey)return this.cancel.focus();this.minutes[0].focus()}},{key:"tabOnMinutes",value:function(e){if(e.stopPropagation(),e.preventDefault(),e.shiftKey)return this.hours[0].focus();this.am.focus()}},{key:"keyOnAMPM",value:function(e){return"Tab"!==e.key||e.shiftKey?(e.stopPropagation(),e.preventDefault(),"ArrowUp"===e.key&&e.target!==this.am?this.am.focus():"ArrowDown"===e.key&&e.target!==this.pm?this.pm.focus():"Tab"===e.key&&e.shiftKey?this.minutes[0].focus():void 0):this.close()}},{key:"onKeyCancel",value:function(e){return e.key===Hb?(this.props.onChange(this.state.original),this.close()):"Tab"===e.key?e.shiftKey?this.close():(e.preventDefault(),this.hours[0].focus()):void 0}},{key:"render",value:function(){var e=this,t=this.state.value.split(":"),a=Object(hc.a)(t,2),n=a[0],c=a[1],s={hour:Yb[parseInt(n,10)%12],minute:c,ampm:parseInt(n,10)>11?"pm":"am"};return r.a.createElement("div",{className:"time-options",onMouseDown:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"cancel",tabIndex:0,ref:function(t){return e.cancel=t},onClick:function(){return e.onKeyCancel(Gb)},onKeyDown:function(t){return e.onKeyCancel(t)}},r.a.createElement(gf,null)),r.a.createElement("div",{className:"hours",onKeyDown:function(t){return"Tab"===t.key&&e.tabOnHours(t)}},Yb.map(function(t,a){return r.a.createElement("div",{key:t,ref:function(t){return e.hours[a]=t},className:"hour ".concat(s.hour===t?"active":""),onKeyDown:function(a){return e.setHour(a,t,s.ampm)},onClick:function(){return e.setHour(Gb,t,s.ampm)},tabIndex:0},t)})),r.a.createElement("div",{className:"minutes",onKeyDown:function(t){return"Tab"===t.key&&e.tabOnMinutes(t)}},Wb.map(function(t,a){return r.a.createElement("div",{key:t,ref:function(t){return e.minutes[a]=t},className:"minute ".concat(s.minute===t?"active":""),onKeyDown:function(a){return e.setMinute(a,t)},onClick:function(){return e.setMinute(Gb,t)},tabIndex:0},t)})),r.a.createElement("div",{className:"am-pm",onKeyDown:function(t){return e.keyOnAMPM(t)}},r.a.createElement("div",{className:"am ".concat("am"===s.ampm?"active":""),ref:function(t){return e.am=t},onKeyDown:function(t){return t.key===Hb&&e.setAM(s.hour)},onClick:function(){return e.setAM(s.hour)},tabIndex:0},"AM"),r.a.createElement("div",{className:"pm ".concat("pm"===s.ampm?"active":""),ref:function(t){return e.pm=t},onKeyDown:function(t){return t.key===Hb&&e.setPM(s.hour)},onClick:function(){return e.setPM(s.hour)},tabIndex:0},"PM")))}}]),a}(n.Component),zb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).updateAddress=function(e,t,a){"homeAddress"==t?n.setState(function(t){return{updatedUserDetails:Object(On.a)(Object(On.a)({},t.updatedUserDetails),{},{homeAddress:e}),homeAddressValid:a}}):n.setState(function(t){return{updatedUserDetails:Object(On.a)(Object(On.a)({},t.updatedUserDetails),{},{workAddress:e}),workAddressValid:a}})},n.updateDays=function(e){n.setState(function(t){return{updatedUserDetails:Object(On.a)(Object(On.a)({},t.updatedUserDetails),{},{activeDays:e.rideDays})}})},n.updateArriveTime=function(e){n.setState(function(t){return{updatedUserDetails:Object(On.a)(Object(On.a)({},t.updatedUserDetails),{},{arriveAtWork:e.arriveAtWork})}})},n.updateDepartTime=function(e){n.setState(function(t){return{updatedUserDetails:Object(On.a)(Object(On.a)({},t.updatedUserDetails),{},{departFromWork:e.departFromWork})}})},n.UpdateArriveFlexible=function(e){var t=e.target.checked;n.setState(function(e){return{updatedUserDetails:Object(On.a)(Object(On.a)({},e.updatedUserDetails),{},{arriveFlexible:t})}})},n.updateFlexibleArrivalTime=function(e){var t=e.target.value;n.setState({flexibleArrivalTime:t})},n.UpdateDepartFlexible=function(e){var t=e.target.checked;n.setState(function(e){return{updatedUserDetails:Object(On.a)(Object(On.a)({},e.updatedUserDetails),{},{departFlexible:t})}})},n.updateFlexibleDepartureTime=function(e){var t=e.target.value;n.setState({flexibleDepartureTime:t})},n.modifyNext=Object(sc.a)(l.a.mark(function e(){var t,a,r,c,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loader:!0}),n.props.updateUserDetails(n.state.updatedUserDetails),t={flexibleArrivalTime:n.state.flexibleArrivalTime,flexibleDepartureTime:n.state.flexibleDepartureTime},e.next=5,n.props.updateFlexibleTime(t);case 5:return e.next=7,Vo.getAddressAndLocation(n.state.updatedUserDetails.workAddress);case 7:return a=e.sent,r="".concat(nr.apiBaseUrl,"/user/profile/employer/search?latitude=").concat(a.latitude,"&longitude=").concat(a.longitude),e.prev=9,e.next=12,Pc.get(r);case 12:if(c=e.sent,n.setState({loader:!1}),!c.employers){e.next=22;break}return s=c.employers,o=[],s.map(function(e){var t={isChecked:!1,id:e.employerId,value:e.employerName,name:e.employerName};o.push(t)}),o.push({id:null,value:"Other:",name:"Other:",isChecked:!1}),e.next=21,n.props.saveProximitySearch(o);case 21:n.props.matchSelectionPage();case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(9),n.setState({loader:!1}),Rc.log(e.t0);case 28:case"end":return e.stop()}},e,null,[[9,24]])})),n.modifyBack=function(){n.props.reviewModifyBack()},n.state={updatedUserDetails:null!==n.props.updatedUserDetails?n.props.updatedUserDetails:n.props.commuteProfile?n.props.commuteProfile:{},arriveFlexible:!1,departFlexible:!1,flexibleArrivalTime:n.props.flexibleDetails.flexibleArrivalTime?n.props.flexibleDetails.flexibleArrivalTime:10,flexibleDepartureTime:n.props.flexibleDetails.flexibleDepartureTime?n.props.flexibleDetails.flexibleDepartureTime:10,loader:!1,homeAddressValid:!0,workAddressValid:!0,flexibleTimes:[{label:"10 minutes",value:10},{label:"20 minutes",value:20},{label:"30 minutes",value:30},{label:"40 minutes",value:40},{label:"50 minutes",value:50},{label:"60 minutes",value:60}]},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){null!==this.props.updatedUserDetails?this.setState({updatedUserDetails:this.props.updatedUserDetails}):this.setState({updatedUserDetails:this.props.commuteProfile})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(mp,{isLoading:this.state.loader}),r.a.createElement("p",{className:"reasonsHeading"},"Tell us about your commute"),r.a.createElement("div",{className:"helperText"},r.a.createElement("p",null,"Don't worry, we won't update your profile!")),r.a.createElement("div",{className:"reviewForm"},r.a.createElement("div",{className:"commuteStart"},r.a.createElement("label",{className:"commuteLabel"},"Commute Start"),r.a.createElement(Lb,{placeholder:"Commute Start",className:"commuteInput",value:this.state.updatedUserDetails.homeAddress,onChange:function(t,a){return e.updateAddress(t.address,"homeAddress",a)}})),r.a.createElement("div",{className:"commuteEnd"},r.a.createElement("label",{className:"commuteLabel"},"Commute End"),r.a.createElement(Lb,{placeholder:"Commute End",className:"commuteInput",value:this.state.updatedUserDetails.workAddress,onChange:function(t,a){return e.updateAddress(t.address,"workAddress",a)}})),r.a.createElement("div",{className:"commuteDays"},r.a.createElement("label",{className:"commuteLabel"},"Commute Schedule"),r.a.createElement(Fb,{value:this.state.updatedUserDetails.activeDays,onChange:function(t){return e.updateDays({rideDays:t})}})),r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"commuteLabel"},"What time do you arrive at work?"),r.a.createElement("div",{className:"commuteInput"},r.a.createElement(Bb,{id:"arriveWorkTime",value:"N/A"!=this.state.updatedUserDetails.arriveAtWork?this.state.updatedUserDetails.arriveAtWork:"12:00:00",onSelected:function(t){return e.updateArriveTime({arriveAtWork:t})}}))),r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"checkbox-label"},r.a.createElement("input",{className:"arriveFlexible",onChange:this.UpdateArriveFlexible,type:"checkbox",checked:this.state.updatedUserDetails.arriveFlexible,value:this.state.updatedUserDetails.arriveFlexible}),r.a.createElement("span",{className:"checkbox-custom rectangular"}),r.a.createElement("span",{className:"commuteLabel checkLabel flexible"},"is your arrival time flexible?"))),this.state.updatedUserDetails.arriveFlexible?r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"commuteLabel"},"How flexible is your arrival time (in minutes)?"),r.a.createElement("div",{className:"commuteInput"},r.a.createElement("select",{defaultValue:this.state.flexibleArrivalTime,onChange:this.updateFlexibleArrivalTime,className:"flexibleTime arrival"},this.state.flexibleTimes.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))):"",r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"commuteLabel"},"What time do you depart to home?"),r.a.createElement("div",{className:"commuteInput"},r.a.createElement(Bb,{id:"arriveHomeTime",value:"N/A"!=this.state.updatedUserDetails.departFromWork?this.state.updatedUserDetails.departFromWork:"12:00:00",onSelected:function(t){return e.updateDepartTime({departFromWork:t})}}))),r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"checkbox-label"},r.a.createElement("input",{className:"departFlexible",onChange:this.UpdateDepartFlexible,type:"checkbox",checked:this.state.updatedUserDetails.departFlexible,value:this.state.updatedUserDetails.departFlexible}),r.a.createElement("span",{className:"checkbox-custom rectangular"}),r.a.createElement("span",{className:"commuteLabel checkLabel flexible"},"is your departure time flexible?"))),this.state.updatedUserDetails.departFlexible?r.a.createElement("div",{className:"commuteInput"},r.a.createElement("label",{className:"commuteLabel"},"How flexible is your departure time (in minutes)?"),r.a.createElement("div",{className:"commuteInput"},r.a.createElement("select",{defaultValue:this.state.flexibleDepartureTime,onChange:this.updateFlexibleDepartureTime,className:"flexibleTime depart"},this.state.flexibleTimes.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))):""),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.modifyBack},"BACK"),r.a.createElement("button",{disabled:!(this.state.homeAddressValid&&this.state.workAddressValid),className:"button confirm primary validation",onClick:this.modifyNext},"NEXT"))))}}]),a}(n.Component);var Kb=Object(o.b)(function(e){return{commuteProfile:e.commuteProfile.commute,matchedVanpools:e.changeMyCommute.matchedVanpools,matchedVanpoolsError:e.changeMyCommute.matchedVanpoolsError,updatedUserDetails:e.changeMyCommute.updatedUserDetails,flexibleDetails:e.changeMyCommute.flexibleDetails,isInVanpool:e.changeMyCommute.isInVanpool}},function(e){return{reviewModifyBack:function(){e({type:tn,data:1})},updateUserDetails:function(t){e({type:an,data:t})},updateFlexibleTime:function(t){e({type:nn,data:t})},matchSelectionPage:function(){e({type:Qa})},saveProximitySearch:function(t){e({type:cn,data:t})}}})(zb),Jb=function(e){return r.a.createElement("li",{className:"matchedli"},r.a.createElement("label",{className:"radio-label"},r.a.createElement("input",{className:"vanpoolRadio",onClick:e.handleRadioChildElement,type:"radio",checked:1==e.selectedOption,value:e.value}),r.a.createElement("span",{className:"radio-custom rectangular"}),r.a.createElement("span",{className:"commuteLabel radioLabel"}," \xa0 ",e.duration+" minute travel time")))},Qb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).handleRadioChildElement=function(e){var t=n.state.radiosData;t.forEach(function(t){t.value===e.target.value?t.selectedOption=!0:t.selectedOption=!1}),n.setState({radiosData:t}),n.props.setRouteSelected(n.state.radiosData),n.props.saveMatchedRoutesWithSelcted(n.state.radiosData)},n.state={vanpoolMatches:n.props.vanpoolMatches,matchCount:n.props.matchCount,vanpoolMatch:n.props.vanpoolMatches.vanpoolMatch,selectedRoute:n.props.selectedRoute,radiosData:[],commuteProfile:n.props.commuteProfile,asciiCode:65},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];if(this.props.vanpoolMatches){var a=this.props.vanpoolMatches.vanpoolMatch;a.map(function(t,a){t.calculatedDuration=e.calculateDuration(t.workBoundOriginStop.timestamp,t.workBoundDestinationStop.timestamp)}),a.sort(function(e,t){return e.matchWeight<t.matchWeight?1:-1}).sort(function(e,t){if(e.matchWeight==t.matchWeight)return e.calculatedDuration-t.calculatedDuration}).map(function(a,n){var r={matchWeight:a.matchWeight,workBoundOriginStop:a.workBoundOriginStop,matchedOriginStopId:a.matchedOriginStopId,workBoundDestinationStop:a.workBoundDestinationStop,matchedDestinationStopId:a.matchedDestinationStopId,value:a.vanpoolId,selectedOption:!1,duration:"Route "+String.fromCharCode(e.state.asciiCode+n)+" - "+a.calculatedDuration};t.push(r)}),null!==this.state.selectedRoute?t.map(function(a,n){a.value==e.state.selectedRoute.value&&(t[n].selectedOption=e.state.selectedRoute.selectedOption)}):t[0].selectedOption=!0,this.setState({radiosData:t}),this.props.setRouteSelected(t),this.props.saveMatchedRoutesWithSelcted(t)}}},{key:"calculateDuration",value:function(e,t){var a=this.parseTime(e);return(this.parseTime(t)-a)/6e4}},{key:"parseTime",value:function(e){if(""==e)return null;var t=new Date,a=e.match(/(\d+)(:(\d\d))?\s*(p?)/);return t.setHours(parseInt(a[1])+(parseInt(a[1])<12&&a[4]?12:0)),t.setMinutes(parseInt(a[3])||0),t.setSeconds(0,0),t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"vanpoolList"},r.a.createElement("p",null,"Pick the route you like best"),r.a.createElement("div",{className:"matchedList"},r.a.createElement("ul",{className:"matchedUl"},this.state.radiosData.map(function(t,a){return r.a.createElement(Jb,Object.assign({key:a,handleRadioChildElement:e.handleRadioChildElement},t))}))))}}]),a}(n.Component);var Xb=Object(o.b)(function(e){return{commuteProfile:e.commuteProfile.commute}},function(e){return{setRouteSelected:function(t){e({type:mn,data:t})},saveMatchedRoutesWithSelcted:function(t){e({type:pn,data:t})}}})(Qb),$b={zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1},Zb=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={ready:!1},n}return Object(ap.a)(a,[{key:"onLoad",value:function(){var e=this;!this.state.ready&&this.map&&(this.setState({ready:!0}),this.props.padding&&setTimeout(function(){return e.map&&e.map.fitBounds(e.map.getBounds(),e.props.padding)},200))}},{key:"shouldComponentUpdate",value:function(e){return!this.state.ready||(!this.props.directions||(this.props.directions.geocoded_waypoints.length!==e.directions.geocoded_waypoints.length||this.props.directions.geocoded_waypoints.some(function(t,a){return e.directions.geocoded_waypoints[a].place_id!==t.place_id})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.directions,n=t.controls,c=void 0===n||n,s=this.state.ready;return r.a.createElement("div",{className:"google-map ".concat(s?"ready":"")},r.a.createElement(Vo.MapWithDirections,{directions:a,options:c?null:$b,mapRef:function(t){return e.map=t},onTilesLoaded:function(){return e.onLoad()}}))}}]),a}(n.Component);var eE=Object(o.b)(function(e){return{directions:e.map.googleDirections}})(Zb),tE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).goBack=function(){n.props.resultsSuccessBack()},n.vanpoolListsNext=function(){n.props.vanpoolListNext()},n.state={vanpoolMatches:n.props.matchedVanpools,matchCount:n.props.matchCount,selectedRoute:n.props.selectedRoute},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"reasonsHeading"},"Great news! We've found ",this.state.matchCount," matching Commutes."),r.a.createElement("div",{className:"vanpoolResults"},r.a.createElement(Xb,{selectedRoute:this.state.selectedRoute,vanpoolMatches:this.state.vanpoolMatches,matchCount:this.state.matchCount}),r.a.createElement(eE,null)),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.goBack},"Back"),r.a.createElement("button",{className:"button confirm primary validation",onClick:this.vanpoolListsNext},"Next"))))}}]),a}(n.Component);var aE=Object(o.b)(function(e){return{matchedVanpools:e.changeMyCommute.matchedVanpools,matchCount:e.changeMyCommute.matchCount,selectedRoute:e.changeMyCommute.selectedRoute}},function(e){return{init:function(){e({type:xt})},resultsSuccessBack:function(){e({type:tn,data:3})},setMapDirections:function(t){e({type:Fe,data:t})},vanpoolListNext:function(){e({type:Za})}}})(tE),nE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).goBack=function(){n.props.resultsFailedBack()},n.stayInTouch=function(){n.props.stayInTouch()},n.state={},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{className:"reasonsHeading"},"We were unable to find matching Commutes."),r.a.createElement("div",{className:"vanpoolMatchedNotfound"},r.a.createElement("p",null," Don't worry, new routes are being added every day! We'll contact you when a match becomes available.")),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.goBack},"BACK"),r.a.createElement("button",{className:"button confirm primary validation",onClick:this.stayInTouch},"STAY IN TOUCH"))))}}]),a}(n.Component);var rE=Object(o.b)(function(e){return{state:e}},function(e){return{resultsFailedBack:function(){e({type:tn,data:3})},stayInTouch:function(){e({type:en})}}})(nE),cE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).updateUserInfo=function(e){var t=e.target.value;n.setState({userInfo:Object(On.a)(Object(On.a)({},n.state.userInfo),{},Object(er.a)({},e.target.name,t))})},n.UpdateProgAnnouncement=function(e){var t=e.target.checked;n.setState({ProgAnnouncement:t})},n.goBack=function(){n.props.cummuteConfirmBack()},n.getEmployerNameAndId=function(){var e,t;return n.props.changeCommuteDetails.matches.map(function(a){a.isChecked&&("Other:"==a.value?(e=n.props.changeCommuteDetails.matchesOtherValue,t=null):(e=a.value,t=a.id))}),{employerName:e,employerId:t}},n.getReason=function(){var e;return n.state.changeCommuteDetails.reasons.map(function(t){t.isChecked&&(e="Other:"==t.value?n.props.changeCommuteDetails.otherValue:t.value)}),e},n.getCommuteDetails=function(){var e=n.state.changeCommuteDetails.updatedUserDetails;return e.flexibleArrivalTime=n.props.changeCommuteDetails.flexibleDetails.flexibleArrivalTime,e.flexibleDepartureTime=n.props.changeCommuteDetails.flexibleDetails.flexibleDepartureTime,e},n.getAddressUtility=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo.getAddressAndLocation(t);case 2:return a=e.sent,n=xb.fromGeocode(a),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getPhoneDetails=function(){var e=n.state.userInfo.phoneArray;return e.number=n.state.userInfo.phone,e},n.getCommuteDays=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.map(function(e){return t.indexOf(e)+1})},n.getMatchedVanpools=function(){var e=n.state.changeCommuteDetails.matchedSelectedRoutes,t=[];return e.map(function(e){var a={vanpoolId:e.value,interested:e.selectedOption};t.push(a)}),t},n.getArriveflexibleTime=function(){return n.state.changeCommuteDetails.updatedUserDetails.arriveFlexible?parseInt(n.props.changeCommuteDetails.flexibleDetails.flexibleArrivalTime):0},n.getDepartflexibleTime=function(){return n.state.changeCommuteDetails.updatedUserDetails.departFlexible?parseInt(n.props.changeCommuteDetails.flexibleDetails.flexibleDepartureTime):0},n.saveCommuteConfirm=Object(sc.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getCommuteDetails(),e.t0=n.state.userInfo.firstName,e.t1=n.state.userInfo.lastName,e.t2=n.state.userInfo.emailAddress,e.t3=n.getReason(),e.t4=n.state.userInfo.employerId?n.state.userInfo.employerId:null,e.t5=null==n.state.userInfo.employerId?n.state.userInfo.employerName:null,e.next=9,n.getAddressUtility(t.homeAddress);case 9:return e.t6=e.sent,e.next=12,n.getAddressUtility(t.workAddress);case 12:e.t7=e.sent,e.t8=n.getPhoneDetails(),e.t9=t.arriveAtWork,e.t10=t.departFromWork,e.t11=t.arriveFlexible,e.t12=t.departFlexible,e.t13=n.getCommuteDays(t.activeDays),e.t14=n.getArriveflexibleTime(),e.t15=n.getDepartflexibleTime(),e.t16=n.getMatchedVanpools(),a={firstName:e.t0,lastName:e.t1,emailAddress:e.t2,reasonForChange:e.t3,employerId:e.t4,employerName:e.t5,homeAddress:e.t6,workAddress:e.t7,phone:e.t8,workArrivalTime:e.t9,workDepartureTime:e.t10,isWorkArriveTimeFlexible:e.t11,isWorkDepartTimeFlexible:e.t12,commuteDays:e.t13,arriveFlexTimeInMinutes:e.t14,departureFlexTimeInMinutes:e.t15,vanpoolMatch:e.t16},n.props.saveCommuteConfirm(a);case 24:case"end":return e.stop()}},e)})),n.state={ProgAnnouncement:!1,userProfile:e.profile?e.profile:[],authProfile:e.authorization?e.authorization:[],userInfo:{},changeCommuteDetails:e.changeCommuteDetails,commuteProfile:e.commuteProfile},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){if(this.props.profile&&this.props.authorization&&this.props.commuteProfile){var e=this.getEmployerNameAndId(),t={firstName:this.props.authorization.firstName,lastName:this.props.authorization.lastName,phone:this.props.profile.phone?this.props.profile.phone.number:"",emailAddress:this.props.profile.email,employerName:e.employerName,employerId:e.employerId,phoneArray:this.props.profile.phone?this.props.profile.phone:[]};this.setState({userInfo:t})}}},{key:"render",value:function(){var e=this.state.userInfo,t=e.firstName,a=e.lastName,n=e.emailAddress,c=e.phone,s=e.employerName;return r.a.createElement("div",null,r.a.createElement("p",{className:"reasonsHeading"},"Let's Ride Together"),r.a.createElement("div",{className:"confirmcommute"},r.a.createElement("p",null," We'll contact you by the next business day to get your commute setup! Who should we call?"),r.a.createElement("div",{className:"userDetailsForm"},r.a.createElement("div",{className:"userName"},r.a.createElement("div",{className:"firstname"},r.a.createElement("label",{className:"commuteLabel"},"First Name"),r.a.createElement("input",{type:"text",className:"FirstName",value:t,name:"firstName",onChange:this.updateUserInfo})),r.a.createElement("div",{className:"secondname"},r.a.createElement("label",{className:"commuteLabel"},"Last Name"),r.a.createElement("input",{type:"text",className:"SecondName",value:a,name:"lastName",onChange:this.updateUserInfo}))),r.a.createElement("div",{className:"otherInputs email"},r.a.createElement("label",{className:"commuteLabel"},"Email"),r.a.createElement("input",{type:"email",className:"Email",value:n,name:"emailAddress",onChange:this.updateUserInfo})),r.a.createElement("div",{className:"otherInputs phoneNumber"},r.a.createElement("label",{className:"commuteLabel"},"Phone Number"),r.a.createElement("input",{type:"text",className:"pNumber",value:c,name:"phone",onChange:this.updateUserInfo})),r.a.createElement("div",{className:"otherInputs phoneNumber"},r.a.createElement("label",{className:"commuteLabel"},"Employer"),r.a.createElement("input",{type:"text",className:"employer",value:s,name:"employerName",onChange:this.updateUserInfo})))),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.goBack},"BACK"),r.a.createElement("button",{className:"button confirm primary validation",onClick:this.saveCommuteConfirm},"SUBMIT"))))}}]),a}(n.Component);var sE=Object(o.b)(function(e){return{profile:e.profile,authorization:e.userAuth,changeCommuteDetails:e.changeMyCommute,commuteProfile:e.commuteProfile}},function(e){return{cummuteConfirmBack:function(){e({type:tn,data:4.1})},saveCommuteConfirm:function(t){e({type:ln,data:t})}}})(cE),oE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).updateUserInfo=function(e){var t=e.target.value;n.setState({userInfo:Object(On.a)(Object(On.a)({},n.state.userInfo),{},Object(er.a)({},e.target.name,t))})},n.UpdateProgAnnouncement=function(e){var t=e.target.checked;n.setState({ProgAnnouncement:t})},n.goBack=function(){n.props.stayInTouchBack()},n.getEmployerNameAndId=function(){var e,t;return n.props.changeCommuteDetails.matches.map(function(a){a.isChecked&&("Other:"==a.value?(e=n.props.changeCommuteDetails.matchesOtherValue,t=null):(e=a.value,t=a.id))}),{employerName:e,employerId:t}},n.getReason=function(){var e;return n.state.changeCommuteDetails.reasons.map(function(t){t.isChecked&&(e="Other:"==t.value?n.props.changeCommuteDetails.otherValue:t.value)}),e},n.getCommuteDetails=function(){var e=n.state.changeCommuteDetails.updatedUserDetails;return e.flexibleArrivalTime=n.props.changeCommuteDetails.flexibleDetails.flexibleArrivalTime,e.flexibleDepartureTime=n.props.changeCommuteDetails.flexibleDetails.flexibleDepartureTime,e},n.getAddressUtility=function(){var e=Object(sc.a)(l.a.mark(function e(t){var a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo.getAddressAndLocation(t);case 2:return a=e.sent,n=xb.fromGeocode(a),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getPhoneDetails=function(){var e=n.state.userInfo.phoneArray;return e.number=n.state.userInfo.phone,e},n.getCommuteDays=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.map(function(e){return t.indexOf(e)+1})},n.getArriveflexibleTime=function(){return n.state.changeCommuteDetails.updatedUserDetails.arriveFlexible?parseInt(n.props.changeCommuteDetails.flexibleDetails.flexibleArrivalTime):0},n.getDepartflexibleTime=function(){return n.state.changeCommuteDetails.updatedUserDetails.departFlexible?parseInt(n.props.changeCommuteDetails.flexibleDetails.flexibleDepartureTime):0},n.stayInTouchConfirm=Object(sc.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getCommuteDetails(),e.t0=n.state.userInfo.firstName,e.t1=n.state.userInfo.lastName,e.t2=n.state.userInfo.emailAddress,e.t3=n.getReason(),e.t4=n.state.userInfo.employerId?n.state.userInfo.employerId:null,e.t5=null==n.state.userInfo.employerId?n.state.userInfo.employerName:null,e.next=9,n.getAddressUtility(t.homeAddress);case 9:return e.t6=e.sent,e.next=12,n.getAddressUtility(t.workAddress);case 12:e.t7=e.sent,e.t8=n.getPhoneDetails(),e.t9=t.arriveAtWork,e.t10=t.departFromWork,e.t11=t.arriveFlexible,e.t12=t.departFlexible,e.t13=n.getCommuteDays(t.activeDays),e.t14=n.getArriveflexibleTime(),e.t15=n.getDepartflexibleTime(),e.t16=[],a={firstName:e.t0,lastName:e.t1,emailAddress:e.t2,reasonForChange:e.t3,employerId:e.t4,employerName:e.t5,homeAddress:e.t6,workAddress:e.t7,phone:e.t8,workArrivalTime:e.t9,workDepartureTime:e.t10,isWorkArriveTimeFlexible:e.t11,isWorkDepartTimeFlexible:e.t12,commuteDays:e.t13,arriveFlexTimeInMinutes:e.t14,departureFlexTimeInMinutes:e.t15,vanpoolMatch:e.t16},n.props.stayInTouchConfirm(a);case 24:case"end":return e.stop()}},e)})),n.state={ProgAnnouncement:!1,userProfile:e.profile?e.profile:[],authProfile:e.authorization?e.authorization:[],userInfo:{},changeCommuteDetails:e.changeCommuteDetails,commuteProfile:e.commuteProfile},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){if(this.props.profile&&this.props.authorization){var e=this.getEmployerNameAndId(),t={firstName:this.props.authorization.firstName,lastName:this.props.authorization.lastName,phone:this.props.profile.phone?this.props.profile.phone.number:"",emailAddress:this.props.profile.email,employerName:e.employerName,employerId:e.employerId,phoneArray:this.props.profile.phone?this.props.profile.phone:[]};this.setState({userInfo:t})}}},{key:"render",value:function(){var e=this.state.userInfo,t=e.firstName,a=e.lastName,n=e.emailAddress,c=e.phone,s=e.employerName;return r.a.createElement("div",null,r.a.createElement("p",{className:"reasonsHeading"},"Let's Stay in Touch"),r.a.createElement("div",{className:"stayInTouch"},r.a.createElement("p",null," We'll contact you when a match becomes available. How do we reach you?"),r.a.createElement("div",{className:"userDetailsForm"},r.a.createElement("div",{className:"otherInputs firstname"},r.a.createElement("label",{className:"commuteLabel"},"First Name"),r.a.createElement("div",{className:"otherInput"},r.a.createElement("input",{type:"text",className:"FirstName",value:t,name:"firstName",onChange:this.updateUserInfo}))),r.a.createElement("div",{className:"otherInputs secondname"},r.a.createElement("label",{className:"commuteLabel"},"Last Name"),r.a.createElement("div",{className:"otherInput"},r.a.createElement("input",{type:"text",className:"SecondName",value:a,name:"lastName",onChange:this.updateUserInfo}))),r.a.createElement("div",{className:"otherInputs email"},r.a.createElement("label",{className:"commuteLabel"},"Email"),r.a.createElement("div",{className:"otherInput"},r.a.createElement("input",{type:"email",className:"Email",value:n,name:"emailAddress",onChange:this.updateUserInfo}))),r.a.createElement("div",{className:"otherInputs phoneNumber"},r.a.createElement("label",{className:"commuteLabel"},"Phone Number"),r.a.createElement("div",{className:"otherInput"},r.a.createElement("input",{type:"text",className:"pNumber",value:c,name:"phone",onChange:this.updateUserInfo}))),r.a.createElement("div",{className:"otherInputs phoneNumber"},r.a.createElement("label",{className:"commuteLabel"},"Employer"),r.a.createElement("div",{className:"otherInput"},r.a.createElement("input",{type:"text",className:"employer",value:s,name:"employerName",onChange:this.updateUserInfo}))))),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.goBack},"BACK"),r.a.createElement("button",{className:"button confirm primary validation",onClick:this.stayInTouchConfirm},"SUBMIT"))))}}]),a}(n.Component);var iE=Object(o.b)(function(e){return{profile:e.profile,authorization:e.userAuth,changeCommuteDetails:e.changeMyCommute}},function(e){return{stayInTouchBack:function(){e({type:tn,data:4.2})},stayInTouchConfirm:function(t){e({type:un,data:t})}}})(oE),lE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).selectCheckChildElement=function(e){e.stopPropagation();var t=n.state.matches;t.forEach(function(t){t.value===e.target.value?t.isChecked=e.target.checked:t.isChecked=!1}),n.setState({matches:t}),n.checkDisable()},n.checkDisable=function(){var e=[];n.state.matches.map(function(t){t.isChecked&&e.push(t)}),e.length>0?e.map(function(e){"Other:"==e.value?n.state.matchesOtherValue?n.setState({selected:!0}):n.setState({selected:!1}):n.setState({selected:!0})}):n.setState({selected:!1})},n.changeOther=function(e){n.setState({matchesOtherValue:e.target.value},function(){n.checkDisable()})},n.matchSelectionNext=Object(sc.a)(l.a.mark(function e(){var t,a,r,c,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loader:!0}),n.props.saveMatches(n.state.matches,n.state.matchesOtherValue),e.next=4,Vo.getAddressAndLocation(n.state.updatedUserDetails.homeAddress);case 4:return t=e.sent,e.next=7,Vo.getAddressAndLocation(n.state.updatedUserDetails.workAddress);case 7:return a=e.sent,r={homeLongitude:t.longitude,homeLatitude:t.latitude,workLongitude:a.longitude,workLatitude:a.latitude,arriveTime:n.state.updatedUserDetails.arriveAtWork,departTime:n.state.updatedUserDetails.departFromWork},c="".concat(nr.apiBaseUrl,"/vanpools/search/count"),e.prev=10,e.next=13,Pc.post(c,r);case 13:s=e.sent,n.setState({loader:!1}),n.props.setMatchedVanpools(s),s.matches&&s.vanpoolMatch?n.props.reviewModifyNextSuccess():n.props.reviewModifyNextFailed(),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(10),n.setState({loader:!1}),Rc.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[10,19]])})),n.goBack=function(){n.props.matchesBack()},n.state={matches:n.props.matches,matchesOtherValue:n.props.matchesOtherValue?n.props.matchesOtherValue:void 0,selected:!1,updatedUserDetails:n.props.updatedUserDetails,loader:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.checkDisable()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(mp,{isLoading:this.state.loader}),r.a.createElement("p",{className:"reasonsHeading"},"Where Do You Work?"),r.a.createElement("div",{className:"reasons"},r.a.createElement("p",null,"Please select or enter your employer so we can properly match your route. "),r.a.createElement("div",{className:"resonsCheckContainer"},r.a.createElement("ul",null,this.state.matches.map(function(t,a){return r.a.createElement(Ib,Object.assign({key:a,handleCheckChildElement:e.selectCheckChildElement},t,{otherValue:e.state.matchesOtherValue,changeOther:e.changeOther}))})))),r.a.createElement("div",{className:"commuteFooter"},r.a.createElement("div",{className:"commuteTools"},r.a.createElement("button",{className:"button cancel",onClick:this.goBack},"BACK"),r.a.createElement("button",{className:"button confirm primary validation",disabled:!this.state.selected,onClick:this.matchSelectionNext},"NEXT"))))}}]),a}(n.Component);var uE=Object(o.b)(function(e){return{matches:e.changeMyCommute.matches,matchesOtherValue:e.changeMyCommute.matchesOtherValue,updatedUserDetails:e.changeMyCommute.updatedUserDetails}},function(e){return{saveMatches:function(t,a){e({type:vn,data:{matches:t,matchesOtherValue:a}})},matchesBack:function(){e({type:tn,data:2})},reviewModifyNextSuccess:function(){e({type:Xa})},reviewModifyNextFailed:function(){e({type:$a})},setMatchedVanpools:function(t){e({type:sn,data:t})}}})(lE),mE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={show:!1},n.hide=function(){n.setState({show:!1}),window.removeEventListener("click",n.hide)},n}return Object(ap.a)(a,[{key:"componentWillUnmount",value:function(){clearTimeout(this.willHide),window.removeEventListener("click",this.hide)}},{key:"open",value:function(e){var t=this;if(this.state.show)return e.preventDefault(),void e.stopPropagation();this.setState({show:!0}),this.willHide=setTimeout(function(){return window.addEventListener("click",t.hide)},50)}},{key:"close",value:function(e){e.stopPropagation(),e.preventDefault(),this.hide()}},{key:"closeModal",value:function(){this.props.closeCommute()}},{key:"render",value:function(){var e=this;return this.state.show||this.props.isOpen?r.a.createElement("div",null,this.props.isOpen?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return e.open(t)},className:"find-ride"},this.props.profile.isInVanpool?"CHANGE MY COMMUTE":"FIND A RIDE"),r.a.createElement(Pb,{active:this.props.isOpen,close:function(){return e.closeModal()}},1==this.props.page?r.a.createElement(Rb,{page:"1 of 5"}):2==this.props.page?r.a.createElement(Kb,{page:"2 of 5"}):3==this.props.page?r.a.createElement(uE,{page:"3 of 5"}):4.1==this.props.page?r.a.createElement(aE,{page:"4 of 5"}):4.2==this.props.page?r.a.createElement(rE,{page:"4 of 5"}):5.1==this.props.page?r.a.createElement(sE,{page:"5 of 5"}):5.2==this.props.page?r.a.createElement(iE,{page:"5 of 5"}):null)):r.a.createElement("div",{className:"find-ride",onClick:function(t){return e.open(t)}},this.props.profile.isInVanpool?"CHANGE MY COMMUTE":"FIND A RIDE",r.a.createElement("div",{className:"toggle-tip"},r.a.createElement("span",{className:"close",onClick:function(t){return e.close(t)}},r.a.createElement(gf,null)),r.a.createElement(Tb,{hideTip:this.hide})))):r.a.createElement("button",{onClick:function(t){return e.open(t)},className:"find-ride"},this.props.profile.isInVanpool?"CHANGE MY COMMUTE":"FIND A RIDE")}}]),a}(n.Component);var dE=Ts([Rs])(Object(o.b)(function(e){return{isOpen:e.changeMyCommute.showCommuteModal,page:e.changeMyCommute.page,isInVanpool:e.changeMyCommute.isInVanpool,profile:e.userAuth}},function(e){return{closeCommute:function(){e({type:Ka})}}})(mE)),pE=["NTD","SBY"];function vE(e){var t=e.summary,a=e.description,n=e.createdDate,c=e.alertTypeCode,s=e.isRead,o=e.deleteAlert;return r.a.createElement("div",{className:"".concat(s?"":"new"," alert")},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"summary"},t),r.a.createElement("div",{className:"description",dangerouslySetInnerHTML:function(e){return{__html:e}}(a)})),r.a.createElement("div",{className:"age"},pE.includes(c)?r.a.createElement(yf,null):vc.ageInDays(n)),pE.includes(c)?null:r.a.createElement("div",{className:"delete",onClick:o},r.a.createElement(gf,null)))}var hE=function(e){return"NTD"===e.alertTypeCode?r.a.createElement(tp.b,{to:"/trip-recording"},r.a.createElement(vE,e)):"SBY"===e.alertTypeCode?r.a.createElement(tp.b,{to:"/roster"},r.a.createElement(vE,e)):r.a.createElement(vE,e)},fE=["NTD","SBY"],bE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={show:!1},n.hide=function(){n.setState({show:!1}),n.props.markAllRead(),window.removeEventListener("click",n.hide),window.removeEventListener("hashchange",n.hide)},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.willHide),window.removeEventListener("click",this.hide),window.removeEventListener("hashchange",this.hide)}},{key:"show",value:function(e){var t=this;this.state.show?e.stopPropagation():(this.setState({show:!0}),this.willHide=setTimeout(function(){window.addEventListener("click",t.hide),window.addEventListener("hashchange",t.hide)},50),this.props.readAll(this.props.alerts.filter(function(e){return!e.isRead&&!fE.includes(e.alertTypeCode)})))}},{key:"close",value:function(e){e.stopPropagation(),e.preventDefault(),this.hide()}},{key:"render",value:function(){var e=this,t=this.props.alerts,a=t.filter(function(e){return!e.isRead}),n=r.a.createElement("span",{className:a.length?"num":"num none"},a.length);return r.a.createElement("div",{className:"alerts-container",onClick:function(t){return e.show(t)}},r.a.createElement("div",{className:"bell"},a.length?r.a.createElement("div",{className:"notice"}):null,r.a.createElement(Qf,null)),r.a.createElement("div",{className:"mobile-only"},"Alerts (",n,")"),this.state.show&&t.length?r.a.createElement("div",{className:"alerts toggle-tip"},r.a.createElement("span",{className:"close",onClick:function(t){return e.close(t)}},r.a.createElement(gf,null)),r.a.createElement("div",{className:"count"},"You have ",n," new alerts"),r.a.createElement("div",{className:"alert-body"},t.map(function(t){return r.a.createElement(hE,Object.assign({key:t.alertId},t,{deleteAlert:function(){return e.props.deleteAlert(t)}}))}),r.a.createElement("div",{className:"note"},"All alerts will automatically be removed after 30 days."))):null,this.state.show&&!t.length?r.a.createElement(EE,null):null)}}]),a}(n.Component);function EE(){return r.a.createElement("div",{className:"up-to-date alerts toggle-tip"},r.a.createElement("div",{className:"big"},"You are up to date!"),r.a.createElement("div",{className:"small"},"There are no new alerts at this time."))}var gE=Object(o.b)(function(e){return{alerts:e.alerts}},function(e){return{init:function(){e({type:Xt})},markAllRead:function(){e({type:Zt})},readAll:function(t){t.length&&e({type:ea,data:t})},deleteAlert:function(t){e({type:ta,data:t})}}})(bE);function yE(e){var t=e.hideNavigation;return r.a.createElement("div",{className:"stationary"},t?null:r.a.createElement(dE,null),r.a.createElement("a",{className:"help-link",href:nr.helpUrl,target:"_blank",rel:"noopener noreferrer"},"Help"),t?null:r.a.createElement(gE,null))}function OE(e){return e.split("").reduce(function(e,t){return t.charCodeAt()+e},0)}function NE(e){var t=e.children,a=void 0===t?"":t;return r.a.createElement("div",{key:OE(a),className:"generated-user-image"},a.split(" ").map(function(e){return e[0]}).join(""))}function kE(e){var t=e.dropDownOpen,a=e.onClick,n=e.firstName,c=e.lastName,s=e.override,o=t?"active":"",i=n||c?"".concat(n," ").concat(c):"N/A";return r.a.createElement("div",null,r.a.createElement("button",{className:"profile-image desktop-only ".concat(o),id:"profile-icon",onClick:a},r.a.createElement(NE,null,"".concat(i))),r.a.createElement(tp.b,{className:"upper-nav profile-link mobile-only",replace:"#/profile"===window.location.hash,to:"/profile"},r.a.createElement("button",{className:"profile-image ".concat(o),id:"profile-icon",onClick:a},r.a.createElement(NE,null,"".concat(i)),r.a.createElement("span",null,"".concat(i)))),r.a.createElement("div",{className:"profile-name ".concat(o)},"".concat(i)),r.a.createElement("div",{className:"profile-dropdown ".concat(o),style:{height:s?"85px":"115px"}}))}var jE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"callClearAuthentication",value:function(e){e.preventDefault(),e.nativeEvent.stopImmediatePropagation(),hp.logout()}},{key:"render",value:function(){var e=this.props,t=e.classForProfile,a=e.override;return r.a.createElement("ul",{className:"top-nav ".concat(t),id:"profile-popup"},a?null:r.a.createElement("li",null,r.a.createElement(dE,null)),r.a.createElement("li",null,r.a.createElement("button",{className:"upper-nav help-link",href:nr.helpUrl,target:"_blank",rel:"noopener noreferrer"},"Help")),a?null:r.a.createElement("li",null,r.a.createElement(tp.b,{className:"upper-nav profile-link desktop-only",replace:"#/profile"===window.location.hash,to:"/profile"},"My Profile")),a?null:r.a.createElement("li",null,r.a.createElement(gE,null)),r.a.createElement("li",null,r.a.createElement("button",{className:"upper-nav sign-out",id:"sign-out-button",onClick:this.callClearAuthentication.bind(this)},"Log\xa0Out ",r.a.createElement(Kf,null))))}}]),a}(r.a.Component);function CE(e){var t=e.onClick;return r.a.createElement("div",null,r.a.createElement("div",{className:"menu-button",role:"button",onClick:function(){t(!0)}},r.a.createElement(Wf,null)),r.a.createElement("div",{className:"close-button",role:"button",onClick:function(){t(!1)}},r.a.createElement(gf,null)))}var xE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={currentAggregate:null,showDropdown:!1,dropdownItems:[]},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){!this.state.currentAggregate&&e.aggregates[0]&&this.setState({currentAggregate:e.aggregates[0],dropdownItems:e.aggregates})}},{key:"componentDidMount",value:function(){var e=this;this.close=function(){return e.toggleBackdrop(!1)},window.addEventListener("click",this.close),this.props.init()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.close)}},{key:"view",value:function(e){if(null!==e)return this.setState({dropdownItems:e.children});var t=this.props.aggregates,a=this.state.dropdownItems;return a[0].parent&&a[0].parent.parent?this.setState({dropdownItems:a[0].parent.parent.children}):this.setState({dropdownItems:t})}},{key:"select",value:function(e){var t=this;Object(_i.isEqual)(this.state.currentAggregate,e)?this.toggleBackdrop(!1):(this.toggleBackdrop(!1),this.setState({currentAggregate:e}),this.view(e.parent||null),setTimeout(function(){return t.props.setCurrentAggregate(e)}),window.location.hash.startsWith("#/stats")||this.props.history.push("stats"))}},{key:"toggleBackdrop",value:function(e){e?this.props.showBackdrop():this.props.hideBackdrop(),this.setState({showDropdown:e})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.currentAggregate,c=a.showDropdown,s=a.dropdownItems;return n?(e=n.isVanpool?r.a.createElement("span",null,r.a.createElement("span",null,n.id),r.a.createElement("span",{className:"aggregate-emphasis"}," ",n.name?"(".concat(n.name,")"):null)):r.a.createElement("span",null,n.name),r.a.createElement("div",{className:"aggregate-nav-container",onClick:function(e){return n&&e.stopPropagation()}},r.a.createElement("button",{className:"current-aggregate ".concat(c?"show":""),onClick:function(){return c?t.select(n):t.toggleBackdrop(!0)}},e,n.isTransit?r.a.createElement("span",{className:"aggregate-emphasis"}," (Transit)"):null,r.a.createElement(pf,{className:""})),c?r.a.createElement(SE,{selected:n,list:s,view:function(e){return t.view(e)},select:function(e){return t.select(e)}}):null)):r.a.createElement("div",{className:"aggregate-nav-container"})}}]),a}(n.Component);function SE(e){var t=e.selected,a=e.list,n=e.view,c=e.select,s=a[0].parent;return r.a.createElement("div",{className:"selector aggregates"},s?r.a.createElement("button",{className:"title",onClick:function(){return n(null)},ref:function(e){return e&&e.focus()}},r.a.createElement("span",null,r.a.createElement(Lf,null),"Back")):null,r.a.createElement("div",{className:"aggregate-children ".concat(s&&s.children?"pad-left":"")},a.map(function(e){return e.children&&e.children.length>0?r.a.createElement(DE,Object.assign({key:e.id,selected:t===e,isTransit:e.isTransit},e,{onDrillDown:function(){return n(e)},onSelect:function(){return c(e)}})):r.a.createElement(AE,Object.assign({key:e.id,selected:t===e},e,{onSelect:function(){return c(e)}}))})))}function DE(e){var t=e.name,a=e.selected,n=e.onSelect,c=e.onDrillDown,s=e.isTransit,o=function(e){return e.stopPropagation()||e.preventDefault()||c()};return r.a.createElement("div",{className:"drilldown ".concat(a?"selected":"")},r.a.createElement("button",{className:"drilldown-name",onClick:n},t,s?r.a.createElement("span",{className:"aggregate-emphasis"}," (Transit)"):null),r.a.createElement("button",{tabIndex:0,className:"down",onClick:o,onKeyPress:function(e){return"Enter"===e.key&&o(e)}},r.a.createElement(_f,null)))}function AE(e){var t=e.name,a=e.id,n=e.selected,c=e.onSelect;return r.a.createElement("button",{className:"vanpool ".concat(n?"selected":""),onClick:c},r.a.createElement("span",{className:"id"},a),r.a.createElement("span",{className:"name"},t?"(".concat(t,")"):""))}var wE=Object(cp.h)(Object(o.b)(function(e){return{aggregates:e.vanpoolAggregates.tree}},function(e,t){return{init:function(){e({type:Ke})},setCurrentAggregate:function(t){e({type:Oa,data:t})},showBackdrop:function(){e({type:Ta})},hideBackdrop:function(){e({type:Pa})}}})(xE));function TE(e){var t=e.permission,a=e.children;return t?a:null}var PE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={isOpen:!1,dropDownOpen:!1,changingRoute:!1},n.clickOutside=n.clickOutside.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.clickOutside,!1)}},{key:"clickOutside",value:function(e){var t=document.getElementById("profile-popup"),a=document.getElementById("profile-icon");t.contains(e.target)||a.contains(e.target)||!this.state.dropDownOpen||(this.setState({isOpen:!1,dropDownOpen:!1}),this.props.onActive(!1))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.clickOutside)}},{key:"componentWillReceiveProps",value:function(e){this.state.route!==e.navigation.location.pathname&&(this.setState({isOpen:!1,dropDownOpen:!1,route:e.navigation.location.pathname}),this.props.onActive(!1))}},{key:"buttonClicked",value:function(e){this.setState({isOpen:e}),this.props.onActive(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.hideNavigation,n=t.profile,c=this.state.isOpen?"active":"",s=this.state.dropDownOpen?"active":"",o=Ds([Bs])&&!Ds([Fs]),i=Ds([qs])&&n.vanpoolId,l=Ds([Gs]);return n?r.a.createElement("nav",{className:c},r.a.createElement(CE,{onClick:function(t){e.buttonClicked(t)}}),r.a.createElement("div",{className:"top-bar"},r.a.createElement(Nb,null),r.a.createElement(Ps,{roles:[Gs],required:!1},r.a.createElement("div",{className:"aggregate-nav desktop-only"},r.a.createElement(wE,null))),r.a.createElement(Is,{roles:[Gs],required:!1},r.a.createElement("div",{className:"aggregate-nav-filler"})),r.a.createElement(yE,{hideNavigation:a}),r.a.createElement(kE,{hideNavigation:a,firstName:n.firstName,lastName:n.lastName,dropDownOpen:this.state.dropDownOpen,onClick:function(){return e.setState({dropDownOpen:!e.state.dropDownOpen})}})),r.a.createElement(jE,{classForProfile:s,hideNavigation:a}),r.a.createElement(TE,{permission:i||!l&&!a&&!o},r.a.createElement(hb,null)),r.a.createElement("div",{className:"transparent-bkrd"})):null}}]),a}(n.Component);var IE=Object(o.b)(function(e){return{navigation:e.navigation,profile:e.userAuth}},null)(PE),ME=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={isAndroid:!1,isIpad:!1,isIphone:!1,otherBrowser:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){/Android/i.test(navigator.userAgent)&&this.setState({isAndroid:!0}),/iPad/i.test(navigator.userAgent)&&this.setState({isIpad:!0}),/iPhone/i.test(navigator.userAgent)&&this.setState({isIphone:!0}),navigator.userAgent.match(/Chrome|CriOS|FxiOS|Firefox/i)&&this.setState({otherBrowser:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"smart-banners"},r.a.createElement("div",{className:"AndroidBanner"},this.state.isAndroid?r.a.createElement("div",{className:"smartbanner",id:"smartabanner"},r.a.createElement("div",{className:"smartbanner-container"},r.a.createElement("button",{href:"#",id:"smb-close",className:"smartbanner-close",onClick:function(){return e.setState({isAndroid:!1})},rel:"noopener noreferrer"},"\xd7"),r.a.createElement("span",{className:"smartbanner-icon"}),r.a.createElement("div",{className:"smartbanner-info"},r.a.createElement("div",{className:"smartbanner-title"},"Commute With Enterprise"),r.a.createElement("div",null,"Enterprise Holdings, Inc."),r.a.createElement("span",null,"Free \u2013 Google Play")),r.a.createElement("div",{className:"smartbanner-btn"},r.a.createElement("a",{className:"smartbanner-button",href:"intent://#Intent;scheme=commutewithenterprise;package=com.commutewithenterprise.mobile;end",rel:"noopener noreferrer"},r.a.createElement("span",{className:"smartbanner-button-text"},"VIEW"))),r.a.createElement("div",{className:"hidden"}))):null),r.a.createElement("div",{className:"ios-banner"},(this.state.isIpad||this.state.isIphone)&&this.state.otherBrowser?r.a.createElement("div",{className:"ios-smartbanner"},r.a.createElement("button",{className:"smartbanner__exit ",onClick:function(){return e.setState({isIpad:!1,isIphone:!1})},rel:"noopener noreferrer"}),r.a.createElement("div",{className:"smartbanner__icon"}),r.a.createElement("div",{className:"smartbanner__info"},r.a.createElement("div",null,r.a.createElement("div",{className:"smartbanner__info__title"},"Commute with Enterprise"),r.a.createElement("div",{className:"smartbanner__info__author"},"Enterprise Holdings Inc."),r.a.createElement("div",{className:"smartbanner__info__price"},"FREE - On the App Store"))),r.a.createElement("a",{href:"itmss://itunes.apple.com/us/app/id1440331154",target:"_blank",rel:"noopener noreferrer",className:"smartbanner__button"},r.a.createElement("span",{className:"smartbanner__button__label"},"VIEW"))):null))}}]),a}(n.Component),RE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={isOpen:!1},n}return Object(ap.a)(a,[{key:"isActive",value:function(e){this.setState({isOpen:e})}},{key:"render",value:function(){var e=this,t=this.props.hideNavigation;return r.a.createElement(TE,{permission:this.props.hasUser},r.a.createElement(ME,null),r.a.createElement("header",{className:"global ".concat(this.state.isOpen?"active":null)},r.a.createElement(IE,{onActive:function(t){return e.isActive(t)},disabled:this.props.disabled,hideNavigation:t})),r.a.createElement(Ps,{roles:[Gs],required:!1},r.a.createElement("div",{className:"aggregate-nav mobile-only"},r.a.createElement(wE,null))))}}]),a}(n.Component);var _E=Object(o.b)(function(e){return{hasUser:!!e.loginState.hasToken}},null,null,{pure:!1})(RE);var LE=Object(o.b)(function(e){return{hasUser:!!e.loginState.hasToken}})(function(e){var t=e.hasUser;return r.a.createElement(TE,{permission:t},r.a.createElement("footer",{className:"global"},r.a.createElement("div",{className:"top"},r.a.createElement(Nb.Footer,null),r.a.createElement("div",{className:"links"},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"title"},"Other Enterprise Services"),r.a.createElement("a",{href:nr.enterpriseWebLink,target:"_blank",rel:"noopener noreferrer"},"Enterprise"),r.a.createElement("a",{href:nr.vansalesLink,target:"_blank",rel:"noopener noreferrer"},"Van Sales")),r.a.createElement("div",{className:"section desk-privacy"},r.a.createElement("div",{className:"title"},"Privacy and Legal"),r.a.createElement("a",{href:nr.privacyLink,target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),r.a.createElement("a",{href:nr.policyLink,target:"_blank",rel:"noopener noreferrer"},"Cookie Policy"),r.a.createElement("a",{href:nr.termsOfUseLink,target:"_blank",rel:"noopener noreferrer"},"Terms of Use"," ")))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"mobile-privacy"},r.a.createElement("a",{href:nr.privacyLink,target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),"|",r.a.createElement("a",{href:nr.policyLink,target:"_blank",rel:"noopener noreferrer"},"Cookie Policy"),"|",r.a.createElement("a",{href:nr.termsOfUseLink,target:"_blank",rel:"noopener noreferrer"},"Terms of Use"," ")),r.a.createElement("p",null,"\xa9",vc.currentYear()," Commute with Enterprise. Commute with Enterprise is a trademark of Enterprise Holdings, Inc. All other trademarks are the property of their respective owners."))))}),UE=a(102),VE=a.n(UE);function FE(e){return e.monthsTransactions?r.a.createElement("div",{className:"etable-heading toggle monthly-charges"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-head current-month"},r.a.createElement(ff,{className:"angle-down-button"})," ","".concat(e.monthsTransactions.itemMonth," ").concat(e.monthsTransactions.itemYear)," "),r.a.createElement("div",{className:"etable-head total"},e.monthsTransactions.itemBalanceAmount)))):r.a.createElement("div",null)}function BE(e){return e.monthsTransactions?r.a.createElement("div",null,r.a.createElement("div",{className:"etable-body monthly-charges-table"},e.monthsTransactions.itemActivities.map(function(t,a){return r.a.createElement("div",{className:"etable-row",key:"".concat(e.monthsTransactions.item,"_").concat(a)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-cell spacer"}),r.a.createElement("div",{className:"etable-cell not-yet-invoiced"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Invoiced:\xa0"),t.invoiceDate)),r.a.createElement("div",{className:"etable-cell activity-date"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Act. Date:\xa0"),t.activityDate)),r.a.createElement("div",{className:"etable-cell description"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Description:\xa0"),t.activityDescription)),r.a.createElement("div",{className:"etable-cell amount"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Amount:\xa0"),t.amount))))}))):r.a.createElement("div",null)}var YE=Object(o.b)(function(e){return{name:e.vanpoolInfo.vanpoolName,id:e.vanpoolInfo.vanpoolId}},function(e){return{init:function(){e({type:qe})}}})(function(e){var t=e.name,a=e.id,n=e.init;return"N/A"!==t&&"N/A"!==a||n(),r.a.createElement("div",{className:"vanpool-route-summary-view"},r.a.createElement("h2",{className:"vanpool-summary-name"},t),r.a.createElement("h3",{className:"vanpool-summary-id"},a))}),WE=a(103),HE=a.n(WE);var GE=Object(cp.h)(Object(o.b)(function(e){return{id:e.vanpoolInfo.vanpoolId,summary:e.accountSummary.summary.monthlyAccountSummary,fuelCardData:e.fuelCardPayment.summary,fuelCardDetails:e.fuelCardPayment.activeFuelCardDetails}})(function(e){var t=function(e,t,a,n,r){var c=nr.apiBaseUrl,s="",o=!0;return"/payment"===e.pathname?(c+="/vanpools/vanpool/account/monthly/export/csv",s="Account Summary_".concat(t,".csv"),o=0===a.length):"/payment/fuel"===e.pathname&&(c+="/user/participant/fuelcard/summary/export/csv",s="Fuel Transactions_".concat(t,".csv"),o=Object(_i.isEmpty)(n)||0===n.fuelActivities.length||"Active"!==r.cardStatus),{url:c,hide:o,fileName:s}}(e.location,e.id,e.summary,e.fuelCardData,e.fuelCardDetails),a=t.url,n=t.fileName;return t.hide?r.a.createElement("div",null):r.a.createElement("div",{className:"export-csv"},r.a.createElement("button",{onClick:function(){var e=Object(sc.a)(l.a.mark(function e(t){var r,c,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc.get(a);case 2:r=e.sent,c=r.csvData.map(function(e){return e.join(",")}).join("\n"),s=new Blob([c],{type:"text/csv;charset=utf-8"}),Object(WE.saveAs)(s,n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(ib,null)," ",r.a.createElement("label",null,"Export")))})),qE=Object(cp.h)(function(e){var t=e.currentBalanceAsOfDateTime,a=e.location,n=e.isPaperless,c=e.hasPaperless,s=r.a.createElement("div",{className:"paperless-invoice"},r.a.createElement(lb,null),r.a.createElement(tp.b,{className:"paperless-billing-cta",to:"/profile/preferences"},n?"Currently Enrolled":"Enroll"," in Paperless Invoices"));return r.a.createElement("div",{className:"summary"},r.a.createElement(YE,null),Ds([Hs])?"":r.a.createElement(Ps,{roles:[Ms,Us],required:!1},r.a.createElement("p",{id:"as-of-date-time"},"Account - Last Updated ",t)),"/payment/history/invoices"===a.pathname&&c?s:null,"/payment"===a.pathname?r.a.createElement(GE,null):"")}),zE=function(e){var t=e.remainingAccountBalanceDue;return r.a.createElement("div",{className:"account-summary-container balance right"},Ds([Hs])?"":r.a.createElement(Ps,{roles:[Ms,Us],required:!1},r.a.createElement("div",{id:"balance-due-amount",className:"amount"},t),r.a.createElement("p",{id:"balance-due-date",className:"note"},"Current Account Balance")),r.a.createElement(Is,{roles:[qs],required:!1},r.a.createElement("div",{className:"tools"},r.a.createElement(tp.b,{className:"primary button",to:"/payment/pay"},"Make a Payment"),r.a.createElement(tp.b,{className:"recurring-payment-link",to:"/payment/pay/recurring"},"Set up a recurring payment"))))};var KE=Object(o.b)(function(e){return{balance:e.dashboardPaymentSummary.currentAccountBalance,lastUpdatedDateTime:e.dashboardPaymentSummary.lastUpdatedDateTime}},function(e){return{init:function(){Ds([Us,Ms])&&!As([Hs])&&e({type:ma})}}})(function(e){var t=e.lastUpdatedDateTime,a=e.balance,n=e.isPaperless,c=e.hasPaperless,s=e.init;return"N/A"===t&&s(),r.a.createElement("div",{className:"row space"},r.a.createElement(qE,{currentBalanceAsOfDateTime:t,isPaperless:n,hasPaperless:c}),r.a.createElement(zE,{remainingAccountBalanceDue:a}))});function JE(){return r.a.createElement("p",{className:"note call"},"If you have any questions, please call ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),".")}var QE=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(this.props.accountSummaryLoaded)}},{key:"render",value:function(){return this.props.error?r.a.createElement("div",null):r.a.createElement("div",{className:"account-summary"},r.a.createElement(KE,null),r.a.createElement("div",{className:"etable"},r.a.createElement("div",{className:"etable-body header-labels"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-header service-month"},"Service Month"),r.a.createElement("div",{className:"etable-header invoice-date"},"Invoice Date"),r.a.createElement("div",{className:"etable-header activity-date"},"Activity Date"),r.a.createElement("div",{className:"etable-header description"},"Description"),r.a.createElement("div",{className:"etable-header right"},"Amount"))),this.props.summary.monthlyAccountSummary.length>0?this.props.summary.monthlyAccountSummary.map(function(e,t){var a=r.a.createElement(FE,{monthsTransactions:e});return r.a.createElement(VE.a,{trigger:a,tabIndex:t,key:e.item,open:0===t},r.a.createElement(BE,{monthsTransactions:e}))}):r.a.createElement("p",{className:"no-monthly-data"},"No monthly data available")),r.a.createElement(JE,null))}}]),a}(n.Component);var XE=Object(o.b)(function(e){return{summary:e.accountSummary.summary,error:e.accountSummary.summaryError,vanpoolInfo:e.vanpoolInfo,accountSummaryLoaded:e.accountSummary.accountSummaryLoaded,lastUpdatedDateTime:e.dashboardPaymentSummary.lastUpdatedDateTime}},function(e){return{init:function(t){t||e({type:b})}}})(QE);function $E(e){var t=e.isMyPayments,a=e.payments;return a?r.a.createElement("div",{className:t?"my-history":"vanpool-history"},r.a.createElement("div",{className:"title"},t?"My Online Payment History":"Vanpool Payment History",r.a.createElement("div",{className:"description"},"(One-time and Recurring Payments)")),r.a.createElement("div",{className:"etable"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-header my-history-month"},"Month"),r.a.createElement("div",{className:"etable-header my-history-payment-date"},"Payment Date"),r.a.createElement("div",{className:"etable-header my-history-description"},"Description"),r.a.createElement("div",{className:"etable-header my-history-amount"},"Amount")),a.map(function(e,t){var a=function(e,t){return e.receivedEndDate?r.a.createElement("div",{className:"etable-heading toggle monthly-charges"},r.a.createElement("div",{id:"month-entry-".concat(t),className:"etable-row"},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-head current-month"},r.a.createElement(ff,{className:"angle-down-button"}),"".concat(e.receivedEndDate)),r.a.createElement("div",{className:"etable-head total"},e.monthlyTotal)))):r.a.createElement("div",null)}(e,t);return r.a.createElement(VE.a,{trigger:a,tabIndex:t,key:t,open:0===t},r.a.createElement("div",{className:"etable-body"},e.billingTransactionDetail.length?e.billingTransactionDetail.map(function(e,a){return r.a.createElement(ZE,{index:t,item:e,itemIndex:a,key:"index-".concat(t,"-itemindex-").concat(a)})}):r.a.createElement("p",{className:"note no-recent-activity"},"No data available")))}))):null}function ZE(e){var t=e.index,a=e.item,n=e.itemIndex;return r.a.createElement("div",{className:"etable-row",id:"month-entry-".concat(t,"-detail-").concat(n)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-cell spacer"}),r.a.createElement("div",{className:"date etable-cell"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Trans. Date:\xa0"),r.a.createElement("span",null,a.transactionDate))),r.a.createElement("div",{className:"description etable-cell"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Description:\xa0"),r.a.createElement("span",null,a.transactionDescription))),r.a.createElement("div",{className:"total-charges etable-cell right"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Amount:\xa0"),r.a.createElement("span",null,a.transactionAmount)))))}var eg=document.createElement("div"),tg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).props=e,n.state={deactivating:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(){var e=this;this.delayed=setTimeout(function(){e.delayed&&e.setState({deactivating:!1})})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.delayed),this.delayed=null}},{key:"cancelModal",value:function(){this.setState({deactivating:!0}),this.delayed=setTimeout(this.props.cancel,200)}},{key:"confirmModal",value:function(){this.setState({deactivating:!0}),this.delayed=setTimeout(this.props.confirm,200)}},{key:"render",value:function(){var e=this,t=this.props,a=t.active,n=t.title,c=t.message,s=t.confirmMessage,o=t.cancelMessage,i=t.cancel,l=t.validationcss;return a?r.a.createElement("div",{className:"popup-container ".concat(this.state.deactivating?"out":"")},r.a.createElement("div",{className:"popup"},r.a.createElement("h3",{className:"title"},n),r.a.createElement("div",{className:"message",id:"confirm-popup-message"},c),r.a.createElement("div",{className:"tools response"},i?r.a.createElement("button",{onClick:function(){return e.cancelModal()},ref:function(e){return e&&e.focus()},className:"button cancel","aria-describedby":"confirm-popup-message",onKeyDown:function(e){return"Tab"===e.key&&(e.preventDefault()||e.stopPropagation()||e.target.nextSibling.focus())}},o):null,r.a.createElement("button",{onClick:function(){return e.confirmModal()},ref:function(e){return!i&&e&&e.focus()},className:"button confirm primary ".concat(l?"validation":""),onKeyDown:function(e){return"Tab"===e.key&&(e.preventDefault()||e.stopPropagation()||e.target.parentElement.firstChild.focus())}},s)))):null}}]),a}(n.Component),ag=function(e){return Object(c.createPortal)(r.a.createElement(tg,e),document.getElementById("confirmation-popup")||eg)},ng=function(e){var t=e.cancel,a=e.confirm,n=e.paymentName,c=e.active,s="Would you like to stop all future scheduled payments for '".concat(n,"'?");return r.a.createElement(ag,{title:"Stop Recurring Payment",message:s,cancelMessage:"Dismiss",confirmMessage:"Stop",active:c,cancel:function(){return t()},confirm:function(){return a()}})},rg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={popupOpen:!1,selectedPayment:{}},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"openPopup",value:function(e){this.setState({popupOpen:!0,selectedPayment:e})}},{key:"cancel",value:function(){this.setState({popupOpen:!1,selectedPayment:{}})}},{key:"deleteItem",value:function(){this.props.deleteScheduledPayment(this.state.selectedPayment),this.setState({popupOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props.scheduled;return r.a.createElement("div",{className:"etable recurring"},r.a.createElement("div",{className:"etable-cat"},r.a.createElement("div",{className:"etable-row header-labels"},r.a.createElement("div",{className:"etable-header title"},"My Recurring Payments"),r.a.createElement("div",{className:"etable-header payment-schedule"},"Payment Schedule"),r.a.createElement("div",{className:"etable-header amount"},"Amount"),r.a.createElement("div",{className:"etable-header edit"},"Edit"),r.a.createElement("div",{className:"etable-header delete"},"Delete")),r.a.createElement(ng,{active:this.state.popupOpen,paymentName:this.state.selectedPayment.name,cancel:function(){return e.cancel()},confirm:function(){return e.deleteItem()}}),r.a.createElement(Is,{roles:[Bs],required:!1},r.a.createElement("div",{className:"etable-body"},t.length?t.map(function(t){return r.a.createElement(cg,{item:t,key:t.id,deleteItem:function(){return e.openPopup(t)}})}):r.a.createElement(og,null))),r.a.createElement(Ps,{roles:[Bs],required:!1},r.a.createElement("div",{className:"etable-body"},t.length?t.map(function(t){return r.a.createElement(sg,{item:t,key:t.id,deleteItem:function(){return e.openPopup(t)}})}):null))))}}]),a}(n.Component);function cg(e){var t=e.item,a=e.deleteItem;return r.a.createElement("div",{className:"etable-row",item:t},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Name:\xa0"),r.a.createElement("div",{className:"name etable-cell mobile-only"},t.name)),r.a.createElement("div",{className:"name etable-cell desktop-only"},r.a.createElement(tp.b,{className:"edit",to:"/payment/pay/recurring/".concat(t.id),"aria-label":"Edit recurring payment ".concat(t.name)},t.name)),r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Description:\xa0"),r.a.createElement("div",{className:"description etable-cell"},t.every," of every month")),r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Amount:\xa0"),r.a.createElement("div",{className:"amount etable-cell right"},bc.formatUSD(t.amount))),r.a.createElement("div",{className:"actions etable-cell"},r.a.createElement(tp.b,{className:"edit",to:"/payment/pay/recurring/".concat(t.id),"aria-label":"Edit recurring payment ".concat(t.name)},r.a.createElement(df,null)),r.a.createElement("span",{tabIndex:"0",className:"delete",onClick:a,onKeyPress:function(e){return"Enter"===e.key&&a()},"aria-label":"Delete recurring payment ".concat(t.name)},r.a.createElement(Uf,null))))}function sg(e){var t=e.item,a=e.deleteItem;return r.a.createElement("div",{className:"etable-row",item:t},r.a.createElement("div",{className:"name etable-cell"},t.name),r.a.createElement("span",null),r.a.createElement("div",{className:"description etable-cell italic emergency"},"Currently Inactive"),r.a.createElement("div",{className:"amount etable-cell right"},bc.formatUSD(t.amount)),r.a.createElement("div",{className:"actions etable-cell"},r.a.createElement("span",{tabIndex:"0",className:"delete",onClick:a,onKeyPress:function(e){return"Enter"===e.key&&a()},"aria-label":"Delete recurring payment ".concat(t.name)},r.a.createElement(Uf,null))))}function og(){return r.a.createElement("div",{className:"etable-row no-scheduled-payments"},r.a.createElement("div",{className:"etable-cell desktop-only"},"No Scheduled Payments"),r.a.createElement("div",{className:"etable-cell"},r.a.createElement(tp.b,{to:"/payment/pay/recurring"},"Setup a Recurring Payment")))}var ig=Object(o.b)(function(e){return{scheduled:e.scheduledPayments.scheduled}},function(e,t){return{init:function(){e({type:bt})},deleteScheduledPayment:function(t){e({type:gt,data:t})}}})(rg),lg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n.toggleExpanded=n.toggleExpanded.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"toggleExpanded",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.requestedPayment,n=t.index,c=this.state.expanded;return r.a.createElement("div",null,r.a.createElement("div",{className:"etable-row",id:"requested-payment-".concat(n)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"date etable-cell"},vc.parseDateAsMonthDay(a.sentDate),r.a.createElement("button",{className:"note-toggle ".concat(c?"chosen":""),onClick:function(){return e.toggleExpanded()},disabled:!a.participantNote&&!a.vanpoolNote},c?r.a.createElement(ob,null):r.a.createElement(sb,null)))),r.a.createElement("div",{className:"etable-cell right due"},bc.formatUSD(a.amount))),c?r.a.createElement("div",{className:"notes-section"},a.participantNote?r.a.createElement("div",{className:"participant-section"},r.a.createElement("div",{className:"heading"},"To You:"),r.a.createElement("div",{className:"note"},a.participantNote)):null,a.vanpoolNote?r.a.createElement("div",{className:"vanpool-section"},r.a.createElement("div",{className:"heading"},"To Vanpool:"),r.a.createElement("div",{className:"note"},a.vanpoolNote)):null):null)}}]),a}(r.a.Component),ug=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props.allocation;return r.a.createElement("div",{className:"etable requested"},r.a.createElement("div",{className:"etable-cat"},r.a.createElement("div",{className:"title"},"My Requested Payments",r.a.createElement("div",{className:"description"},"For ",vc.currentMonth(),", your coordinator has requested the following payment(s)")),r.a.createElement("div",{className:"etable-body"},e.requestedPayments.length?r.a.createElement("div",null," ",e.requestedPayments.map(function(e,t){return r.a.createElement(lg,{requestedPayment:e,index:t,key:"index-".concat(t)})}),r.a.createElement("div",null,r.a.createElement("div",{className:"etable-footer requested-payments-footer"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-foot total-row"},"Requested Payments"),r.a.createElement("div",{className:"etable-foot right due total-row"},bc.formatUSD(e.amount)))),r.a.createElement("div",{className:"disclaimer"},"Requested Payments above is a monthly snapshot and will not reflect payments process. See Online Payment History below recent payments processed and posted to your account."))):r.a.createElement(mg,null))))}}]),a}(n.Component);function mg(){return r.a.createElement("div",{className:"etable-row no-requested-payments"},r.a.createElement("div",{className:"etable-cell desktop-only"},"No Payment Requests at this time. Please contact your coordinator with questions"),r.a.createElement("div",{className:"etable-cell"}))}var dg=Object(o.b)(function(e){return{allocation:e.paymentManagement}},function(e){return{init:function(){e({type:fa})}}})(ug),pg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(KE,null),!Ds([Hs])&&Ds([Vs])?r.a.createElement(dg,null):null,Ds([qs,Gs])?null:r.a.createElement(ig,null),r.a.createElement($E,{isMyPayments:!0,payments:this.props.paymentHistory.myHistory.payments}),r.a.createElement(JE,null))}}]),a}(n.Component);var vg=Object(o.b)(function(e){return{paymentHistory:e.paymentHistory,summary:e.accountSummary.summary}},function(e){return{init:function(){Ds([qs,Gs])||e({type:ue})}}})(pg);function hg(e){var t=e.invoiceDetails,a=e.monthIndex,n=e.index,c=e.dueDate,s=e.pdfDownloadFail,o=["etable-heading","toggle","monthly-charges"],i=r.a.createElement("p",{className:"invoice-due-by"},t.invoiceMonth," Invoice balance due by"," ",vc.formatMoment(vc.getMoment(c,dc),"M/D/YYYY"));return 1===a&&o.push("latest"),t?r.a.createElement("div",{className:o.join(" ")},r.a.createElement("div",{className:"etable-row",id:"invoice-entry-".concat(n)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-head current-month"},r.a.createElement(ff,{className:"angle-down-button"})," ",t.invoiceId?function(e,t,a,n){return r.a.createElement("div",{className:"month-label-download"},"".concat(e," ").concat(t)," View",r.a.createElement("span",{className:"pipe"},"|"),r.a.createElement("button",{className:"download-link",onClick:function(){var e=Object(sc.a)(l.a.mark(function e(t){var r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,Pc.getStatic("".concat(nr.apiBaseUrl,"/vanpools/vanpool/invoices/invoice/pdf/download/").concat(a),{"Content-Type":"application/pdf"});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.blob();case 7:c=e.sent,Object(WE.saveAs)(c,"".concat(a,".pdf")),e.next=12;break;case 11:n(r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("span",{className:"download-label"},"Download")," ",r.a.createElement(ib,null)))}(t.invoiceMonth,t.invoiceYear,t.invoiceId,s):"Recent Activity View"),1===a?i:null,r.a.createElement("div",{className:"etable-head total"},t.invoiceAmount)))):r.a.createElement("div",null)}function fg(e){if(!e.invoiceDetails)return r.a.createElement("div",null);var t=e.invoiceDetails.invoiceActivities.map(function(t,a){return r.a.createElement("div",{className:"etable-row",key:"".concat(e.invoiceDetails.invoiceId,"_").concat(a)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-cell spacer"}),r.a.createElement("div",{className:"etable-cell not-yet-invoiced"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Invoiced:\xa0"),t.invoiceDate)),r.a.createElement("div",{className:"etable-cell activity-date"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Act. Date:\xa0"),t.activityDate)),r.a.createElement("div",{className:"etable-cell description"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Description:\xa0"),t.activityDescription)),r.a.createElement("div",{className:"etable-cell amount"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Amount:\xa0"),t.amount))))});return r.a.createElement("div",null,r.a.createElement("div",{className:"etable-body monthly-charges-table"},t.length?t:r.a.createElement("p",{className:"note no-recent-activity"},"No recent activity at this time")))}var bg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.loadDueDate()}},{key:"render",value:function(){var e=this,t=this.props.invoiceSummary;return r.a.createElement("div",null,r.a.createElement("div",{className:"etable invoice-table"},r.a.createElement("div",{className:"etable-body"},r.a.createElement("div",{className:"etable-row header-labels"},r.a.createElement("div",{className:"etable-header service-month"},"Month"),r.a.createElement("div",{className:"etable-header activity-date"},"Activity Date"),r.a.createElement("div",{className:"etable-header description"},"Description"),r.a.createElement("div",{className:"etable-header right"},"Amount")),t.map(function(t,a){var n=!t.invoiceId;if(t.invoiceActivities&&t.invoiceActivities.length>0||n){var c=r.a.createElement(hg,{invoiceDetails:t,index:a,monthIndex:a,dueDate:e.props.dueDate,pdfDownloadFail:e.props.pdfDownloadFail});return r.a.createElement(VE.a,{trigger:c,tabIndex:a,key:t.invoiceId,open:0===a},r.a.createElement(fg,{invoiceDetails:t,index:a}))}return r.a.createElement("div",{className:"invoice-archive etable-row",id:"invoice-entry-".concat(a),key:a},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"date etable-head"},t.invoiceMonth," ",t.invoiceYear),r.a.createElement("a",{className:"invoice-number mobile-only",href:"".concat(nr.apiBaseUrl,"/vanpools/vanpool/invoices/invoice/pdf/download/").concat(t.invoiceId)},"Download ",r.a.createElement(ib,null)),r.a.createElement("button",{className:"invoice-number desktop-only",onClick:function(){var a=Object(sc.a)(l.a.mark(function a(n){var r,c;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,Pc.getStatic("".concat(nr.apiBaseUrl,"/vanpools/vanpool/invoices/invoice/pdf/download/").concat(t.invoiceId),{"Content-Type":"application/pdf"});case 3:if(!(r=a.sent).ok){a.next=11;break}return a.next=7,r.blob();case 7:c=a.sent,Object(WE.saveAs)(c,"".concat(t.invoiceId,".pdf")),a.next=12;break;case 11:e.props.pdfDownloadFail(r);case 12:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},"Download ",r.a.createElement(ib,null))),r.a.createElement("div",{className:"amount-due etable-head right"},t.invoiceAmount))}))),r.a.createElement("p",{className:"old-invoice-notice"},"Due to an update with the Commute billing system, invoices older than December 2019 will be download only."),r.a.createElement(JE,null))}}]),a}(n.Component);var Eg=Object(o.b)(function(e){return{dueDate:e.dashboardPaymentSummary.invoiceDueDate}},function(e){return{loadDueDate:function(){e({type:ma})},pdfDownloadFail:function(t){e({type:fe,data:t.statusText}),_n.analyticsEvent({type:"Network Error",errorCode:t.statusText,api:t.url}),Rc.serverLog({url:t.url,data:t.headers,message:"Network Error Occurred : error fetching url"})}}})(bg),gg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={invoiceDataLoading:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(this.props.accountSummaryLoaded),this.setState({invoiceDataLoading:this.props.invoiceSummary&&this.props.invoiceHistory})}},{key:"componentWillReceiveProps",value:function(e){this.setState({invoiceDataLoading:!e.invoiceHistory.historyLoaded||!e.invoiceHistory.summaryLoaded})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"payment-invoices"},r.a.createElement(mp,{isLoading:this.state.invoiceDataLoading}),r.a.createElement(KE,{isPaperless:this.props.isPaperless,hasPaperless:this.props.hasPaperlessPreference}),r.a.createElement(cp.c,{exact:!0,path:"".concat(this.props.match.path),render:function(t){return r.a.createElement(Eg,{url:e.props.match.url,invoiceHistory:e.props.invoiceHistory,invoiceSummary:e.props.invoiceSummary})}}))}}]),a}(n.Component);var yg=Object(o.b)(function(e){var t={invoiceHistory:e.invoiceHistory,summary:e.accountSummary.summary,accountSummaryLoaded:e.accountSummary.accountSummaryLoaded,invoiceSummary:e.invoiceHistory.invoiceSummary};if(e.profile.preferences&&e.profile.preferences.length>0){var a=e.profile.preferences.find(function(e){return"EPI"===e.preferenceCode});t.isPaperless=!!a&&a.isSelected,t.hasPaperlessPreference=!!a}return t},function(e,t){return{init:function(t){e({type:ve}),e({type:de}),e({type:jt}),t||e({type:b})}}})(gg),Og=function(e){return r.a.createElement("div",{className:"payment-history"},Ds([Ms,qs])&&!As([Hs])?r.a.createElement(cp.c,{path:"".concat(e.match.path,"/invoices"),component:yg}):null,r.a.createElement(cp.c,{path:"".concat(e.match.path,"/payments"),component:vg}),Ds([Ms,qs])&&!As([Hs])?r.a.createElement(cp.c,{exact:!0,path:"".concat(e.match.path),render:function(){return r.a.createElement(cp.b,{to:"".concat(e.match.path,"/invoices")})}}):r.a.createElement(cp.c,{exact:!0,path:"".concat(e.match.path),render:function(){return r.a.createElement(cp.b,{to:"".concat(e.match.path,"/payments")})}}))},Ng=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"render",value:function(){var e=this.props,t=e.step,a=e.recurring,n=e.modify,c=a?n?"Modify Payment":"Recurring Payment":"One Time Payment";return r.a.createElement("div",{className:"stepper step-".concat(t)},r.a.createElement("div",{className:"step one ".concat(1===t?"active":"")},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,"1. ",c))),r.a.createElement("div",{className:"step two ".concat(2===t?"active":"")},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,"2. Review"))),r.a.createElement("div",{className:"step three ".concat(3===t?"active":"")},r.a.createElement("div",{className:"label"},r.a.createElement("label",null,"3. Confirmation"))),r.a.createElement("div",{className:"mobile"},r.a.createElement("span",{className:"italic"},"Step ",t," of 3"),"\xa0 ",c))}}]),a}(n.Component),kg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props.lastPayment;if(e){var t=e.totalCharges?bc.formatUSD(e.totalCharges):"Not Available",a=e.date?vc.parseDate(e.date):"Not Available";return r.a.createElement("div",{className:"last-payment"},r.a.createElement("div",{className:"flex"},r.a.createElement(Nf,null),r.a.createElement("div",null,r.a.createElement("h4",null,"MY LAST PAYMENT"),r.a.createElement("p",null,t," on ",a))))}return null}}]),a}(n.Component);var jg=Object(o.b)(function(e){return{lastPayment:e.payments.lastPayment}},function(e,t){return{init:function(){e({type:lt})}}})(kg),Cg=function(e){return r.a.createElement("div",{className:"payment-type"},r.a.createElement("h2",{className:"title"},xg(e.recurring)),r.a.createElement("div",{className:"select-payment-type"},e.recurring?null:r.a.createElement(Sf,null),r.a.createElement("div",null,r.a.createElement("h4",null,xg(!e.recurring)),r.a.createElement("p",null,r.a.createElement(tp.b,{className:"payment-toggle",replace:!0,to:"/payment/pay"+(e.recurring?"":"/recurring")},e.recurring?"Make":"Set up"," a"," ",xg(!e.recurring))))),r.a.createElement(jg,null))};function xg(e){return e?"Recurring Payment":"One Time Payment"}var Sg=/^0+(\d)/,Dg=1e5;function Ag(e){return r.a.createElement("input",Object.assign({},e,{onChange:function(t){return a=t.target.value,!isNaN(a)&&a>=0&&a<Dg&&e.onChange(function(e){if(e.includes(".")){var t=e.split("."),a=Object(hc.a)(t,2),n=a[0],r=a[1];return n.replace(Sg,"$1")+"."+r.substr(0,2)}return e.replace(Sg,"$1")}(t.target.value));var a},onFocus:function(e){return e.target.select()},onBlur:function(){return e.onChange((t=e.value,bc.dollarPad(t)));var t}}))}var wg=function(e){var t=e.amount,a=e.updateState;return r.a.createElement("div",{className:"payment-amount section"},r.a.createElement("h3",null,"Enter Payment Amount"),r.a.createElement("div",{className:"icon-field"},r.a.createElement(Cf,null),r.a.createElement(Ag,{"aria-label":"Enter Payment Amount","aria-required":"true",className:"amount",value:t,onChange:function(e){return a({amount:e})}})))},Tg=[{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,length:[16],luhn:!0,cvcLength:3,imgSrc:"".concat(nr.imagePath,"/mastercard.svg")},{type:"visa",pattern:/^4/,length:[13,16,19],luhn:!0,cvcLength:3,imgSrc:"".concat(nr.imagePath,"/visa.svg")},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,length:[16],luhn:!0,cvcLength:3,imgSrc:"".concat(nr.imagePath,"/discover.png")},{type:"amex",pattern:/^(34|37)/,length:[15],luhn:!0,cvcLength:4,imgSrc:"".concat(nr.imagePath,"/amex.png")},{type:"",pattern:/.*/,length:[16],luhn:!0,cvcLength:3,imgSrc:"".concat(nr.imagePath,"/Default_CardMedium.png")}],Pg="NEW_CARD_ID",Ig={isNumber:function(e){return/^\d*$/.test(e)},cardTypeForValue:function(e){return Tg.find(function(t){return t.pattern.test(e)})},cardTypeForBrand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Tg.find(function(t){return t.type.toUpperCase()===e.toUpperCase()})||Li.a.last(Tg)},scheduleLookup:[],scheduleForCard:function(e){return!Ig.scheduleLookup.length||!e||e.length<6?{next:"",every:""}:Ig.scheduleLookup.find(function(t){return e.startsWith(t.code)})},findValidCardType:function(e){return Tg.filter(e)},isCvcValid:function(e,t){return new RegExp("^\\d{0,"+e+"}$").test(t)},getImage:function(e){return Tg.filter(function(t){return t.type===e.toLowerCase()}).reduce(function(e,t){return t},Tg.find(function(e){return""===e.type})).imgSrc},luhn:function(e){for(var t,a=[0,2,4,6,8,1,3,5,7,9],n=e.length,r=1,c=0;n;)t=parseInt(e.charAt(--n),10),c+=(r^=1)?a[t]:t;return c&&c%10===0}};Ig.retrieveSchedule=Object(sc.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(nr.apiBaseUrl,"/payment/recurringChargeInformation"),e.prev=1,e.next=4,Pc.get(t);case 4:a=e.sent,Ig.scheduleLookup=a.recurringChargeInformation.map(function(e){return{code:e.binCode,next:vc.parseDateAsMonthDayYear(e.nextRecurringChargeDate),every:vc.parseDayAsOrdinal(e.nextRecurringChargeDate),brand:e.cardType}}).sort(function(e,t){return t.code.length-e.code.length}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[1,8]])})),Ig.getExpirationYear=function(e){return e.substring(2,e.length)},Ig.getExpirationMonth=function(e){return e.substring(0,2)},Ig.createExpirationString=function(e,t){var a=2===t.toString().length?t:t.toString().substring(2,t.length);return"".concat(e).concat(a)};var Mg=Ig,Rg=a(547),_g=a.n(Rg),Lg=a(224),Ug=a.n(Lg);function Vg(e){var t=e.children,a=e.onSelect,n=e.disabled,c=e.className,s=e.selected,o={onKeyPress:function(e){return e.target===e.currentTarget&&"Enter"===e.key&&a()},onClick:a,className:"radio-btn ".concat(c||""," ").concat(s?"selected":""),disabled:n};return s?r.a.createElement("div",o,t):r.a.createElement("button",o,t)}var Fg=function(e){return r.a.createElement("div",{className:"payment-methods section"},r.a.createElement("h3",null,"Choose Payment Method"," ",r.a.createElement(tp.b,{to:"/profile/payment-info"},"Update Payment Methods")," "),r.a.createElement("div",{className:"cards"},e.paymentMethods.map(function(t,a){return r.a.createElement(Vg,{onSelect:function(){return function(e,t){if(e.id===t.selectedCard.id)return;if(t.recurring)return t.updateState({selectedCard:e,cvc:"000"});e.cvcLength=Mg.cardTypeForBrand(e.brand).cvcLength,t.updateState({selectedCard:e,cvc:""})}(t,e)},key:a,disabled:vc.beforeToday(t.exp),selected:e.selectedCard.id===t.id,className:"card"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{className:"card-image",src:Mg.getImage(t.brand),alt:"Credit Card"})),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"account"},"***",t.account),r.a.createElement("div",{className:"exp ".concat(vc.beforeToday(t.exp)?"expired":"")},"Exp ",t.exp,vc.beforeToday(t.exp)?r.a.createElement(yf,null):null)),e.recurring?null:r.a.createElement("div",{className:"cvc"},r.a.createElement("input",{id:"cvc-"+t.id,value:e.cvc,onChange:function(t){return function(e,t){new RegExp("^[0-9]{0,".concat(t.selectedCard.cvcLength,"}$")).test(e)&&t.updateState({cvc:e})}(t.target.value,e)},placeholder:"CVC",autoFocus:!0}),r.a.createElement("div",{className:"popout"},r.a.createElement("div",{className:"cvc-prompt"},"Please enter CVC"),r.a.createElement("img",{src:4===e.selectedCard.cvcLength?Ug.a:_g.a,alt:"CVC help"}))))}),e.paymentMethods.length%3>0?r.a.createElement("div",{className:"card spacer"}):null,e.paymentMethods.length%3===1?r.a.createElement("div",{className:"card spacer"}):null))};var Bg=a(225),Yg=a.n(Bg);function Wg(e){var t=e.autoFocus,a=Object(uo.a)(e,["autoFocus"]);return r.a.createElement("span",{className:"fancy-input"},r.a.createElement("input",Object.assign({},a,{"aria-label":a.placeholder,"aria-required":"true",ref:function(e){return t&&e&&!e.focused&&setTimeout(function(){return(e.focused=!0)&&e.focus()},100)}})),r.a.createElement("span",{className:"label"},a.label?a.label:a.placeholder))}var Hg=["01","02","03","04","05","06","07","08","09","10","11","12"],Gg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;Object(Nc.a)(this,a),n=t.call(this,e);var r=(new Date).getFullYear();return n.YEARS="0123456789".split("").map(function(e,t){return""+(t+r)}),n.state={type:"",number:"",expMonth:Hg[0],expYear:n.YEARS[0],cvc:"",zip:"",saving:!1},n}return Object(ap.a)(a,[{key:"updateCardNumber",value:function(e){if(e=e.split(" ").join(""),Mg.isNumber(e)){var t=Mg.cardTypeForValue(e),a=Mg.scheduleForCard(e);e=e.substr(0,Math.max.apply(Math,t.length)),this.update({number:e,type:t.type,validNumber:t.type&&t.length.includes(e.length)&&Mg.luhn(e),cvc:"",validCVC:!1,every:a.every,next:a.next})}}},{key:"updateCVC",value:function(e){var t=Mg.cardTypeForValue(this.state.number);Mg.isCvcValid(t.cvcLength,e)&&this.update({cvc:e,validCVC:e.length===t.cvcLength})}},{key:"updateZip",value:function(e){/^\d{0,5}$/.test(e)&&this.update({zip:e,validZip:5===e.length})}},{key:"updateCardExpiration",value:function(e,t){var a=new Date,n=a.getMonth()+1,r=!(parseInt(t,10)===a.getFullYear()&&parseInt(e,10)<n);this.update({expMonth:e,expYear:t,validExp:r})}},{key:"update",value:function(e){this.setState(e),this.emit(Object(On.a)(Object(On.a)({},this.state),e))}},{key:"toggleSave",value:function(){this.update({saving:!this.state.saving})}},{key:"emit",value:function(e){var t=e.type,a=e.number,n=e.expMonth,r=e.expYear,c=e.cvc,s=e.zip,o=e.validNumber,i=e.validCVC,l=e.validZip,u=e.validExp,m=e.next,d=e.every,p=e.saving;this.props.onChange({valid:!!(o&&i&&l&&u),num:a,exp:n+"/"+r.substr(2),brand:t.toUpperCase(),account:"*"+a.substr(-4),cvc:c,zip:s,next:m,every:d,saving:p})}},{key:"render",value:function(){var e=this,t=this.state,a=t.number,n=t.validNumber,c=t.validExp,s=t.numberFocused,o=t.expMonth,i=t.expYear,l=t.cvc,u=t.zip,m=t.type,d=t.saving,p=a.length&&!s&&!n,v=a.split("").map(function(e,t){return t%4===3?e+" ":e}).join("").trim();return r.a.createElement("div",{className:"new-card-form"},r.a.createElement("div",{className:"card-type"},r.a.createElement(Wg,{placeholder:"Card Number",type:"text",className:"card-number ".concat(n||s?"":"invalid"),onChange:function(t){return e.updateCardNumber(t.target.value)},onBlur:function(){return e.setState({numberFocused:!1})},onFocus:function(){return e.setState({numberFocused:!0})},value:v,autoFocus:!0}),r.a.createElement("span",{className:"card-valid ".concat(n?"valid":"")},r.a.createElement(Of,{focusable:"false"})),p?r.a.createElement("span",{className:"card-invalid"},"Please enter a valid card number."):null,p?r.a.createElement(yf,{className:"card-invalid-icon",focusable:"false"}):null,r.a.createElement("div",{className:"card-icons ".concat(m?"has-type":"")},Mg.findValidCardType(function(e){return e.type}).map(function(e){return r.a.createElement("span",{key:e.type,className:"card-icon ".concat(e.type===m?"entered":"")},r.a.createElement("img",{src:e.imgSrc,alt:e.type}))}))),r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"card-exp-month ".concat(c?"":"invalid"),defaultValue:o,onChange:function(t){return e.updateCardExpiration(t.target.value,i)}},Hg.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"card-exp-year ".concat(c?"":"invalid"),defaultValue:i,onChange:function(t){return e.updateCardExpiration(o,t.target.value)}},this.YEARS.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),c?null:r.a.createElement(yf,{className:"card-exp-invalid-icon",focusable:"false"}),r.a.createElement("div",{className:"cvc"},r.a.createElement(Wg,{type:"text",className:"card-cvc",placeholder:"CVC",value:l,onChange:function(t){return e.updateCVC(t.target.value)}}),r.a.createElement("img",{src:"amex"===m?Ug.a:Yg.a,alt:"CVC help"})),r.a.createElement(Wg,{type:"text",className:"card-zip",placeholder:"Zip Code",value:u,onChange:function(t){return e.updateZip(t.target.value)}}),this.props.recurring?null:r.a.createElement("label",{className:"save-card"},r.a.createElement("input",{type:"checkbox",onKeyPress:function(t){return"Enter"===t.key&&e.toggleSave()},onClick:function(){return e.toggleSave()},checked:d}),d?r.a.createElement(jf,{focusable:"false"}):r.a.createElement(kf,{focusable:"false"}),r.a.createElement("span",null,"Save this card for future use")))}}]),a}(n.Component),qg={id:"NEW_CARD_ID",isNewCard:!0,cvc:""},zg=function(e){return r.a.createElement("div",{className:"new-card section"},r.a.createElement(Vg,{onSelect:function(){return function(e){if(Pg===e.selected)return;e.updateState({selectedCard:Object(On.a)({},qg)})}(e)},className:"radio",selected:e.selected===Pg},r.a.createElement("h3",null,"Enter a New Card"),r.a.createElement("fieldset",{disabled:e.selected!==Pg},r.a.createElement(Gg,{recurring:e.recurring,onChange:function(t){return function(e,t){t.updateState({selectedCard:Object(On.a)(Object(On.a)({},qg),e)})}(t,e)},value:e.newCard}))))};var Kg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={amount:"",cvc:"",name:"",selectedCard:{},hasFocused:!1},n.isCoordinatorOrBillingViewer=!1,n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.isCoordinatorOrBillingViewer=gn.hasPermissions([Us,Ms]),this.props.payment&&this.setState(this.props.payment),this.setState({hasFocused:!1})}},{key:"componentWillReceiveProps",value:function(e){e.payment&&this.setState(e.payment),e.initialBalance&&!this.isCoordinatorOrBillingViewer&&this.setState({amount:e.initialBalance.toString()}),this.setState({hasFocused:!1})}},{key:"updateState",value:function(e){this.setState(e)}},{key:"setNameInput",value:function(e){!this.state.hasFocused&&e&&(this.setState({hasFocused:!0}),e.focus())}},{key:"render",value:function(){var e=this,t=this.props,a=t.review,n=t.paymentMethods,c=this.state.selectedCard.id,s=bc.dollarPad(this.state.amount),o=this.state.cvc.length===Mg.cardTypeForBrand(this.state.selectedCard.brand).cvcLength,i=s&&c&&(c===Pg?this.state.selectedCard.valid:o);return r.a.createElement("div",{className:"one-time"},r.a.createElement("div",{className:"title-toggle section"},r.a.createElement(Cg,{recurring:!1})),r.a.createElement(wg,{amount:this.state.amount,updateState:function(t){return e.updateState(t)}}),r.a.createElement(Fg,{paymentMethods:n,selectedCard:this.state.selectedCard,updateState:function(t){return e.updateState(t)},cvc:this.state.cvc,recurring:!1}),r.a.createElement(zg,{selected:c,updateState:function(t){return e.updateState(t)}}),r.a.createElement("div",{className:"tools section"},r.a.createElement("button",{className:"button cancel",onClick:this.props.cancel},"Cancel"),r.a.createElement("button",{className:"button primary pay",onClick:function(){return a(e.state)},disabled:!i},"Pay",s?" $".concat(s):" $0.00")))}}]),a}(n.Component),Jg=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={open:!1},n}return Object(ap.a)(a,[{key:"showInfo",value:function(e){"Enter"===e.key&&this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"info ".concat(this.state.open?"open":""),tabIndex:0,onClick:function(){return e.setState({open:!e.state.open})},onKeyPress:function(t){return e.showInfo(t)}},r.a.createElement(xf,null),r.a.createElement("div",{className:"message"},this.props.message))}}]),a}(n.Component),Qg=70,Xg=function(e){var t=e.name,a=e.updateState,n=e.inputRef;return r.a.createElement("div",{className:"payment-name section"},r.a.createElement("h3",null,"Enter Payment Name ",r.a.createElement(Jg,{message:"Create a nickname for your recurring payment. For example, Commute Monthly Invoice or Vanpool Gas. This description is for your reference only and will not be displayed on your vanpool's invoice"})),r.a.createElement("input",{className:"name",value:t,onChange:function(e){return $g(e.target.value,{updateState:a})},onBlur:function(e){return $g(e.target.value.trim(),{updateState:a})},placeholder:"Payment Name",ref:n}))};function $g(e,t){if((e=e.replace(/^\s/,"").replace(/\s\s+/," ")).length<=Qg)return t.updateState({name:e})}function Zg(e){var t=e.selectedCard,a=(e.lookup,t.isNewCard?Mg.scheduleForCard(t.num):t),n=a.next,c=a.every;return r.a.createElement("div",{className:"schedule section ".concat(n?"visible":"hidden")},r.a.createElement("h3",null,"Payment Schedule"),r.a.createElement("div",null,"Your first payment is scheduled for ",r.a.createElement("span",{className:"date"},n)),r.a.createElement("div",null,"The selected card is charged based on the funding schedule of the card provider and will be charged on the"," ",r.a.createElement("span",{className:"every"},c," of the month"),"."))}var ey=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={amount:"",cvc:"",name:"",selectedCard:{},hasFocused:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.payment&&this.setState(this.props.payment)}},{key:"componentWillReceiveProps",value:function(e){e.payment&&this.setState(e.payment)}},{key:"updateState",value:function(e){this.setState(e)}},{key:"setNameInput",value:function(e){!this.state.hasFocused&&e&&(this.setState({hasFocused:!0}),e.focus())}},{key:"render",value:function(){var e=this,t=this.props,a=t.review,n=t.paymentMethods,c=this.state.selectedCard.id,s=bc.dollarPad(this.state.amount),o=!!this.state.name,i=s&&c&&(c===Pg?this.state.selectedCard.valid:o);return r.a.createElement("div",{className:"recurring"},r.a.createElement("div",{className:"title-toggle section"},r.a.createElement(Cg,{recurring:!0})),r.a.createElement(Xg,{name:this.state.name,updateState:function(t){return e.updateState(t)},inputRef:function(t){return e.setNameInput(t)}}),r.a.createElement(wg,{amount:this.state.amount,updateState:function(t){return e.updateState(t)}}),r.a.createElement(Fg,{paymentMethods:n,selectedCard:this.state.selectedCard,updateState:function(t){return e.updateState(t)},cvc:this.state.cvc,recurring:!0}),r.a.createElement(zg,{recurring:this.props.recurring,selected:c,updateState:function(t){return e.updateState(t)}}),r.a.createElement(Zg,{selectedCard:this.state.selectedCard}),r.a.createElement("div",{className:"tools section"},r.a.createElement("button",{className:"button cancel",onClick:this.props.cancel},"Cancel"),r.a.createElement("button",{className:"button primary pay",onClick:function(){return a(e.state)},disabled:!i},"Schedule",s?" $".concat(s):" $0.00")))}}]),a}(n.Component),ty=["01","02","03","04","05","06","07","08","09","10","11","12"],ay=(new Date).getFullYear(),ny="0123456789".split("").map(function(e,t){return""+(t+ay)}),ry=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={cvc:"",id:n.props.id,postalCode:"",expirationMMYY:n.props.exp.replace("/","")},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.onStopEditing()}},{key:"onUpdate",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.update(this.state)}},{key:"onDelete",value:function(){this.props.onStopEditing(),this.props.delete(this.props.id)}},{key:"validData",value:function(e){return 3===this.state.cvc.length&&e&&5===this.state.postalCode.length}},{key:"updateZipCode",value:function(e){e.match(/^\d*?$/)&&e.length<=5&&this.setState({postalCode:e})}},{key:"updateCVC",value:function(e){e.match(/^\d*?$/)&&e.length<=3&&this.setState({cvc:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.onStopEditing,n=t.deletable,c=Mg.getExpirationMonth(this.state.expirationMMYY),s=Mg.getExpirationYear(this.state.expirationMMYY),o=!vc.beforeTodayMMYY(c,s),i=Mg.getExpirationMonth(this.props.exp.replace("/","")),l=Mg.getExpirationYear(this.props.exp.replace("/",""));return r.a.createElement("div",{className:"card-editor"},r.a.createElement("form",{onSubmit:function(t){return e.onUpdate(t)}},r.a.createElement("div",{className:"row expiration-date"},r.a.createElement("div",{className:"select ".concat(c!==i?"changed":"")},r.a.createElement("select",{className:"card-exp-month",defaultValue:c,onChange:function(t){return e.setState({expirationMMYY:Mg.createExpirationString(t.target.value,s)})}},ty.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("div",{className:"select ".concat(o&&s!==l?"changed":"")},r.a.createElement("select",{className:"card-exp-year ".concat(o?"":"invalid"),defaultValue:vc.getFourDigitYearFromTwoDigits(s),onChange:function(t){return e.setState({expirationMMYY:Mg.createExpirationString(c,t.target.value)})}},ny.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),o?null:r.a.createElement(yf,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"cvc"},r.a.createElement(Wg,{autoFocus:!0,type:"text",className:"card-cvc ".concat(this.state.cvc.length>0?"changed":""),placeholder:"CVC",value:this.state.cvc,maxLength:"3",onChange:function(t){return e.updateCVC(t.target.value)}}),r.a.createElement("img",{src:Yg.a,alt:"CVC help"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"zip-input"},r.a.createElement(Wg,{maxLength:"5",value:this.state.postalCode,placeholder:"Zip",type:"text",className:this.state.postalCode.length>0?"changed":"",onChange:function(t){return e.updateZipCode(t.target.value)}}))),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{title:n?"Delete Card":"Cannot delete a card linked to recurring payment(s).",disabled:!n,type:"button",className:"button small delete",onClick:function(){return e.onDelete()}},"Delete Card"),r.a.createElement("div",{className:"flex-grow"}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"button small cancel",onClick:function(){return a()}},"Cancel"),r.a.createElement("button",{type:"submit",className:"button small save",disabled:!this.validData(o)},"Update")))))}}]),a}(n.Component);var cy=Object(o.b)(null,function(e){return{update:function(t){e({type:nt,data:t})},delete:function(t){e({type:rt,data:t})}}})(ry);function sy(e){var t=e.brand,a=e.account,n=e.exp,c=e.isEditable,s=e.onEdit,o=e.isEditing,i=e.deletable,l=e.onStopEditing,u=e.id;return r.a.createElement("div",{className:"card ".concat(o?"editing":""," ")},r.a.createElement("div",{className:"card-info"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{className:"card-image",src:Mg.getImage(t),alt:"Credit Card"})),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"account"},"***",a),o?r.a.createElement("div",{className:"exp"}):r.a.createElement("div",{className:"exp ".concat(vc.beforeToday(n)?"expired":"")},"Exp ",n,vc.beforeToday(n)?r.a.createElement(yf,null):null)),c?r.a.createElement(df,{onClick:function(){return s()}}):null),o?r.a.createElement(cy,{deletable:i,isEditing:o,id:u,exp:n,onStopEditing:l}):null)}var oy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={hasFocused:!1,originalPayment:null,payment:null,modal:{active:!1},shouldRedirect:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){var t=window.location.hash.split("/").pop();if(e.scheduledPayments){var a=e.scheduledPayments.scheduled.find(function(e){return e.id.toString()===t});!this.state.originalPayment&&a&&this.setState({originalPayment:Object(On.a)({},a)}),this.setState({payment:e.payment||a})}}},{key:"updateState",value:function(e){this.setState({payment:Object(On.a)(Object(On.a)({},this.state.payment),e)})}},{key:"setNameInput",value:function(e){!this.state.hasFocused&&e&&(this.setState({hasFocused:!0}),e.focus())}},{key:"canUpdate",value:function(e,t){return e&&e.amount&&e.name&&!(e.name===t.name&&parseFloat(e.amount)===parseFloat(t.amount))}},{key:"closeRemoveModal",value:function(){this.setState({modal:{active:!1}})}},{key:"removePaymentClicked",value:function(){this.props.removePayment(this.state.payment),this.closeRemoveModal(),this.setState({shouldRedirect:!0})}},{key:"render",value:function(){var e=this;if(!this.state.payment)return null;if(this.state.shouldRedirect)return r.a.createElement(cp.b,{to:"/payment/history/payments"});var t=this.props.review,a=this.state,n=a.payment,c=a.originalPayment,s=this.canUpdate(n,c);return r.a.createElement("div",{className:"modify recurring"},r.a.createElement(ng,{active:this.state.modal.active,paymentName:this.state.payment.name,cancel:function(){return e.closeRemoveModal()},confirm:function(){return e.removePaymentClicked()}}),r.a.createElement("div",{className:"title-toggle section"},r.a.createElement("h2",{className:"title"},"Modify Recurring Payment")),r.a.createElement(Xg,{name:n.name,updateState:function(t){return e.updateState(t)},inputRef:function(t){return e.setNameInput(t)}}),r.a.createElement(wg,{amount:n.amount,updateState:function(t){return e.updateState(t)}}),r.a.createElement("div",{className:"schedule section visible"},r.a.createElement("h3",null,"Payment Info"),r.a.createElement(sy,n),r.a.createElement("div",{className:"occurrence-text"},"Your recurring payment is scheduled for the"," ",r.a.createElement("span",{className:"date"},n.every," of the month."))),r.a.createElement("div",{className:"tools section"},r.a.createElement("div",{className:"secondary"},r.a.createElement("button",{className:"button delete",onClick:function(){e.setState({modal:{active:!0}})}},"Remove Payment")),r.a.createElement("div",{className:"primary"},r.a.createElement("button",{className:"button cancel",onClick:this.props.cancel},"Cancel"),r.a.createElement("button",{className:"button primary pay",onClick:function(){return t(Object(On.a)(Object(On.a)({},n),{},{selectedCard:n}))},disabled:!s},"Update"))))}}]),a}(n.Component);var iy=Object(o.b)(function(e){return{scheduledPayments:e.scheduledPayments}},function(e,t){return{init:function(){e({type:bt})},removePayment:function(t){e({type:gt,data:t})}}})(oy);function ly(e){var t=e.recurring,a=e.modify;return t?a?r.a.createElement(iy,e):r.a.createElement(ey,e):r.a.createElement(Kg,e)}function uy(e){var t=e.size,a=void 0===t?"half":t,n=e.label,c=e.value;return r.a.createElement("div",{className:a},r.a.createElement("div",{className:"label"},n),r.a.createElement("div",{className:"value"},c))}var my=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(ap.a)(a,[{key:"submit",value:function(){var e=Object(sc.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),!!!this.props.payment.selectedCard.isNewCard){e.next=8;break}return e.next=5,po.processNewCard(this.props.payment);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=po.processExistingCard(this.props.payment);case 9:t=e.t0,this.props.submitOneTimePayment(t);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"details"},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Type",value:"One Time Payment"}),r.a.createElement(uy,{label:"Vanpool ID",value:this.props.vanpool})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Payment Amount",value:"$"+this.props.payment.amount}),r.a.createElement(uy,{label:"Payment Date",value:vc.parseDateAsMonthDayYear(new Date)})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Method",value:"".concat(this.props.method.brand," ").concat(this.props.method.account," - EXP ").concat(this.props.method.exp)})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"cancel button",onClick:this.props.cancel},"Cancel"),r.a.createElement("button",{className:"submit button primary",onClick:function(){return e.submit()},desktopbefore:"I Agree,"},"Submit")))}}]),a}(n.Component);var dy=Object(o.b)(null,function(e,t){return{submitOneTimePayment:function(t){e({type:dt,data:t})}}})(my),py=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(ap.a)(a,[{key:"submit",value:function(){var e=Object(sc.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),!!!this.props.payment.selectedCard.isNewCard){e.next=8;break}return e.next=5,po.processNewCard(this.props.payment);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=po.processExistingCard(this.props.payment);case 9:(t=e.t0).paymentName=this.props.payment.name,this.props.submitRecurringPayment(t);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.vanpool,n=t.payment,c=t.method,s=t.cancel;return r.a.createElement("div",{className:"details"},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Type",value:"Recurring Payment"}),r.a.createElement(uy,{label:"Vanpool ID",value:a})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Name",value:n.name})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Payment Amount",value:"$"+n.amount}),r.a.createElement(uy,{label:"First Scheduled Payment",value:c.next})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Method",value:"".concat(c.brand," ").concat(c.account," - EXP ").concat(c.exp)})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"cancel button",onClick:s},"Cancel"),r.a.createElement("button",{className:"submit button primary",desktopbefore:"I Agree,",onClick:function(){return e.submit()}},"Submit")))}}]),a}(n.Component);var vy=Object(o.b)(null,function(e,t){return{submitRecurringPayment:function(t){e({type:ht,data:t})}}})(py);function hy(e){var t=e.payment,a=e.edit,n=e.recurring,c=t.selectedCard;return r.a.createElement("div",{className:"review"},r.a.createElement("section",{className:"prompt section"},r.a.createElement("h2",{className:"title"},r.a.createElement(Df,null)," Almost There"),r.a.createElement("p",{className:"description"},"Please review your payment details",n?". Your card will be charged on the ".concat(t.selectedCard.every," of every month."):""),r.a.createElement("div",{tabIndex:"0",onClick:a,onKeyPress:function(e){return"Enter"===e.key&&a()},className:"edit"},r.a.createElement(df,null)," Edit Payment")),n?r.a.createElement(vy,Object.assign({className:"review-recurring-details"},e,{method:c})):r.a.createElement(dy,Object.assign({className:"review-one-time-details"},e,{method:c})))}function fy(e){var t=e.recurring,a=e.modify;return t&&a?r.a.createElement(tp.b,{className:"button",to:"/payment/history/payments",desktopbefore:"Back to My"},"Payments"):r.a.createElement(tp.b,{className:"button",to:"/payment",desktopbefore:"Back to"},"Account")}function by(e){var t=e.payment,a=e.vanpool,n=e.transactionId,c=t.selectedCard;return r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Type",value:"One Time Payment"}),r.a.createElement(uy,{label:"Vanpool ID",value:a})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Payment Amount",value:"$"+t.amount}),r.a.createElement(uy,{label:"Payment Date",value:vc.parseDateAsMonthDayYear(new Date)})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Method",value:"".concat(c.brand," ").concat(c.account," - EXP ").concat(c.exp)})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Transaction Number",value:"".concat(n)})))}function Ey(e){var t=e.vanpool,a=e.payment,n=a.selectedCard;return r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Type",value:"Recurring Payment"}),r.a.createElement(uy,{label:"Vanpool ID",value:t})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Name",value:a.name})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{label:"Payment Amount",value:"$"+a.amount}),r.a.createElement(uy,{label:"First Scheduled Payment",value:n.next})),r.a.createElement("div",{className:"row"},r.a.createElement(uy,{size:"full",label:"Payment Method",value:"".concat(n.brand," ").concat(n.account," - EXP ").concat(n.exp)})))}function gy(e){return r.a.createElement("div",{className:"review payment-success"},r.a.createElement("section",null,r.a.createElement("h2",{className:"title"},r.a.createElement(Nf,null)," Thank You!"),r.a.createElement("p",null,"Your payment has been submitted. You can view all of your payments in Payments.")),e.recurring?r.a.createElement(Ey,e):r.a.createElement(by,e),r.a.createElement("div",{className:"tools section"},r.a.createElement(fy,{modify:e.modify,recurring:e.recurring})))}function yy(e){var t=e.edit,a=e.modify,n=e.recurring,c=e.payment;return r.a.createElement("div",{className:"review error-confirmation"},c&&c.isDeclined?r.a.createElement(Oy,null):r.a.createElement(Ny,null),r.a.createElement("div",{className:"tools"},r.a.createElement(fy,{modify:a,recurring:n}),r.a.createElement("button",{className:"button primary",onClick:t},"Try Again")))}function Oy(){return r.a.createElement("section",null,r.a.createElement("h2",{className:"title"},r.a.createElement(yf,null)," Transaction Incomplete!"),r.a.createElement("p",null,r.a.createElement("b",null,"We\u2019re sorry, your payment was declined.")),r.a.createElement("p",null,"If you have any questions, please contact your credit card company or call Enterprise Commute at ",r.a.createElement(up,{phone:"800-VAN-4-WORK"})," for assistance."),r.a.createElement("p",null,"Would you like to try again with a different payment method?"))}function Ny(){return r.a.createElement("section",null,r.a.createElement("h2",{className:"title"},r.a.createElement(yf,null)," Transaction Incomplete!"),r.a.createElement("p",null,r.a.createElement("b",null,"Sorry for the inconvenience.")),r.a.createElement("p",null,"We are experiencing technical difficulties with your payment request. Please call ",r.a.createElement(up,{phone:"800-VAN-4-WORK"})," for assistance."),r.a.createElement("p",null,"Would you like to try again with a different payment method?"))}function ky(e){return e.successful?r.a.createElement(gy,e):r.a.createElement(yy,e)}var jy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={areYouSure:!1,currentStep:1,payment:null},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){e.payment.payment&&2===this.state.currentStep&&this.next()}},{key:"reviewPayment",value:function(e){this.setState({payment:e}),this.next()}},{key:"cancel",value:function(){window.history.length>1?window.history.back():window.location.hash="#/accountSummary"}},{key:"next",value:function(){this.state.currentStep<3&&this.goToStep(this.state.currentStep+1)}},{key:"previous",value:function(){if(this.state.currentStep>1){var e=this.state.payment.selectedCard.isNewCard?qg:this.state.payment.selectedCard;this.setState({payment:Object(On.a)(Object(On.a)({},this.state.payment),{},{cvc:"",selectedCard:Object(On.a)({},e)})}),this.goToStep(this.state.currentStep-1)}}},{key:"goToStep",value:function(e){window.scrollTo(0,0),1===e&&this.props.init(),this.setState({currentStep:e})}},{key:"getDefaultBalanceDue",value:function(){return"N/A"!==this.props.allocationAmount&&this.props.allocationAmount>0?this.props.allocationAmount:"N/A"!==this.props.balanceDue&&this.props.balanceDue>0?this.props.balanceDue:null}},{key:"render",value:function(){var e,t=this,a=window.location.hash.includes("recurring"),n=!window.location.hash.endsWith("recurring"),c=this.getDefaultBalanceDue(),s=a||!c?null:bc.dollarPad(c.toString()),o=this.props.payment.payment&&this.props.payment.payment.success,i=(e={},Object(er.a)(e,1,function(){return r.a.createElement(ly,{initialBalance:s,recurring:a,modify:n,paymentMethods:t.props.payment.cards,payment:t.state.payment,review:function(e){return t.reviewPayment(e)},cancel:function(){return t.setState({areYouSure:!0})}})}),Object(er.a)(e,2,function(){return r.a.createElement(hy,{recurring:a,modify:n,payment:t.state.payment,vanpool:t.props.vanpoolId,cancel:function(){return t.setState({areYouSure:!0})},edit:function(){return t.previous()}})}),Object(er.a)(e,3,function(){return r.a.createElement(ky,{recurring:a,modify:n,edit:function(){return t.goToStep(1)},payment:o?t.state.payment:t.props.payment.payment,vanpool:t.props.vanpoolId,successful:o,transactionId:t.props.payment.payment?t.props.payment.payment.transactionId:null})}),e)[this.state.currentStep]();return r.a.createElement("div",{className:"payment"},r.a.createElement(ag,{title:"Are you sure?",message:"If you cancel, any information you've provided will not be saved. Are you sure you want to cancel?",cancelMessage:"No, Continue",confirmMessage:"Yes, Cancel",cancel:function(){return t.setState({areYouSure:!1})},confirm:this.cancel,active:this.state.areYouSure}),r.a.createElement(Ng,{step:this.state.currentStep,recurring:a,modify:n}),i,r.a.createElement(JE,null))}}]),a}(n.Component);var Cy=Object(o.b)(function(e){return{payment:e.payments,vanpoolId:e.vanpoolInfo.vanpoolId,balanceDue:e.dashboardPaymentSummary.currentBalance,allocationAmount:e.paymentManagement.amount}},function(e,t){return{init:function(){e({type:st}),e({type:qe}),e({type:vt}),Mg.retrieveSchedule(),!Ds([Hs])&&Ds([Ms,Us,qs])&&e({type:ma}),!Ds([Hs])&&Ds([Vs])&&e({type:fa})}}})(jy),xy=function(e){return e&&e.focus()},Sy=function(e){var t="";if(!e)return t;for(var a=0;a<e.length;a++)e.charCodeAt(a)<128&&(t+=e[a]);return t};function Dy(e){var t=e.value,a=void 0===t?"":t,n=e.placeholder,c=e.maxLength,s=e.onChange,o=e.rows,i=void 0===o?1:o,l=e.autoFocus,u=c-a.length,m=u<20?r.a.createElement("span",{className:"overflowed"},u):null;return r.a.createElement("div",{className:"editor-wrapper"},r.a.createElement("textarea",{onChange:function(e){return e.target.value.length<=c&&s(Sy(e.target.value))},value:a,rows:i,maxLength:c,placeholder:n,className:i>1?"textarea-editor":"textbox",ref:l&&xy}),r.a.createElement("div",{className:"editor-counter"},m))}function Ay(e){var t=e.name,a=e.roles,n=e.selected,c=e.amount,s=e.commenting,o=e.comments,i=e.toggleSelected,l=e.onChange,u=e.toggleComment,m=e.updateComments;return r.a.createElement("div",{className:"participant ".concat(s?"expand":"")},r.a.createElement("button",{className:"selected ".concat(n?"chosen":""),onClick:i},n?r.a.createElement(jf,null):r.a.createElement(kf,null)),r.a.createElement(NE,null,t),r.a.createElement("div",{className:"credentials"},r.a.createElement("div",{className:"name"},t),"Rider"!==a?r.a.createElement("div",{className:"roles"},a):null),r.a.createElement(Ag,{value:c,onChange:l,className:"amount",disabled:!n}),r.a.createElement("button",{className:"comment-toggle ".concat(s?"chosen":""),onClick:u,disabled:!n},s?r.a.createElement(ob,null):r.a.createElement(sb,null)),s?r.a.createElement(Dy,{maxLength:500,rows:2,autoFocus:!0,value:o,onChange:function(e){return m(e)},placeholder:"Comments to individual..."}):null)}var wy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={roster:[],splitValue:"0.00",comments:"",loading:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(),this.initialize(this.props.roster,this.props.balance,this.props.billed)}},{key:"componentWillReceiveProps",value:function(e){(this.changed(e,"billed")||this.changed(e,"roster")||this.changed(e,"balance"))&&this.initialize(e.roster,e.balance,e.billed)}},{key:"changed",value:function(e,t){return e[t]!==this.props[t]}},{key:"initialize",value:function(e,t,a){if(t.currentBalance===kn||!e.length||isNaN(a))return null;this.setState({splitValue:"0.00",comments:"",loading:!1}),this.makeRoster(e)}},{key:"makeRoster",value:function(e){var t=e.map(function(e){return{key:e.id,name:e.name,roles:e.roleName,amount:"0.00",selected:!0,commenting:!1,comments:""}});return this.setState({roster:t}),t}},{key:"split",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.roster,a=t.reduce(function(e,t){return e+t.selected},0),n=Math.floor(100*e/a)/100,r=[n+(e-n*a)].concat(Array(a-1).fill(n));this.setState({roster:t.map(function(e,t){return Object(On.a)(Object(On.a)({},e),{},{amount:e.selected?bc.dollarPad(r.shift().toString()):e.amount})})})}},{key:"determineCurrencyFontSize",value:function(e){var t=bc.formatUSD(e.currentBalance).length;return t>11?"small-font amount":t>9?"medium-font amount":"amount"}},{key:"updateParticipantAmount",value:function(e,t){var a=this.state.roster;this.setState({roster:a.map(function(a){return a.key!==e.key?a:Object(On.a)(Object(On.a)({},e),{},{amount:t})})})}},{key:"updateParticipantSelected",value:function(e){var t=this.state.roster;this.setState({roster:t.map(function(t){return t.key!==e.key?t:Object(On.a)(Object(On.a)({},e),{},{selected:!e.selected,commenting:!e.selected&&e.commenting,amount:e.selected?"0.00":e.amount,comments:e.selected?"":e.comments})})})}},{key:"updateParticipantCommenting",value:function(e){var t=this.state.roster;this.setState({roster:t.map(function(t){return t.key!==e.key?t:Object(On.a)(Object(On.a)({},e),{},{commenting:!e.commenting,comments:""})})})}},{key:"updateParticipantComments",value:function(e,t){var a=this.state.roster;this.setState({roster:a.map(function(a){return a.key!==e.key?a:Object(On.a)(Object(On.a)({},e),{},{comments:t})})})}},{key:"selectAll",value:function(){var e=this.state.roster;this.setState({roster:e.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{selected:!0})})})}},{key:"unselectAll",value:function(){var e=this.state.roster;this.setState({roster:e.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{selected:!1,commenting:!1,amount:"0.00",comments:""})})})}},{key:"request",value:function(e){this.setState({loading:!0});for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];e.apply(void 0,a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.roster,n=t.splitValue,c=t.comments,s=t.loading,o=this.props,i=o.balance,l=o.credit,u=o.request,m=o.billed,d=o.lastBilled;if(s)return r.a.createElement(mp,{isLoading:!0});var p=a.every(function(e){return e.selected}),v=a.every(function(e){return!e.selected}),h=parseFloat(n)>0,f=this.state.roster.reduce(function(e,t){return e+(parseFloat(t.amount)||0)},0);return r.a.createElement("div",{className:"payment-management"},r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"amounts"},r.a.createElement("div",{className:"current"},r.a.createElement("div",{className:"label"},"Current Balance"),r.a.createElement("div",{className:this.determineCurrencyFontSize(i)},i.currentAccountBalance)),r.a.createElement("div",{className:"billed"},r.a.createElement("div",{className:"label"},"Billed Amount"),r.a.createElement("div",{className:this.determineCurrencyFontSize(2500)},bc.formatUSD(m)))),r.a.createElement("div",{className:"last-updated"},d?r.a.createElement("div",{className:"date"},"Last Updated ",vc.parseFormalDate(d)):null,r.a.createElement("div",null,"Billed Amount resets on the 20th of the month")),r.a.createElement("div",{className:"title"},"Commute Calculator")),r.a.createElement("div",{className:"split-container"},r.a.createElement("div",{className:"select-all"},r.a.createElement("button",{className:"selected ".concat(p?"chosen":""),onClick:function(){return p?e.unselectAll():e.selectAll()}},p?r.a.createElement(jf,null):r.a.createElement(kf,null)),r.a.createElement("span",{desktopbefore:"Select"},"All")),r.a.createElement("div",{className:"split"},r.a.createElement("div",{className:"label"},"Split Amount"),r.a.createElement(Ag,{className:"amount",value:n,onKeyDown:function(t){return"Enter"===t.key&&e.split(parseFloat(n))},onChange:function(t){return e.setState({splitValue:t})},disabled:v}),r.a.createElement("button",{className:"button primary",disabled:!h||v,onClick:function(){return e.split(parseFloat(n))}},"Split"))),r.a.createElement("div",{className:"participants"},this.state.roster.map(function(t){return r.a.createElement(Ay,Object.assign({},t,{toggleSelected:function(){return e.updateParticipantSelected(t)},onChange:function(a){return e.updateParticipantAmount(t,a)},toggleComment:function(){return e.updateParticipantCommenting(t)},updateComments:function(a){return e.updateParticipantComments(t,a)}}))})),r.a.createElement("div",{className:"total"},r.a.createElement("div",{className:"label"},"Total Amount"),r.a.createElement("div",{className:"value"},bc.formatUSD(f))),r.a.createElement("div",{className:"vanpool comments"},r.a.createElement(Dy,{value:c,onChange:function(t){return e.setState({comments:t})},maxLength:500,placeholder:"Comments to all commuters (Optional)",rows:3})),r.a.createElement("div",{className:"actions"},r.a.createElement("div",{className:"tools"},r.a.createElement("button",{onClick:function(){return e.request(l,a,f,c)},disabled:!f,className:"credit button"},"Credit"),r.a.createElement("button",{onClick:function(){return e.request(u,a,f,c)},disabled:!f,className:"request button primary"},"Request")),r.a.createElement("div",{className:"note"},r.a.createElement("div",null,r.a.createElement("b",null,"Credit")," - credit each participant's account with the amount allocated to them."),r.a.createElement("div",null,r.a.createElement("b",null,"Request")," - request that each participant pay the amount allocated to them."))))}}]),a}(n.Component);var Ty=Object(o.b)(function(e){return{roster:e.roster.participants,balance:e.dashboardPaymentSummary,billed:e.paymentManagement.billed,lastBilled:e.paymentManagement.lastBilled}},function(e){return{init:function(){e({type:Ie}),e({type:ma}),e({type:pa})},request:function(t,a,n){e({type:ha,data:{mode:"request",roster:t,total:a,comments:n}})},credit:function(t,a,n){e({type:ha,data:{mode:"credit",roster:t,total:a,comments:n}})}}})(wy);function Py(e){var t=e.month;return t?r.a.createElement("div",{className:"etable-heading toggle monthly-charges"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-head current-month"},r.a.createElement(ff,{className:"angle-down-button"})," ","".concat(vc.monthNameFromIndex(t.activityMonth)," ").concat(t.activityYear)," "),r.a.createElement("div",{className:"etable-head total"},bc.formatUSD(t.monthTotalAmount))))):r.a.createElement("div",null)}function Iy(e){var t=e.transactions;return t?r.a.createElement("div",null,r.a.createElement("div",{className:"etable-body fuel-card-charges-table"},0===t.length?r.a.createElement("p",{className:"note no-recent-activity"},"No Fuel Card Data Available"):t.map(function(e,t){return r.a.createElement("div",{className:"etable-row",key:"".concat(e.authorizationCode,"_").concat(t)},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-cell spacer"}),r.a.createElement("div",{className:"etable-cell fc-activity-date"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Act. Date:\xa0"),r.a.createElement("span",null,e.activityDate))),r.a.createElement("div",{className:"etable-cell merchant"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Merchant:\xa0"),r.a.createElement("span",null,e.merchantName))),r.a.createElement("div",{className:"etable-cell auth-num"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Auth #:\xa0"),r.a.createElement("span",null,e.authorizationCode))),r.a.createElement("div",{className:"etable-cell gallons"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Gallons:\xa0"),r.a.createElement("span",null,"".concat(e.numberOfGallons?e.numberOfGallons+" gal":"N/A")))),r.a.createElement("div",{className:"etable-cell amount right"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Amount:\xa0"),r.a.createElement("span",null,bc.formatUSD(e.amount))))))}))):r.a.createElement("div",null)}var My=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"".concat(nr.imagePath,"/wex-logo.png"),alt:"Wex Card"})),r.a.createElement("div",{className:"etable card-summary-table"},r.a.createElement("div",{className:"etable-body"},r.a.createElement("div",{className:"etable-row header-labels"},r.a.createElement("div",{className:"etable-header fc-service-month"},"Month"),r.a.createElement("div",{className:"etable-header fc-activity-date"},"Activity Date"),r.a.createElement("div",{className:"etable-header merchant"},"Merchant"),r.a.createElement("div",{className:"etable-header auth-num"},"Authorization Number"),r.a.createElement("div",{className:"etable-header gallons"},"Gallons"),r.a.createElement("div",{className:"etable-header right"},"Amount")),this.props.tableData?this.props.tableData.map(function(e,t){return r.a.createElement(VE.a,{trigger:r.a.createElement(Py,{month:e}),tabIndex:t,key:e.activityMonth,open:0===t},r.a.createElement(Iy,{transactions:e.transactions}))}):null)))}}]),a}(n.Component),Ry=Object(o.b)(function(e){return{tableData:e.fuelCardPayment.summary.fuelActivities}},function(e){return{init:function(){e({type:Ra})}}})(My),_y=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={cardInfoLoading:!1,fuelCardDetails:null,cardStatus:null,cardInfoLoaded:!0,cardNumber:"",pin:"",resetPin:"",reset:!1,resetting:!1,apiEncounteredError:!1},n.activateCard=n.activateCard.bind(Object(bp.a)(n)),n.resetPin=n.resetPin.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){Ds([zs,Ks])&&(this.props.init(),this.setState({cardInfoLoading:!0,cardInfoLoaded:!1}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.fuelCardPayment.activeFuelCardDetails,a=e.fuelCardPayment.pinReset,n=e.fuelCardPayment.apiEncounteredError,r=t.cardStatus;switch(r){case"Active":case"InActive":this.setState({fuelCardDetails:t,cardStatus:r,cardInfoLoaded:!0,cardInfoLoading:!1,cardNumber:t.partialCardNumber});break;case"Pending":this.setState({fuelCardDetails:t,cardStatus:r,cardInfoLoaded:!0,cardInfoLoading:!1});break;default:this.setState({fuelCardDetails:t,cardStatus:r,cardInfoLoaded:!0,cardInfoLoading:!1})}a&&(!0===this.state.resetting&&this.setState({resetting:!1}),a=!1),n&&this.state.cardInfoLoading?this.setState({cardInfoLoading:!1}):n&&this.state.resetting&&this.setState({resetting:!1}),n=!1}},{key:"activateCard",value:function(){var e={cardNumber:this.props.fuelCardPayment.number,pinNumber:this.state.pin};this.props.activateCard(e),this.setState({pin:"",cardInfoLoading:!0})}},{key:"resetPin",value:function(){var e={pinNumber:this.state.resetPin};this.props.resetCardPin(e),this.setState({reset:!1,resetPin:"",resetting:!0})}},{key:"isValidNumber",value:function(e){return!e.length||/^([0-9]\d*)?$/.test(e)}},{key:"isValidpin",value:function(e){return/[0-9]{4}/.test(e)}},{key:"render",value:function(){var e=this,t=this.state.cardNumber?"*".repeat(14).concat(this.state.cardNumber):null,a=Ds([zs]),n=Ds([Ks]);return r.a.createElement("div",{className:"fuel-card-page"},r.a.createElement(mp,{isLoading:this.state.cardInfoLoading||this.state.resetting}),r.a.createElement(YE,null),r.a.createElement("p",{id:"as-of-date-time"},"Fuel Card - Last Updated"," ",r.a.createElement("span",{className:"fuel-card-date"},this.props.fuelCardPayment.summary.wexFilelastImportedDate)),r.a.createElement(GE,null),r.a.createElement("div",{className:"qnav"},r.a.createElement(tp.c,{activeClassName:"active",id:"card-summary-link",exact:!0,to:"/payment/fuel"},"Card Summary"),Ds([Us,Ms])?r.a.createElement(tp.c,{activeClassName:"active",id:"card-activated-link",exact:!0,to:"/payment/fuel/activated"},n?"Activate Card":"Card Activated"):null),r.a.createElement(cp.e,null,r.a.createElement(cp.c,{path:"/payment/fuel",exact:!0,render:function(){return n?r.a.createElement("div",{className:"card-pending"},r.a.createElement("h4",null,"Your Commute fuel card has not been activated."),r.a.createElement("p",null,"Please"," ",r.a.createElement(tp.b,{to:"/payment/fuel/activated"},"activate your card")," ","or for assistance call ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),".")):r.a.createElement(Ry,null)}}),Ds([Us,Ms])?r.a.createElement(cp.c,{path:"/payment/fuel/activated",exact:!0,render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"".concat(nr.imagePath,"/wex-logo.png"),alt:"Wex Card"})),n?r.a.createElement("div",{className:"activate-the-card"},r.a.createElement("div",null,r.a.createElement("h1",null,"Activate Your Card"),r.a.createElement("span",{style:{paddingBottom:"2rem"}},"To activate your Commute fuel card, enter the account number from the front of your card.")),r.a.createElement("div",{className:"card-input"},r.a.createElement("div",{className:"input-box"},r.a.createElement(Wg,{type:"text",className:"fuel-card-input",autoFocus:!0,label:"Account Number",maxLength:"18",value:e.props.fuelCardPayment.number,onChange:function(t){return e.isValidNumber(t.target.value)&&e.props.updateNumber(t.target.value)}}),e.isValidNumber(e.props.fuelCardPayment.number)&&18===e.props.fuelCardPayment.number.length?r.a.createElement("span",{className:"active-card"},r.a.createElement(Of,{focusable:"false"})):null,isNaN(e.props.fuelCardPayment.number)&&e.props.fuelCardPayment.number.length<18?r.a.createElement("span",{className:"error-text"},"Invalid fuel card account number, please try again."):null,r.a.createElement("br",null)),r.a.createElement("div",{className:"input-info"},"Numbers only. No Spaces or Dashes.")),r.a.createElement("div",{className:"pin-input"},r.a.createElement("div",null,"Create a four-digit PIN for your card."),r.a.createElement("br",null),r.a.createElement("div",{className:"input-box"},r.a.createElement(Wg,{type:"text",className:"fuel-card-pin",label:"PIN Number",maxLength:"4",value:e.state.pin,onChange:function(t){return e.isValidNumber(t.target.value)&&e.setState({pin:t.target.value})}}),e.isValidpin(e.state.pin)?r.a.createElement("span",{className:"active-card"},r.a.createElement(Of,{focusable:"false"})):null,r.a.createElement("br",null)),r.a.createElement("div",{className:"input-info"},"The PIN must be numbers only.")),r.a.createElement("div",null,r.a.createElement("button",{className:"primary button",disabled:!e.isValidNumber(e.props.fuelCardPayment.number)||18!==e.props.fuelCardPayment.number.length||!e.isValidpin(e.state.pin),onClick:e.activateCard},"Activate Card"))):null,a?r.a.createElement("div",{className:"active-card"},r.a.createElement("div",null,r.a.createElement("h1",null,"Card Activated"),r.a.createElement("span",{style:{paddingBottom:"2rem"}},"Your Commute fuel card is active.")),r.a.createElement("div",{className:"card-input"},r.a.createElement("div",{className:"input-box"},r.a.createElement(Wg,{type:"text",className:"fuel-card-input",label:"Account Number",maxLength:"18",value:t||"",readOnly:!0}),r.a.createElement("span",{className:"active-card"},r.a.createElement(Of,{focusable:"false"})),isNaN(e.props.fuelCardPayment.number)&&e.props.fuelCardPayment.number.length<18?r.a.createElement("span",{className:"error-text"},"Invalid fuel card account number, please try again."):null,r.a.createElement("br",null))),e.state.reset?r.a.createElement("div",null,r.a.createElement("div",{className:"pin-input"},r.a.createElement("div",null,"Create a four-digit PIN for your card."),r.a.createElement("br",null),r.a.createElement("div",{className:"input-box"},r.a.createElement(Wg,{type:"text",className:"fuel-card-pin",autoFocus:!0,label:"PIN Number",maxLength:"4",value:e.state.resetPin,onChange:function(t){return e.isValidNumber(t.target.value)&&e.setState({resetPin:t.target.value})}}),e.isValidpin(e.state.resetPin)?r.a.createElement("span",{className:"active-card"},r.a.createElement(Of,{focusable:"false"})):null,r.a.createElement("br",null)),r.a.createElement("div",{className:"input-info"},"The PIN must be numbers only.")),r.a.createElement("div",null,r.a.createElement("button",{className:"primary button",value:"",disabled:!e.isValidNumber(e.props.fuelCardPayment.number)||!e.isValidpin(e.state.resetPin),onClick:e.resetPin},"Reset Pin"))):e.state.fuelCardDetails&&e.state.fuelCardDetails.isResetPinAllowed?r.a.createElement("div",{className:"reset-pin"},r.a.createElement("button",{className:"reset-pin-link",onClick:function(){return e.setState({reset:!0})},rel:"noopener noreferrer"},"Reset PIN Number")):null):null)}}):null),r.a.createElement("div",{className:"note call"},"For assistance with your Commute fuel card, call"," ",r.a.createElement(up,{phone:"800 VAN 4 WORK"})))}}]),a}(n.Component);var Ly=Object(o.b)(function(e){return{fuelCardPayment:e.fuelCardPayment}},function(e,t){return{init:function(){e({type:Ra}),e({type:Ia})},activateCard:function(t){e({type:La,payload:t})},resetCardPin:function(t){e({type:Va,payload:t})},updateNumber:function(t){e({type:Fa,payload:t})},updatePin:function(t){e({type:Ba,payload:t})},updateResetPin:function(t){e({type:Ya,payload:t})}}})(_y);function Uy(){return r.a.createElement("div",{className:"tnav-tray"},r.a.createElement("div",{className:"tnav"},r.a.createElement("ul",null,Ds([Ms,qs])&&!As([Hs])?r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"summary-link",exact:!0,to:"/payment"},"Monthly ",r.a.createElement("span",null,"Summary"))):null,Ds([Ms,qs])&&!As([Hs])?r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"invoices-link",exact:!0,to:"/payment/history/invoices"},"Invoices")):null,r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"payments-link",exact:!0,to:"/payment/history/payments"},r.a.createElement("span",null,"My Payment")," History")),Ds([Us,Ms,Vs])&&Ds([zs,Ks])&&!Ds([Js])?r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"fuel-link",to:"/payment/fuel"},"Fuel ",r.a.createElement("span",null,"Card"))):null,!Ds([Ms,qs])||As([Hs])?r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"paynow-link",exact:!0,to:"/payment/pay"},"Pay Now")):r.a.createElement("li",null,r.a.createElement(tp.c,{className:"button",activeClassName:"active",id:"bill-link",exact:!0,to:"/payment/manage"},"Bill ",r.a.createElement("span",null,"Commute"))))))}function Vy(e){var t=e.name,a=e.children;return nr.toggleFeatures[t]?a:null}function Fy(e,t){return[].concat(Object(Wn.a)(e),Object(Wn.a)(t.filter(function(t){return!e.includes(t)})))}var By=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={activeDays:[]},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.setState({activeDays:Fy(this.props.days,this.props.participantDays)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({activeDays:Fy(e.days,e.participantDays)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.save,n=t.cancel,c=t.participantDays,s=this.state.activeDays;return r.a.createElement("div",{className:"days-editor"},r.a.createElement("p",{className:"instructions"},"What days will the routes be traveled?"),r.a.createElement(Fb,{value:this.state.activeDays,notAllowed:c,onChange:function(t){return e.setState({activeDays:t})}}),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"button small cancel",onClick:n},"Cancel"),r.a.createElement("button",{className:"button small save",onClick:function(){return a(s)}},"Save")))}}]),a}(n.Component);function Yy(e){var t=e.days,a=e.edit,n=e.editable;return r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"note"},"Active Commute Days"),r.a.createElement("div",{className:"days"},r.a.createElement("div",{className:"route-days"},t.map(function(e){return e.substr(0,3)}).join(", ")),n?r.a.createElement(df,{onClick:a}):null))}var Wy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1},n}return Object(ap.a)(a,[{key:"toggleMyEdit",value:function(){this.props.toggleEdit(),this.setState({editing:!this.state.editing})}},{key:"save",value:function(e){this.props.onChange(e),this.toggleMyEdit()}},{key:"render",value:function(){var e=this,t=this.props,a=t.days,n=t.participantDays,c=t.editable;return this.state.editing?r.a.createElement(By,{days:a,participantDays:n,save:function(t){return e.save(t)},cancel:function(){return e.toggleMyEdit()}}):r.a.createElement(Yy,{days:a,edit:function(){return e.toggleMyEdit()},editable:c})}}]),a}(n.Component),Hy={calculateTimesBasedOnDeparture:function(e,t,a){for(var n=Object(Wn.a)(e),r=0;r<=a.length;r++)n[r]=Object(On.a)(Object(On.a)({},e[r]),{},{stopTime:t}),t=vc.shiftBySeconds(t,a[r]+60*e[r].waitTime);return n},calculateTimesBasedOnArrival:function(e,t,a){for(var n=Object(Wn.a)(e),r=[{}].concat(Object(Wn.a)(e)),c=(a=a.map(function(e){return-e})).length;c>=0;c--)n[c]=Object(On.a)(Object(On.a)({},e[c]),{},{stopTime:t}),t=vc.shiftBySeconds(t,a[c-1]-60*r[c].waitTime);return n}},Gy=Hy,qy=a(174);function zy(e){var t=e.index,a=e.lastStopIndex,n=e.waitTime,c=e.updateWaitTime,s=e.changed;return r.a.createElement("div",{className:"wait-time-container"},t!==a&&0!==t?r.a.createElement("div",{className:"wait-time"},r.a.createElement("div",{className:"select ".concat(s?"changed":"")},r.a.createElement(Ff,null),r.a.createElement("select",{value:n,id:"wait-time-".concat(t),onChange:function(e){return c(t,parseInt(e.target.value,10))}},r.a.createElement("option",{value:0},"No wait"),r.a.createElement("option",{value:5},"5 min"),r.a.createElement("option",{value:10},"10 min"),r.a.createElement("option",{value:15},"15 min"),r.a.createElement("option",{value:30},"30 min"),r.a.createElement("option",{value:45},"45 min"),r.a.createElement("option",{value:60},"1 hour")))):null)}var Ky=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={waitTime:e.waitTime,original:e.waitTime},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.setState({waitTime:this.props.waitTime,original:this.props.waitTime})}},{key:"componentWillReceiveProps",value:function(e){this.setState({waitTime:e.waitTime})}},{key:"render",value:function(){return r.a.createElement(zy,Object.assign({},this.props,{changed:this.state.original!==this.state.waitTime}))}}]),a}(n.Component),Jy=function(e){var t=e.dragHandleProps,a=e.active,n=e.index,c=e.stop,s=e.existingAddresses,o=e.totalFilteredStops,i=e.autoFocusStop,l=e.removeStop,u=e.updateStop,m=e.updateWaitTime,d=o-1;return r.a.createElement("div",{className:"stop-editor ".concat(a?"active":"")},r.a.createElement("div",{className:"stop-editor-container"},r.a.createElement("div",Object.assign({},t,{className:"drag-handle"}),r.a.createElement(zf,null)),r.a.createElement("div",{className:"editor"},r.a.createElement(Lb,{placeholder:"Address (Required)",className:"addr-edit",value:xb.format(c),autoFocus:c.stopOrder===i,onChange:function(e){return u(n,e)},existingAddresses:s})),r.a.createElement("div",{className:"delete"},o>2&&c.canDelete?r.a.createElement("button",{onClick:function(){return l(n)}},r.a.createElement(gf,null)):null)),r.a.createElement("div",{className:"footer-container"},r.a.createElement(Ky,{waitTime:c.waitTime,index:n,lastStopIndex:d,updateWaitTime:m}),r.a.createElement("div",{className:"participants"},r.a.createElement("div",{className:"user-icon"},r.a.createElement(Af,null)),r.a.createElement("div",null,c.participantCount?c.participantCount:0))))},Qy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={items:[]},n.onDragEnd=n.onDragEnd.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.setState({items:this.props.stops})}},{key:"componentWillReceiveProps",value:function(e){this.setState({items:e.stops})}},{key:"onDragEnd",value:function(e){e.destination&&this.props.reorder(e.source.index,e.destination.index)}},{key:"render",value:function(){var e=this;return r.a.createElement(qy.a,{onDragEnd:this.onDragEnd},r.a.createElement(qy.c,{droppableId:"droppable"},function(t,a){return r.a.createElement("div",{ref:t.innerRef,className:"droppable-stop-list"},e.state.items.map(function(t,a){return r.a.createElement(qy.b,{key:t.stopOrder+""+t.isDelete,draggableId:t.stopOrder+""+t.isDelete,index:a},function(n,c){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps),r.a.createElement(Jy,Object.assign({active:c.isDragging,dragHandleProps:n.dragHandleProps,autoFocusStop:e.props.autoFocusStop,stop:t,index:a,totalFilteredStops:e.state.items.length},e.props)))})}),t.placeholder)}))}}]),a}(n.Component),Xy=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;if(Object(Nc.a)(this,a),n=t.call(this,e),e.stops.length){var r=e.stops[0].stopTime,c=n.activeStops(e.stops).pop().stopTime;n.state={stops:e.stops,time:"Work"===e.route?c:r}}else n.state={stops:e.stops||[],time:"00:00:00"};return n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){if(this.setState({stops:this.props.stops}),this.props.stops.length){var e=this.props.stops[0].stopTime,t=this.activeStops(this.props.stops).pop().stopTime;this.setState({time:"Work"===this.props.route?t:e})}}},{key:"updateStop",value:function(e,t){var a=this.state.stops.map(function(a,n){return n===e?Object(On.a)(Object(On.a)({},a),t):a});this.update(a)}},{key:"updateWaitTime",value:function(e,t){var a=this.state.stops.map(function(a,n){return n===e?Object(On.a)(Object(On.a)({},a),{},{waitTime:t}):a});this.update(a)}},{key:"removeStop",value:function(e){var t=this.activeStops(),a=this.deletedStops(),n=t[e];""===n.routePointId?t=t.filter(function(t,a){return a!==e}):(n.isDelete=!0,a=this.deletedStops(),(t=this.activeStops().map(function(e,t){return Object(On.a)(Object(On.a)({},e),{},{stopOrder:t})}))[t.length-1].stopOrder=-1),this.update([].concat(Object(Wn.a)(t),Object(Wn.a)(a)))}},{key:"addStop",value:function(){var e=this.activeStops(),t=e.pop(),a=e.pop(),n={routePointId:"",description:"",address:"",stopTime:vc.nextMinute(a.stopTime),waitTime:0,canDelete:!0,isDelete:!1,stopOrder:e.length+1};this.autoFocusStop=n.stopOrder;var r=[].concat(Object(Wn.a)(e),[a,n,t],Object(Wn.a)(this.deletedStops()));this.update(r)}},{key:"activeStops",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.stops).filter(function(e){return!e.isDelete})}},{key:"deletedStops",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.stops).filter(function(e){return e.isDelete})}},{key:"updateTime",value:function(e){e&&this.setState({time:e})}},{key:"reorder",value:function(e,t){var a=Object(Wn.a)(this.state.stops),n=a.splice(e,1),r=Object(hc.a)(n,1)[0];a.splice(t,0,r),a.forEach(function(e,t){e.isDelete||(e.stopOrder=!a[t+1]||a[t+1].isDelete?-1:t)}),this.update(a)}},{key:"update",value:function(e){this.setState({stops:e}),this.props.setDirections(this.activeStops(e))}},{key:"invalidState",value:function(){return!this.state.stops.every(function(e){return e.isDelete||e.address&&e.description})}},{key:"save",value:function(){var e=this.state.stops.map(function(e){return(0!==e.stopOrder||e.isDelete)&&(-1!==e.stopOrder||e.isDelete)?e:Object(On.a)(Object(On.a)({},e),{},{waitTime:0})});e="Work"===this.props.route?Gy.calculateTimesBasedOnArrival(e,this.state.time,this.props.durations):Gy.calculateTimesBasedOnDeparture(e,this.state.time,this.props.durations),this.props.save(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.cancel,n=t.route,c="Work"===n?"Arrival":"Departure",s=this.state,o=s.stops,i=s.time,l=o.map(function(e){return e.address}),u=o.filter(function(e){return!e.isDelete});return r.a.createElement("div",{className:"route-editor"},r.a.createElement("h3",null,"Editing ",n," Route"),r.a.createElement("div",{className:"time"},r.a.createElement("span",{className:"time-label"},c," time"),r.a.createElement(Bb,{value:i,onSelected:function(t){return e.updateTime(t)}})),r.a.createElement("p",{className:"rider-message"},"Route points with riders can not be deleted."),r.a.createElement(Qy,{autoFocusStop:this.autoFocusStop,stops:u,existingAddresses:l,reorder:function(){return e.reorder.apply(e,arguments)},removeStop:function(){return e.removeStop.apply(e,arguments)},updateStop:function(){return e.updateStop.apply(e,arguments)},updateWaitTime:function(){return e.updateWaitTime.apply(e,arguments)}}),r.a.createElement("p",{tabIndex:0,className:"add-route-point",onClick:function(){return e.addStop()}},r.a.createElement(Vf,null),r.a.createElement("span",null,"Add Route Point")),r.a.createElement("div",{className:"sticky-footer"},r.a.createElement("p",{className:"form-buttons"},r.a.createElement("input",{id:"cancel",type:"button",value:"Cancel",onClick:a}),r.a.createElement("input",{id:"save",type:"submit",value:"Save",disabled:this.invalidState(),onClick:function(){return e.save()}})),r.a.createElement(JE,null)))}}]),a}(n.Component);var $y=Object(o.b)(function(e){return{durations:e.map.durations}},function(e,t){return{setDirections:function(t){e({type:Fe,data:t})}}})(Xy);function Zy(e){var t=e.stops,a=e.edit,n=e.editable;return r.a.createElement("div",{className:"stops"},n?r.a.createElement("div",{className:"right"},r.a.createElement(df,{onClick:a,className:"edit-icon"})):null,r.a.createElement("div",{className:"route"},t.map(eO)))}function eO(e,t,a){var n="A".charCodeAt(),c=a.length-1===t;return r.a.createElement("div",{className:"route-stop",key:t},r.a.createElement("div",{className:"stop-time"},r.a.createElement("div",{className:"clock",label:String.fromCharCode(t+n)},vc.parseTimeAsTimeOnly(e.stopTime)," ",r.a.createElement("span",null,vc.parseTimeAsAmPm(e.stopTime)))),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"stop-desc"},e.description),r.a.createElement("div",{className:"stop-addr"},e.address),r.a.createElement("div",{className:"footer-container"},c?r.a.createElement("div",{className:"wait-time-container"}):r.a.createElement("div",{className:"wait-time-container"},r.a.createElement(Ff,null),r.a.createElement("div",{className:"wait-time"},function(e,t){return!(!e&&0!==t.waitTime)}(c,e)?"No wait":"".concat(e.waitTime,"min wait"))),r.a.createElement("div",{className:"participants"},r.a.createElement("div",{className:"user-icon"},r.a.createElement(Af,null)),r.a.createElement("div",null,e.participantCount?e.participantCount:0)))))}var tO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1},n}return Object(ap.a)(a,[{key:"toggleMyEdit",value:function(){this.props.toggleEdit(),this.setState({editing:!this.state.editing})}},{key:"save",value:function(e){this.props.onChange(e),this.toggleMyEdit()}},{key:"render",value:function(){var e=this,t=this.props,a=t.stops,n=t.editable,c=t.route,s=JSON.parse(JSON.stringify(a));return this.state.editing?r.a.createElement($y,{stops:s,route:c,save:function(t){return e.save(t)},cancel:function(){return e.toggleMyEdit()}}):r.a.createElement(Zy,{stops:s,edit:function(){return e.toggleMyEdit()},editable:n})}}]),a}(n.Component),aO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1,showRoute:"outboundRoutePoints",saving:!1,promptSwitch:!1,switchTabs:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(),this.props.setDirections([])}},{key:"componentWillReceiveProps",value:function(e){window.scrollTo(0,0),e.route.runDays.length&&(this.state.saving||this.props.route!==e.route)&&(this.setState({saving:!1,promptSwitch:this.state.willPrompt,willPrompt:!1}),this.props.setDirections(e.route[this.state.showRoute]))}},{key:"switchAndEdit",value:function(){var e=this;this.setState({promptSwitch:!1,showRoute:"outboundRoutePoints"===this.state.showRoute?"inboundRoutePoints":"outboundRoutePoints"},function(){return e.display.toggleMyEdit()})}},{key:"update",value:function(e,t,a){this.setState({saving:!0,promptSwitch:!1,willPrompt:a}),this.props.save(Object(On.a)(Object(On.a)({},this.props.route),{},Object(er.a)({},e,t)))}},{key:"toggleEdit",value:function(){this.setState({editing:!this.state.editing}),this.props.setDirections(this.props.route[this.state.showRoute])}},{key:"showRoute",value:function(e){this.setState({showRoute:e}),this.props.setDirections(this.props.route[e])}},{key:"render",value:function(){var e=this,t=this.props.route,a=t.runDays,n=t.participantRideDays,c=t.estimatedFuelSavingsGallons,s=t.estimatedFuelSavingsDollars,o="outboundRoutePoints"===this.state.showRoute,i="inboundRoutePoints"===this.state.showRoute,l=o?this.props.route.outboundRouteDuration:this.props.route.inboundRouteDuration,u=this.props.route[this.state.showRoute],m=Ds([Fs,qs,Us])&&!this.state.editing,d=this.state.promptSwitch;return r.a.createElement(Vy,{name:"vanpoolRoute"},r.a.createElement(ag,{active:!!d,title:"Route Updated",message:"Your route has been updated. However, changes will NOT be applied to the opposite route unless you make the changes. Would you like to update the opposite route?",confirmMessage:"Yes",confirm:function(){return e.switchAndEdit()},cancelMessage:"No",cancel:function(){return e.setState({promptSwitch:!1})}}),r.a.createElement("div",{className:"vanpool-route"},r.a.createElement("div",{className:"vanpool-route-details"},r.a.createElement(mp,{isLoading:this.state.saving,absolute:!0}),r.a.createElement(Wy,{days:a,participantDays:n,toggleEdit:function(){return e.toggleEdit()},editable:m,onChange:function(t){return e.update("runDays",t)}}),r.a.createElement("div",{className:"tabs ".concat(this.state.editing?"disabled":"")},r.a.createElement("div",{className:"tab towork ".concat(o?"active":""),onClick:function(){return e.showRoute("outboundRoutePoints")}},"To Work"),r.a.createElement("div",{className:"tab tohome ".concat(i?"active":""),onClick:function(){return e.showRoute("inboundRoutePoints")}},"To Home"),r.a.createElement("hr",null)),r.a.createElement(tO,{ref:function(t){return e.display=t},stops:u,route:o?"Work":"Home",toggleEdit:function(){return e.toggleEdit()},editable:m,onChange:function(t){return e.update(e.state.showRoute,t,!0)}}),this.state.editing?null:r.a.createElement("div",{className:"analytics"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement(Bf,null)," Route Time")," ",r.a.createElement("span",{id:"route-duration"},vc.getHoursAndMinutes(l))),r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement(Cf,null)," Average Savings")," ",r.a.createElement("span",{id:"dollars-savings"},bc.formatUSD(s))),r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement(Yf,null)," Average Fuel Saved")," ",r.a.createElement("span",{id:"gallons-savings"},c," gal"))))),r.a.createElement(eE,null)))}}]),a}(n.Component);var nO=Object(o.b)(function(e){return{route:e.vanpoolRoute}},function(e){return{init:function(){e({type:Oe})},save:function(t){e({type:ke,data:t})},setDirections:function(t){e({type:Fe,data:t})}}})(aO),rO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"render",value:function(){var e=this.props,t=e.rideDays,a=e.toHomeEnd,n=e.toHomeStart,c=e.toWorkEnd,s=e.toWorkStart,o=e.edit;return r.a.createElement("div",{className:"participant-route"},r.a.createElement("div",{className:"route-days"},r.a.createElement(Rf,{className:"bus"}),r.a.createElement("div",{className:"flex-grow"},r.a.createElement("div",{className:"schedule-label"},"Commute Schedule"),r.a.createElement("div",null,t.map(function(e){return r.a.createElement("span",{key:e,className:"day"},e.substr(0,3))}))),r.a.createElement(Ps,{roles:[Us,Fs,qs],required:!1},r.a.createElement(df,{onClick:o,className:"edit-icon"}))),r.a.createElement("div",{className:"route-set"},r.a.createElement("div",{className:"to-work route-type"},r.a.createElement("h4",null,r.a.createElement(Mf,null)," To Work"),r.a.createElement(cO,{start:s,end:c})),r.a.createElement("div",{className:"to-home route-type"},r.a.createElement("h4",null,r.a.createElement(Pf,null)," To Home"),r.a.createElement(cO,{start:n,end:a}))))}}]),a}(n.Component);function cO(e){var t=e.start,a=e.end;return t&&a?r.a.createElement("ul",null,r.a.createElement("li",{className:"source"},r.a.createElement("div",{className:"description"},t.description),r.a.createElement("div",{className:"address"},t.address)),r.a.createElement("li",{className:"destination"},r.a.createElement("div",{className:"description"},a.description),r.a.createElement("div",{className:"address"},a.address))):null}function sO(e){var t=e.label,a=e.checked,n=e.onChange,c=e.disabled;return r.a.createElement("div",{className:"slider-container"},r.a.createElement("h4",null," ",t),r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",className:"tog-btn",checked:!!a,onChange:n,disabled:c}),r.a.createElement("div",{className:"slider round"},r.a.createElement("span",{className:"on"}),r.a.createElement("span",{className:"off"}))))}var oO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={toWorkStartIndex:0,toWorkEndIndex:0,toHomeStartIndex:0,toHomeEndIndex:0,rideDays:[],isNtdRecorder:!1,isBillingViewer:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.setIndices(this.props),this.setState({rideDays:this.props.rideDays,isNtdRecorder:this.props.roles.tripRecorder,isBillingViewer:this.props.roles.billingViewer})}},{key:"componentWillReceiveProps",value:function(e){this.setIndices(e),this.setState({rideDays:e.rideDays,isNtdRecorder:e.roles.tripRecorder,isBillingViewer:e.roles.billingViewer})}},{key:"setIndices",value:function(e){var t=e.toWorkStart,a=e.toWorkEnd,n=e.toHomeStart,r=e.toHomeEnd,c=e.outboundRoutePoints,s=e.inboundRoutePoints;this.setState({toWorkStartIndex:c.indexOf(t),toWorkEndIndex:c.indexOf(a),toHomeStartIndex:s.indexOf(n),toHomeEndIndex:s.indexOf(r)})}},{key:"change",value:function(e,t,a){this.setState(Object(er.a)({},"to"+e+t+"Index",a))}},{key:"removeRider",value:function(){window.confirm("Are you sure you want to remove this rider? (This cannot be undone).")&&this.props.delete()}},{key:"tripRecordingChanged",value:function(){this.setState({isNtdRecorder:!this.state.isNtdRecorder})}},{key:"billingViewerChanged",value:function(){this.setState({isBillingViewer:!this.state.isBillingViewer})}},{key:"render",value:function(){var e=this,t=this.props,a=t.outboundRoutePoints,n=t.inboundRoutePoints,c=t.runDays,s=t.roles,o=t.status,i=t.cancel,l=t.save,u=t.atMaxTripRecorders,m=t.maxTripRecordersAllowed,d=this.state,p=d.toWorkStartIndex,v=d.toWorkEndIndex,h=d.toHomeStartIndex,f=d.toHomeEndIndex,b=d.rideDays,E=d.isNtdRecorder,g=d.isBillingViewer,y=1===b.length?b:[],O=u&&!s.tripRecorder||s.coordinator,N=this.props.name.split(" ").slice(0,1).join(" ");return r.a.createElement("div",{className:"participant-route"},r.a.createElement("div",{className:"route-days"},r.a.createElement("div",{className:"days-editor"},r.a.createElement(Rf,{className:"bus"}),r.a.createElement("div",{className:"flex-grow"},r.a.createElement("div",{className:"schedule-label"},"Update ",r.a.createElement("span",null,N,"'s")," Commute Schedule"),r.a.createElement(Fb,{allowed:c,notAllowed:y,value:b,onChange:function(t){return e.setState({rideDays:t})}})))),r.a.createElement("div",{className:"route-set"},r.a.createElement("div",{className:"to-work route-type"},r.a.createElement("h4",null,r.a.createElement(Mf,null),"Update ",r.a.createElement("span",null,N,"'s")," To Work"),r.a.createElement(iO,{start:p,end:v,points:a,change:function(t,a){return e.change("Work",t,a)}})),r.a.createElement("div",{className:"to-home route-type"},r.a.createElement("h4",null,r.a.createElement(Pf,null),"Update ",r.a.createElement("span",null,N,"'s")," To Home"),r.a.createElement(iO,{start:h,end:f,points:n,change:function(t,a){return e.change("Home",t,a)}}))),r.a.createElement(Ps,{roles:[Us,qs],required:!1},r.a.createElement(sO,{label:"Allow ".concat(N," To Manage Trip Recording"),checked:E,onChange:function(){return e.tripRecordingChanged()},disabled:O}),r.a.createElement("label",{id:"max-trip"},"Trip Recording is limited to ",m," riders"),r.a.createElement(sO,{label:"Allow ".concat(N," To Manage Vanpool Payments"),checked:g,onChange:function(){return e.billingViewerChanged()},disabled:s.coordinator})),r.a.createElement("div",{className:"tools"},r.a.createElement("div",{className:"removeRider"},r.a.createElement(Ps,{roles:[Us,qs],required:!1},s.coordinator||o.includes("Coordinator Pending")?null:r.a.createElement("button",{className:"button delete",onClick:function(){return e.removeRider()}},"Remove ",N))),r.a.createElement("div",null,r.a.createElement("button",{className:"button cancel",onClick:i},"Cancel"),r.a.createElement("button",{className:"button primary",onClick:function(){return l(e.state)}},"Save"))),r.a.createElement(JE,null))}}]),a}(n.Component);function iO(e){var t=e.start,a=e.end,n=e.points,c=e.change;return r.a.createElement("ul",null,r.a.createElement("li",{className:"source"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"start",value:n[t].address,onChange:function(e){return c("Start",e.target.selectedIndex)}},n.filter(function(e,t){return t<a}).map(function(e){return r.a.createElement("option",{key:e.address,value:e.address}," ",xb.format(e)," ")})))),r.a.createElement("li",{className:"destination"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"end",value:n[a].address,onChange:function(e){return c("End",e.target.selectedIndex+1+t)}},n.filter(function(e,a){return a>t}).map(function(e){return r.a.createElement("option",{key:e.address,value:e.address}," ",xb.format(e)," ")})))))}var lO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1,loading:!0,active:!1,participant:null,openInEditMode:!!n.props.openInEditMode&&n.props.openInEditMode},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.participants[this.props.participantId]&&this.setState({participant:this.props.participants[this.props.participantId],loading:!1})}},{key:"componentWillReceiveProps",value:function(e){this.setState({participant:e.participants[e.participantId],loading:!1,openInEditMode:!0}),e.activate&&this.setState({active:!0})}},{key:"edit",value:function(){this.setState({editing:!0})}},{key:"cancel",value:function(){this.setState({editing:!1,openInEditMode:!1})}},{key:"save",value:function(e){var t=e.toWorkStartIndex,a=e.toWorkEndIndex,n=e.toHomeStartIndex,r=e.toHomeEndIndex,c=e.rideDays,s=e.isNtdRecorder,o=e.isBillingViewer;this.cancel();var i=this.state.participant.outboundRoutePoints,l=this.state.participant.inboundRoutePoints;this.setState({loading:!0}),this.props.save({payload:{participantId:this.props.participantId,participantRouteProfileId:this.state.participant.participantRouteProfileId,routeId:this.state.participant.routeId,rideDays:c,roles:{tripRecorder:s,billingViewer:o},outboundStartStopRoutePoints:{startRoutePointId:i[t].routePointId,stopRoutePointId:i[a].routePointId},inboundStartStopRoutePoints:{startRoutePointId:l[n].routePointId,stopRoutePointId:l[r].routePointId}},participant:Object(On.a)(Object(On.a)({},this.state.participant),{},{toWorkStart:i[t],toWorkEnd:i[a],toHomeStart:l[n],toHomeEnd:l[r],rideDays:c,roles:Object(On.a)(Object(On.a)({},this.state.participant.roles),{},{tripRecorder:s,billingViewer:o})})})}},{key:"hidePanelOnMobile",value:function(){this.setState({active:!1})}},{key:"render",value:function(){var e=this,t=this.state.participant;if(!t)return null;var a=As([qs]);return r.a.createElement("div",{className:"".concat(a?"dashboard-user":"")},r.a.createElement("div",{className:"participant-profile ".concat(this.state.active?"active":"")},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"participant-contact"},r.a.createElement("div",{className:"profile-image"},r.a.createElement(NE,null,t.name)),r.a.createElement("div",{className:"profile-info"},r.a.createElement(gf,{onClick:function(){return e.hidePanelOnMobile()}}),r.a.createElement("h2",null,t.name),r.a.createElement("div",{className:"roles"},t.roleName),r.a.createElement(Ps,{roles:[Us,Fs,qs],required:!1},r.a.createElement("div",{className:"contact-details"},r.a.createElement("div",{className:"phone-num"},r.a.createElement(wf,null),r.a.createElement(up,{phone:t.phone})),r.a.createElement("div",{className:"email"},r.a.createElement(Tf,null),t.email))),t.status?r.a.createElement("div",{className:"status"},"Approval Status: ",r.a.createElement("span",null,t.status)):null)),this.state.editing||this.state.openInEditMode?r.a.createElement(oO,Object.assign({},t,{atMaxTripRecorders:this.props.atMaxTripRecorders,maxTripRecordersAllowed:this.props.maxTripRecordersAllowed,save:function(t){return e.save(t)},cancel:function(){return e.cancel()},delete:function(){return e.props.delete(e.props.participantId)}})):r.a.createElement(rO,Object.assign({},t,{edit:function(){return e.edit()}}))))}}]),a}(n.Component);var uO=Object(o.b)(function(e){return{participants:e.participants}},function(e,t){return{save:function(t){e({type:Le,data:t})},delete:function(t){e({type:Ue,data:t})}}})(lO),mO=a(548),dO=a.n(mO),pO='input:not(:disabled), select:not(:disabled), textarea:not(:disabled), button:not(:disabled), [tabindex]:not([tabindex="-1"])',vO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).props=e,n.state={deactivating:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.active&&!this.props.active;this.setState({deactivating:!1,activating:t})}},{key:"componentDidUpdate",value:function(){this.state.activating&&this.sendFocusUp({key:"Tab",shiftKey:!1,stopPropagation:function(){},preventDefault:function(){}})}},{key:"cancelModal",value:function(){this.setState({deactivating:!0}),setTimeout(this.props.cancel,200)}},{key:"saveModal",value:function(){this.setState({deactivating:!0}),setTimeout(this.props.save,200)}},{key:"sendFocusUp",value:function(e){"Tab"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),(this.body.querySelector(pO)||this.cancel).focus())}},{key:"sendFocusDown",value:function(e){var t=this.body.querySelector(pO);"Tab"===e.key&&e.shiftKey&&e.target===t&&(e.stopPropagation(),e.preventDefault(),this.props.disabled?this.cancel.focus():this.save.focus())}},{key:"render",value:function(){var e=this,t=this.props,a=t.active,n=t.title,c=t.children,s=t.disabled,o=this.props.saveButtonText||"Send",i=this.props.cancelButtonText||"Cancel";return a?r.a.createElement("div",{className:"form-popup-container popup-container ".concat(this.state.deactivating?"out":"")},r.a.createElement("div",{className:"popup"},r.a.createElement("h3",{className:"title"},n),r.a.createElement("div",{className:"body",ref:function(t){return e.body=t},onKeyDown:function(t){return e.sendFocusDown(t)}},c),r.a.createElement("div",{className:"tools response"},r.a.createElement("button",{onClick:function(){return e.cancelModal()},className:"button cancel",ref:function(t){return e.cancel=t},onKeyDown:function(t){return s&&e.sendFocusUp(t)}},i),r.a.createElement("button",{onClick:function(){return e.saveModal()},className:"button save primary",ref:function(t){return e.save=t},onKeyDown:function(t){return e.sendFocusUp(t)},disabled:s},o)))):null}}]),a}(n.Component),hO=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@(([[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,fO="I'd like you to join our vanpool.",bO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={emails:[],message:fO},n.reset=n.reset.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"inviteUsers",value:function(){var e=this.state,t=e.emails,a=e.message;this.props.inviteUsers(t,a),this.reset()}},{key:"reset",value:function(){this.props.close(),this.setState({emails:[],message:fO})}},{key:"render",value:function(){var e=this,t=this.props.active,a=this.state,n=a.emails,c=a.message;return r.a.createElement(vO,{title:"Invite Rider",active:t,save:function(){return e.inviteUsers()},cancel:this.reset,disabled:0===n.length},r.a.createElement("div",null,r.a.createElement(dO.a,{value:n,className:"emails",inputProps:{placeholder:"Enter Email Address"},onlyUnique:!0,validationRegex:hO,onChange:function(t){return e.setState({emails:t})},addOnBlur:function(t){return e.setState({emails:t})}})),r.a.createElement("h4",null,"Add a Custom Message"),r.a.createElement(Dy,{maxLength:500,rows:5,value:c,onChange:function(t){return e.setState({message:t})}}))}}]),a}(n.Component);var EO=Object(o.b)(null,function(e){return{inviteUsers:function(t,a){e({type:Re,data:{emailIds:t,message:a}})}}})(bO),gO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={inviteModalActive:!1,loading:!1,openInEditMode:!1},n}return Object(ap.a)(a,[{key:"selectParticipant",value:function(e){this.setState({participantId:e,activate:Math.random()+1})}},{key:"componentDidMount",value:function(){this.setState({loading:!0}),this.props.init()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!this.state.participantId&&e.roster.participants.length){var a=e.roster.participants[0].id;this.setState({participantId:a,loading:!1,openInEditMode:!0})}if(e.roster.participants.length&&!e.roster.participants.some(function(e){return e.id===t.state.participantId})){var n=e.roster.participants[0].id;this.setState({participantId:n,loading:!1})}}},{key:"openInviteUserModal",value:function(){this.setState({inviteModalActive:!0})}},{key:"closeInviteUserModal",value:function(){this.setState({inviteModalActive:!1})}},{key:"emailVanpool",value:function(){window.open("mailto:".concat(this.props.roster.participants.map(function(e){return e.email}).filter(function(e){return e}).join(",")),"_self")}},{key:"render",value:function(){var e=this,t=this.props.roster,a=t.participants,n=t.atMaxTripRecorders,c=t.maxTripRecordersAllowed;return r.a.createElement(Vy,{name:"vanpoolRoster"},r.a.createElement("div",{className:"vanpool-roster"},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("ul",{className:"participants"},r.a.createElement(Ps,{roles:[Us,Fs,qs],required:!1},r.a.createElement(yO,{className:"email",onClick:function(){return e.emailVanpool()}},r.a.createElement(Tf,null)," Email Vanpool")),a.map(function(t){return r.a.createElement(yO,{className:"participant ".concat(t.id===e.state.participantId?"active":""),key:t.id,onClick:function(){return e.selectParticipant(t.id)}},r.a.createElement(NE,null,t.name),r.a.createElement("div",{className:"credentials"},r.a.createElement("div",{className:"name"},t.name),"Rider"!==t.roleName?r.a.createElement("div",{className:"roles"},t.roleName):null))}),r.a.createElement(Ps,{roles:[Us,Fs,qs],required:!1},r.a.createElement(yO,{className:"invite",onClick:function(){return e.openInviteUserModal()}},r.a.createElement(qf,{className:"generated-user-image"})," Invite Rider"))),this.state.participantId?r.a.createElement(uO,{openInEditMode:this.state.openInEditMode,atMaxTripRecorders:n,maxTripRecordersAllowed:c,activate:this.state.activate,participantId:this.state.participantId}):null),r.a.createElement(EO,{active:this.state.inviteModalActive,close:function(){return e.closeInviteUserModal()}}))}}]),a}(n.Component);function yO(e){return r.a.createElement("li",null,r.a.createElement("button",e))}var OO=Object(o.b)(function(e){return{roster:e.roster}},function(e){return{init:function(){e({type:Ie})}}})(gO);function NO(e){var t=e.active,a=e.close,n=e.children;return t?r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"header"},r.a.createElement("button",{onClick:a,className:"close"},r.a.createElement(gf,null))),r.a.createElement("div",{className:"body"},n))):null}var kO={PROMPT:"PROMPT",CHOOSE:"CHOOSE",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},jO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={mode:kO.PROMPT,reason:"",otherReason:""},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){!this.state.reason&&e.reasons.length&&this.setState({reason:e.reasons[0]}),this.state.mode===kO.CHOOSE&&null!==e.success&&this.setState({mode:e.success?kO.SUCCESS:kO.FAILURE})}},{key:"render",value:function(){var e=this;return this.props.error?r.a.createElement("div",{className:"error"}):this.state.mode===kO.PROMPT?r.a.createElement("button",{className:"button request",onClick:function(){return e.setState({mode:kO.CHOOSE})}},"Request New Vehicle"):this.state.mode===kO.CHOOSE?r.a.createElement("div",{className:"reason"},r.a.createElement("h3",null,"Reason for changing vehicles?"),r.a.createElement("div",{className:"select"},r.a.createElement("select",{defaultValue:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value,otherReason:""})}},this.props.reasons.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),"Other"!==this.state.reason?null:r.a.createElement("div",{className:"other-reason"},r.a.createElement(Dy,{rows:"3",value:this.state.otherReason,placeholder:"Please provide a reason for changing vehicles.",maxLength:"500",onChange:function(t){return e.setState({otherReason:t})}})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"button cancel",onClick:function(){return e.setState({mode:kO.PROMPT})}},"Cancel"),r.a.createElement("button",{className:"button submit primary",disabled:"Other"===this.state.reason&&""===this.state.otherReason,onClick:function(){return e.props.submit(e.state.reason,e.state.otherReason)}},"Submit"))):this.state.mode===kO.SUCCESS?r.a.createElement("div",{className:"success"},r.a.createElement("span",null,"Your new vehicle request has been sent."),r.a.createElement("span",null,"Enterprise will contact you within 24 hours.")):this.state.mode===kO.FAILURE?r.a.createElement("div",{className:"failure"},r.a.createElement("span",null,r.a.createElement(yf,null)," Your request could not be processed."),r.a.createElement(JE,null),r.a.createElement("button",{className:"button request",onClick:function(){return e.setState({mode:kO.CHOOSE})}},"Request New Vehicle")):void 0}}]),a}(n.Component);var CO=Object(o.b)(function(e){return{reasons:e.requestVehicle.switchReasons,error:e.requestVehicle.error,success:e.requestVehicle.switchRequestSuccess}},function(e,t){return{init:function(){e({type:Se})},submit:function(t,a){e({type:we,data:{reasonType:t,reasonComment:a}})}}})(jO),xO=a(137),SO=a.n(xO),DO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).props=e,n.state={editing:!1,odometer:e.odometerValue,valid:!0},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({odometer:e.odometerValue})}},{key:"updateOdometer",value:function(e){if(!(e<0)){if(isNaN(e))return SO.a.show(this.refs.odometerError),this.setState({valid:!1,odometer:0});e<(this.props.lastMaintenanceOdometerValue<this.props.odometerValue?this.props.odometerValue:this.props.lastMaintenanceOdometerValue)||e>this.props.odometerValue+500?(this.setState({valid:!1,odometer:e}),SO.a.show(this.refs.odometerError)):(this.setState({valid:!0,odometer:e}),SO.a.hide(this.refs.odometerError))}}},{key:"save",value:function(){this.props.onSave(this.state.odometer),this.setState({editing:!1})}},{key:"cancelAttemptedSave",value:function(){this.setState({editing:!1,odometer:this.props.odometerValue}),SO.a.hide(this.refs.odometerError)}},{key:"openEditor",value:function(){this.setState({editing:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.odometerDate,n=t.odometerValue,c=t.lastMaintenanceOdometerValue,s=this.state,o=s.odometer,i=s.editing,l=s.valid,u=c<n?n:c;return r.a.createElement("div",{className:"odometer"},r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"text"},"CURRENT ESTIMATED MILEAGE"),r.a.createElement("div",{className:"updated"},"Last Updated"," ",a!==kn?vc.parseDate(a):kn)),r.a.createElement(Is,{roles:[Vs],required:!1},r.a.createElement("div",{className:"inline-editor ".concat(i?"editing":"")},r.a.createElement("p",{className:"odometer-tooltip",ref:"odometerError","data-tip":"Odometer must be between ".concat(u.toLocaleString()," and ").concat((n+500).toLocaleString())}),r.a.createElement(SO.a,{type:"error"}),i?r.a.createElement("input",{ref:function(e){return e&&e.focus()},value:o,onChange:function(t){return e.updateOdometer(parseInt(t.target.value,10))}}):r.a.createElement("div",{className:"est-mileage"},n.toLocaleString()),r.a.createElement("span",{className:"mi"},"Mi"),i?r.a.createElement("div",{className:"tools"},r.a.createElement("button",{onClick:function(){return e.cancelAttemptedSave()},className:"button small cancel"},"Cancel"),r.a.createElement("button",{disabled:!l,onClick:function(){return e.save()},className:"button small save"},"Save")):r.a.createElement(df,{className:"edit-odometer",onClick:function(t){return e.openEditor(t)}}))),r.a.createElement(Ps,{roles:[Vs],required:!1},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"est-mileage"},n.toLocaleString()),r.a.createElement("span",{className:"mi"},"Mi"))))}}]),a}(n.Component);function AO(e){var t=e.nextMaintenanceDate,a=e.nextMaintenanceMileage,n=e.lastMaintenanceDate,c=e.lastMaintenanceMileage;return r.a.createElement("div",{className:"maintenance ".concat(!t||vc.afterToday(t)?"":"past-due")},r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"text"},"PREVENTATIVE MAINTENANCE DUE"),r.a.createElement("div",{className:"updated"},"Last completed ",r.a.createElement("span",{className:"date"},n!==kn?vc.parseDate(n):kn)," at ",r.a.createElement("span",{className:"miles"},c.toLocaleString())," Mi")),r.a.createElement("div",{className:"next"},r.a.createElement("span",{className:"date"},t!==kn?vc.parseDate(t):kn)," or ",r.a.createElement("span",{className:"miles"},a.toLocaleString()),r.a.createElement("span",{className:"mi"},"Mi")))}var wO=a(549),TO=a.n(wO);function PO(){return r.a.createElement("div",{className:"download-card"},r.a.createElement("div",{className:"flex"},r.a.createElement("img",{src:TO.a,alt:"Enterprise Commute Vehicle Maintenance Card"}),r.a.createElement("p",null,"Don't forget to bring your Commute Maintenance Card at the time of service.")),r.a.createElement("a",{href:"".concat(nr.pdfPath,"/Enterprise_Rideshare_Maint_Card.pdf"),download:!0},"Download Card"))}var IO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={vanpoolName:"N/A",vanpoolDescription:"N/A",editing:!1,valid:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){this.setState({vanpoolName:e.vanpoolInfo.vanpoolName,vanpoolDescription:e.vanpoolInfo.vanpoolDescription,editing:!1})}},{key:"nameValidation",value:function(e){return e&&e.length>0}},{key:"render",value:function(){var e=this.props.vanpoolInfo,t=e.vanpoolName,a=e.vanpoolId,n=e.participantCount,c=e.contractedMileage,s=e.monthlyRentAmount,o=this.props.vehicleCapacity;return r.a.createElement("div",{className:"vanpool-details"},r.a.createElement("div",{className:"name"},t),r.a.createElement("h4",{className:"id"},a),r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"seats"},r.a.createElement("img",{src:Ih.a,alt:"van"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Seats"),r.a.createElement("div",{className:"data"},o))),r.a.createElement("div",{className:"occupancy"},r.a.createElement("img",{src:Lh.a,alt:"person"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Occupancy"),r.a.createElement("div",{className:"data"},n))),r.a.createElement("div",{className:"contracted distance"},r.a.createElement("img",{src:Vh.a,alt:"distance"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Mi/Mo"),r.a.createElement("div",{className:"data"},c.toLocaleString()))),r.a.createElement("div",{className:"rent"},r.a.createElement("img",{src:Bh.a,alt:"money"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Rent"),r.a.createElement("div",{className:"data"},s.toLocaleString())))))}}]),a}(n.Component);var MO=Object(o.b)(function(e){return{vanpoolInfo:e.vanpoolInfo}},function(e,t){return{init:function(){e({type:qe})}}})(IO),RO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={modal:{title:"",message:"",confirmMessage:"",active:!1},selectedAddon:null},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(){this.cancel()}},{key:"getDescription",value:function(e){return e.isRequestable?e.isInstalled?e.installedDate?"Was added on ".concat(vc.parseDate(e.installedDate)):null:e.description:e.isInstalled?"Pending Removal":"Pending Activation"}},{key:"confirmAddOn",value:function(e){var t=!e.isInstalled;this.setState({selectedAddon:e,modal:{title:"".concat(t?"Add on":"Remove"," ").concat(e.addOnName),message:"A recurring charge of ".concat(bc.formatUSD(e.price)," will be ").concat(t?"added to":"removed from"," your monthly rental. Would you still like to ").concat(t?"add":"remove"," ").concat(e.addOnName," ").concat(t?"to":"from"," your vanpool?"),confirmMessage:t?"Add":"Remove",active:!0}})}},{key:"cancel",value:function(){this.setState({selectedAddon:null,modal:{active:!1}})}},{key:"confirm",value:function(){this.state.selectedAddon.isInstalled?this.props.remove(this.state.selectedAddon.addOnId):this.props.add(this.state.selectedAddon.addOnId)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"add-ons"},r.a.createElement(ag,Object.assign({},this.state.modal,{cancelMessage:"Cancel",cancel:function(){return e.cancel()},confirm:function(){return e.confirm()}})),this.props.addOns.length>0?r.a.createElement("h3",null,"ADD ONS"):null,this.props.addOns.map(function(t){return r.a.createElement("div",{className:"add-on",key:t.addOnId},r.a.createElement("header",null,r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.addOnImage,alt:t.addOnName}),r.a.createElement("span",{className:"title"},t.addOnName)),r.a.createElement("p",{className:"description ".concat(t.isRequestable&&!t.installedDate?"":"pending"," ").concat(As([Vs])?"no-add":"")},e.getDescription(t))),r.a.createElement("div",{className:"add"},r.a.createElement("div",{className:"price"},bc.formatUSD(t.price),r.a.createElement("small",null,"/MONTH")),r.a.createElement(Is,{roles:[Vs],required:!1},r.a.createElement("button",{className:"button mini  ".concat(t.isRequestable?"":"pending"),disabled:!t.isRequestable,onClick:function(){return e.confirmAddOn(t)}},t.isInstalled?"Remove":"Add")))))}))}}]),a}(n.Component);var _O=Object(o.b)(function(e){return{addOns:e.vanpoolAddOns.addOns}},function(e,t){return{init:function(){e({type:Qe})},add:function(t){e({type:Ze,data:t})},remove:function(t){e({type:et,data:t})}}})(RO),LO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={src:null},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.lookupAddress(this.props.address)}},{key:"componentWillReceiveProps",value:function(e){this.lookupAddress(e.address)}},{key:"lookupAddress",value:function(e){var t=this;e&&Vo.getAddressAndLocation(e).then(function(e){var t=e.place_id;return Vo.getPlaceDetails(t)}).then(function(e){e.photos&&e.photos[0]&&t.setState({src:e.photos[0].getUrl({maxWidth:300,maxHeight:300})})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state.src;return r.a.createElement("div",{className:"google-map-image",style:e&&{backgroundImage:"url(".concat(e,")")}})}}]),a}(n.Component),UO=function(){};function VO(e){var t=e.name,a=e.address,n=e.city,c=e.state,s=e.phone,o=e.ext,i=e.search,l=void 0===i?UO:i;return t?r.a.createElement("div",{className:"service-provider"},r.a.createElement("h3",null,"PRIMARY SERVICE PROVIDER"),r.a.createElement("div",{className:"flex"},r.a.createElement(LO,{address:t+", "+a}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"name"},t),r.a.createElement("div",{className:"addr"},a+", "+n+", "+c),r.a.createElement("div",{className:"phone"},r.a.createElement(wf,null),o?s+" "+o:s)),r.a.createElement("button",{className:"button",onClick:l},"Search"))):r.a.createElement("div",{className:"service-provider"},r.a.createElement("h3",null,"PRIMARY SERVICE PROVIDER"),r.a.createElement("div",{className:"no-provider info"},"No service provider found."),r.a.createElement("button",{className:"button",onClick:l},"Search"))}var FO=[5,10,25,50,100],BO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={zip:"",distance:FO[0],isMore:!1,locations:[],markers:[],selected:-1,loading:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.locations;this.setState({markers:t.map(function(e){return{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)}}),locations:t,isMore:e.isMore,loading:!1})}},{key:"search",value:function(){var e=this.state,t=e.zip,a=e.distance;this.setState({loading:!0}),this.props.search(t,a)}},{key:"updateZip",value:function(e){/^\d{0,5}$/.test(e)&&this.setState({zip:e})}},{key:"select",value:function(e,t){e.stopPropagation(),this.setState({selected:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"service-provider-search",onClick:function(t){return e.select(t,-1)}},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"google-maps",onClick:function(e){return e.stopPropagation()}},r.a.createElement(Vo.MapWithMarkers,{markers:this.state.markers,selected:this.state.selected})),r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"found"},this.state.locations.length,this.state.isMore?"+":""," SERVICE PROVIDERS FOUND"),r.a.createElement("div",{className:"form"},r.a.createElement("input",{placeholder:"Zip Code",value:this.state.zip,onChange:function(t){return e.updateZip(t.target.value)}}),r.a.createElement("div",{className:"select"},r.a.createElement("select",{className:"distance",defaultValue:5,onChange:function(t){return e.setState({distance:t.target.value})}},FO.map(function(e){return r.a.createElement("option",{key:e,value:e},e," Miles")}))),r.a.createElement("button",{className:"button",disabled:this.state.zip.length<5,onClick:function(){return e.search()}},"Search"))),r.a.createElement("div",{className:"results"},this.state.locations.map(function(t,a){return r.a.createElement("div",{key:a,className:"location ".concat(e.state.selected===a?"selected":""),label:String.fromCharCode(a+"A".charCodeAt()),onClick:function(t){return e.select(t,e.state.selected===a?-1:a)}},r.a.createElement("span",{className:"name"},t.shopName),r.a.createElement("span",{className:"address"},t.address,", ",t.city,", ",t.state," ",t.zipCode),r.a.createElement("span",{className:"phone"},r.a.createElement(wf,null),t.phoneNumber))})))}}]),a}(n.Component);var YO=Object(o.b)(function(e){return e.serviceProvider},function(e){return{search:function(t,a){e({type:yt,data:{zip:t,distance:a}})}}})(BO),WO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={loading:!1,serviceProviderModal:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(),this.setState({loading:!0})}},{key:"componentWillReceiveProps",value:function(e){e.vehicle!==this.props.vehicle&&this.setState({loading:!1})}},{key:"save",value:function(e){this.setState({loading:!0}),e()}},{key:"render",value:function(){var e=this,t=this.props.vehicle,a=t.serviceProviders[0]||{};return r.a.createElement("div",{className:"vanpool-vehicle"},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"vehicle-model"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.vehicleImage,alt:"Vehicle Model"})),r.a.createElement("div",{className:"note"},"Image shown is not actual vanpool vehicle."),r.a.createElement("h3",{className:"year-make-model"},t.year," ",t.make," ",t.model),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"series"},t.series),r.a.createElement("div",{className:"unit"},t.unitNumber),r.a.createElement("div",{className:"type"},t.vehicleType),r.a.createElement("div",{className:"color"},t.color),r.a.createElement("div",{className:"license"},t.registrationNumber),r.a.createElement("div",{className:"state"},t.registrationState),r.a.createElement("div",{className:"vin"},t.VIN)),r.a.createElement(Is,{roles:[Vs],required:!1},r.a.createElement(CO,null))),r.a.createElement("div",{className:"vehicle-details"},r.a.createElement(MO,{vehicleCapacity:t.vehicleCapacity}),r.a.createElement(DO,{odometerValue:t.currentEstimateOdometer,odometerDate:t.lastActualOdometerDate,lastMaintenanceOdometerValue:t.lastPreventativeMaintenanceOdometer,onSave:function(t){return e.save(function(){return e.props.saveOdometer(t)})}}),r.a.createElement(AO,{nextMaintenanceDate:t.nextScheduledMaintenanceDate,nextMaintenanceMileage:t.nextScheduledMaintenanceOdometer,lastMaintenanceDate:t.lastPreventativeMaintenanceOdometerDate,lastMaintenanceMileage:t.lastPreventativeMaintenanceOdometer}),r.a.createElement(PO,null),r.a.createElement(VO,{name:a.name,address:[a.addressLine1,a.addressLine2].join(" "),city:a.city,state:a.state,phone:a.primaryContactPhone,ext:a.primaryContactPhoneExt,search:function(){return e.setState({serviceProviderModal:!0})}}),r.a.createElement(_O,null)),r.a.createElement(NO,{active:this.state.serviceProviderModal,close:function(){return e.setState({serviceProviderModal:!1})}},r.a.createElement(YO,{provider:a})))}}]),a}(n.Component);var HO=Object(o.b)(function(e){return{vehicle:e.vehicle}},function(e,t){return{init:function(){e({type:je})},saveOdometer:function(t){e({type:xe,data:t})}}})(WO),GO={isAuthorized:function(){var e=gn.getUserProfile();if(e){var t=Ds([qs])&&e.vanpoolId;return!As([Rs,Bs,Gs])||t}return!1}},qO=50,zO={passive:!0},KO={get scrollTop(){return window.pageYOffset},set scrollTop(e){window.scrollTo(0,e)},addEventListener:function(){var e;return(e=window).addEventListener.apply(e,arguments)},removeEventListener:function(){var e;return(e=window).removeEventListener.apply(e,arguments)},offsetTop:115};function JO(e){var t=document.querySelector(e);if(!t)return!1;var a=KO,n=t.previousSibling;return!(t.offsetTop-a.scrollTop<0)&&(!n||n.offsetTop-a.scrollTop<0)}function QO(e){var t;try{t=document.querySelector(e)}catch(m){}if(t){for(var a=KO,n=a.scrollTop,r=t.offsetTop-a.offsetTop-qO,c=[],s=0,o=n,i=0;i<80;i++){o+=s+=4*(i<40?1:-1)*(r-n)/6400,c[i]=Math.round(o)}var l=0,u=setInterval(function(){++l<c.length?a.scrollTop=c[l]:clearInterval(u)},4)}}var XO=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={active:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.watch(this.props.selector),this.setState({active:JO(this.props.selector)})}},{key:"componentWillUnmount",value:function(){this.unwatch()}},{key:"watch",value:function(e){var t=this,a=document.querySelector(e),n=KO;if(!a)return setTimeout(function(){return t.watch(e)},10);var r=function(){return t.setState({active:JO(e)})};n.addEventListener("scroll",r,zO),this.unwatch=function(){return n.removeEventListener("scroll",r,zO)}}},{key:"render",value:function(){var e=this.props,t=e.selector,a=e.children,n=this.state.active;return r.a.createElement("div",{className:"scroll-link ".concat(n?"active":""),onClick:function(){return QO(t)}},a)}}]),a}(n.Component),$O=["Mobile","Work","Home"];function ZO(e){return/^\d{3}-\d{3}-\d{4}$/.test(e)}function eN(e){return(e=e.replace(/[^\d]/g,"")).length<=3?e:(e=e.substr(0,3)+"-"+e.substr(3)).length<=7?e:e.substr(0,7)+"-"+e.substr(7,4)}var tN=function(e){return e.replace(/[^\d]/g,"").substr(0,5)};function aN(e){var t=e.placeholder,a=void 0===t?"Phone":t,n=e.options,c=void 0===n?$O:n,s=e.value,o=s.type,i=s.number,l=s.extension,u=e.update,m=o||c[0],d="Work"===m;return r.a.createElement("div",{className:m},r.a.createElement("div",{className:"select-switch pad-desk"},r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:o||c[0],onChange:function(e){return u({type:e.target.value,extension:""})}},c.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("input",{type:"text",className:"number",value:i,placeholder:a,onChange:function(e){return u({type:m,number:eN(e.target.value)})}}),d?r.a.createElement("input",{value:l,type:"text",className:"ext",placeholder:"Ext",onChange:function(e){return u({type:m,extension:tN(e.target.value)})}}):null))}var nN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={primary:e.primary,secondary:e.secondary,valid:n.valid(e)},n}return Object(ap.a)(a,[{key:"updatePrimary",value:function(e){var t={primary:Object(On.a)(Object(On.a)({},this.state.primary),e)};e.type===this.state.secondary.type&&(t.secondary=Object(On.a)(Object(On.a)({},this.state.secondary),{},{type:$O.find(function(t){return t!==e.type})})),this.update(t)}},{key:"updateSecondary",value:function(e){this.update({secondary:Object(On.a)(Object(On.a)({},this.state.secondary),e)})}},{key:"update",value:function(e){var t=Object(On.a)(Object(On.a)({},this.state),e);t.validPhones=this.valid(t),this.setState(t),this.props.update(t)}},{key:"valid",value:function(e){var t=e.primary,a=e.secondary;return ZO(t.number)&&(!a.number||ZO(a.number))}},{key:"render",value:function(){var e=this,t=this.state,a=t.primary,n=t.secondary,c=n.number?$O.filter(function(e){return e!==n.type}):$O,s=$O.filter(function(e){return e!==a.type});return r.a.createElement("div",{className:"phone"},r.a.createElement("h3",null,r.a.createElement(wf,null)," Phone"),r.a.createElement(aN,{value:a,placeholder:"Preferred",options:c,update:function(t){return e.updatePrimary(t)}}),r.a.createElement(aN,{value:n,placeholder:"Optional",options:s,update:function(t){return e.updateSecondary(t)}}))}}]),a}(n.Component);var rN=Object(o.b)(function(e){return{states:e.profile.states}})(function(e){var t=e.states,a=e.value,n=e.onChange;return r.a.createElement("div",{className:"select transportation"},r.a.createElement("select",{value:a,onChange:n},r.a.createElement("option",{disabled:!0,value:""},"State"),t.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))});function cN(e){var t=e.update,a=e.valid,n=e.isValid,c=Object(uo.a)(e,["update","valid","isValid"]),s=c.line1,o=c.line2,i=c.city,l=c.state,u=c.zip;return n||(o="",i="",l="",u=""),r.a.createElement("div",{className:"address pad-desk"},r.a.createElement("div",null,r.a.createElement(Lb,{placeholder:"Address",className:"street-number",value:s,onChange:function(e,a){return t(xb.fromGeocode(e),a)}}),s?null:r.a.createElement("span",{className:"fields-invalid streetInvalid"},"Street is required.")),r.a.createElement("input",{type:"text",placeholder:"Apt, Suite, Etc (optional)",className:"apt",value:o,maxLength:100,onChange:function(e){return t(Object(On.a)(Object(On.a)({},c),{},{line2:e.target.value}))}}),r.a.createElement("div",{className:"region"},r.a.createElement("div",{className:"validationClass"},r.a.createElement("input",{type:"text",placeholder:"City",className:"city ".concat(i?"":"invalid"),value:i,maxLength:100,onChange:function(e){return t(Object(On.a)(Object(On.a)({},c),{},{city:e.target.value}),a)}}),i?null:r.a.createElement("span",{className:"fields-invalid"},"City is required.")),r.a.createElement(rN,{value:l,onChange:function(e){return t(Object(On.a)(Object(On.a)({},c),{},{state:e.target.value}))}}),r.a.createElement("div",{className:"validationClass"},r.a.createElement("input",{type:"text",placeholder:"Zipcode",className:"zip ".concat(u?"":"invalid"),value:u,onChange:function(e){return/^\d{0,5}$/.test(e.target.value)&&t(Object(On.a)(Object(On.a)({},c),{},{zip:e.target.value}),a)}}),u?null:r.a.createElement("span",{className:"fields-invalid"},"Zipcode is required."))))}var sN=function(){return{line1:"",line2:"",city:"",state:"",zip:""}},oN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;Object(Nc.a)(this,a),n=t.call(this,e);var r=!xb.equal(e.homeAddress,e.mailingAddress),c=e.homeAddress;c.valid=!0;var s=e.mailingAddress;return s.valid=!0,n.state={different:r,homeAddress:c,mailingAddress:r?s:sN(),validAddresses:!!c.line1,valid:!0},n}return Object(ap.a)(a,[{key:"checkValid",value:function(e,t){return xb.empty(t)?e.valid:e.valid&&t.valid}},{key:"update",value:function(e){var t=Object(On.a)(Object(On.a)({},this.state),e),a=t.homeAddress,n=t.mailingAddress,r={homeAddress:a,mailingAddress:n,different:t.different,valid:this.checkValid(a,n),validAddresses:xb.valid(a,!1)&&xb.valid(n,!0)};this.setState(r),this.props.update(Object(On.a)(Object(On.a)({},r),{},{mailingAddress:xb.empty(n)?a:n}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"addresses"},r.a.createElement("div",{className:"home"},r.a.createElement("h3",null,r.a.createElement(Pf,null)," Home"),r.a.createElement(cN,Object.assign({},this.state.homeAddress,{valid:this.state.valid,isValid:this.state.homeAddress.valid,update:function(t,a){t.valid=a,e.update({homeAddress:t})}})),this.state.different?null:r.a.createElement("button",{className:"pad-desk diff-mail",desktopafter:"(If different from Home)",onClick:function(){e.update({different:!0,mailingAddress:e.state.homeAddress})}},r.a.createElement(Vf,null)," Mailing Address")),this.state.different?r.a.createElement("div",{className:"mailing-address"},r.a.createElement("div",{className:"optional"},r.a.createElement("h3",null,r.a.createElement(Tf,null)," Mailing Address ",r.a.createElement("span",null,"(optional)")),r.a.createElement(gf,{className:"close",onClick:function(){return e.update({different:!1,mailingAddress:e.state.homeAddress})}})),r.a.createElement(cN,Object.assign({},this.state.mailingAddress,{valid:this.state.valid,isValid:this.state.mailingAddress.valid,update:function(t,a){t.valid=a,e.update({mailingAddress:t})}}))):null)}}]),a}(n.Component);function iN(e){var t=e.name,a=e.phone,n=e.secondPhone,c=e.email,s=e.homeAddress,o=e.mailingAddress,i=s.line1?xb.lines(s):[kn],l=o.line1?xb.lines(o):null,u=a?a.number:kn,m=n?n.number:"";return r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"name"},t),r.a.createElement("div",{className:"phone field"},r.a.createElement(wf,null),m?r.a.createElement("span",null,r.a.createElement("span",{className:"line1"},u," ",r.a.createElement("i",null,"(Preferred)")),r.a.createElement("span",{className:"line2"},m)):u),r.a.createElement("div",{className:"email field"},r.a.createElement(Tf,null),c),r.a.createElement("div",{className:"home-address field"},r.a.createElement(Pf,null),r.a.createElement("p",null,i.map(function(e){return r.a.createElement("span",{key:e,className:"line2"},e)}))),l&&!xb.equal(s,o)?r.a.createElement("div",{className:"contact-address field"},r.a.createElement(If,null),r.a.createElement("p",null,l.map(function(e){return r.a.createElement("span",{key:e,className:"line2"},e)}))):null)}function lN(e){var t=e.name,a=e.phone,n=e.secondPhone,c=e.email,s=e.homeAddress,o=e.mailingAddress,i=e.update;return r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"name"},t),r.a.createElement(nN,{primary:a,secondary:n,update:i}),r.a.createElement("div",{className:"email field"},r.a.createElement(Tf,null),c),r.a.createElement(oN,{homeAddress:s,mailingAddress:o,update:i}))}var uN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state=Object(On.a)({editing:!1},e),n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"edit",value:function(){this.setState(Object(On.a)(Object(On.a)({editing:!0},this.props),{},{validPhones:!0,validAddresses:!0,valid:!0}))}},{key:"cancel",value:function(){window.scrollTo(0,0),this.setState(Object(On.a)({editing:!1},this.props))}},{key:"update",value:function(e){var t=e.primary,a=e.secondary,n=e.validPhones,r=e.homeAddress,c=e.mailingAddress,s=e.validAddresses,o=e.valid;if(t)return this.setState({phone:t,secondPhone:a,validPhones:n});this.setState({homeAddress:r,mailingAddress:c,validAddresses:s,valid:o})}},{key:"save",value:function(e){this.props.save(e),this.cancel()}},{key:"render",value:function(){var e=this,t=this.state,a=t.validPhones,n=t.validAddresses,c=t.editing,s=t.valid;return r.a.createElement("div",{className:"profile-info"},c?null:r.a.createElement("button",{className:"edit",onClick:function(){return e.edit()},"aria-label":"Edit Personal Information"},r.a.createElement(df,null)),r.a.createElement("div",{className:"profile-image"},r.a.createElement(NE,null,this.props.name)),c?r.a.createElement(lN,Object.assign({},this.state,{update:function(t){return e.update(t)}})):r.a.createElement(iN,this.props),c?r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"button small cancel",onClick:function(){return e.cancel()}},"Cancel"),r.a.createElement("button",{className:"button small save",onClick:function(){return e.save(e.state)},disabled:!a||!n||!s},"Update Profile")):null)}}]),a}(n.Component);var mN=Object(o.b)(null,function(e){return{save:function(t){e({type:Ct,data:t})}}})(uN);var dN={redirect_uri:"".concat(window.location.origin,"/azure/"),scope:"openid",response_type:"id_token",client_id:nr.clientId};function pN(e){var t,a=(t=Object(On.a)(Object(On.a)({},dN),{},{p:e}),Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&"));return"".concat(nr.azureBaseUrl,"?").concat(a)}var vN=pN("B2C_1A_email_update"),hN=pN("B2C_1A_PasswordChange"),fN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"clickWrapper",value:function(){_n.analyticsEvent({type:this.props.eventType}),this.props.onClick()}},{key:"render",value:function(){var e=this;return r.a.createElement("button",{className:this.props.className,onClick:function(){return e.clickWrapper()}},this.props.children)}}]),a}(n.Component),bN=function(e){return function(){localStorage.setItem("mobileDeepLink","/profile/azure-settings"),window.location.assign(kp.addNonceToUrl(e))}},EN=function(e){return function(){localStorage.setItem("passwordReset","start"),bN(e)()}};function gN(){return r.a.createElement("div",{className:"azure-settings"},r.a.createElement(kb,{title:"Email / Password",Icon:cb,isEditable:!1},r.a.createElement("button",{className:"button",onClick:bN(vN)},"Change Email"),r.a.createElement(fN,{className:"button",onClick:EN(hN),eventType:"Password Reset Start"},"Change Password")))}function yN(e){var t=e.question,a=e.onChange,n=e.value;return r.a.createElement("div",{className:"question"},r.a.createElement("label",null,t),r.a.createElement("div",{className:"yes-no"},r.a.createElement("button",{className:"yes pill ".concat(n?"selected":""),onClick:function(){return a(!0)}},"Yes"),r.a.createElement("button",{className:"no pill ".concat(!1===n?"selected":""),onClick:function(){return a(!1)}},"No")))}var ON=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={worksiteOtherSelected:!(!n.props.workAddress||n.props.worksiteId),workAddress:n.props.workAddress},n.updateForm=n.props.update,n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"updateWorkAddressByWorksiteId",value:function(e,t){var a=this.lookUpWorksiteAddress(e,t);e?this.setState({worksiteOtherSelected:!1,workAddress:a}):this.setState({worksiteOtherSelected:!0,workAddress:a}),this.updateForm({worksiteId:e,workAddress:a})}},{key:"defaultWorksite",value:function(e){return e?"":"NO_WORKSITE_SELECTED"}},{key:"updateWorkAddress",value:function(e){this.setState({workAddress:e}),this.updateForm({workAddress:e})}},{key:"lookUpWorksiteAddress",value:function(e,t){return e&&"NO_WORKSITE_SELECTED"!==e?t.find(function(t){return t.worksiteId===parseInt(e,10)}).address:null}},{key:"render",value:function(){var e=this,t=this.props,a=t.worksiteId,n=void 0===a?this.defaultWorksite(this.props.workAddress):a,c=t.worksites,s=t.isPartner;return r.a.createElement("div",null,s?r.a.createElement("div",{className:"select-switch pad-desk"},r.a.createElement("div",{className:"select work-address-select"},r.a.createElement("select",{value:n,className:"worksite-select",onChange:function(t){return e.updateWorkAddressByWorksiteId(t.target.value,c)}},r.a.createElement("option",{disabled:!0,hidden:!0,className:"hidden",value:"NO_WORKSITE_SELECTED"},"Select an Address"),c.length?c.map(function(e){return r.a.createElement("option",{key:e.worksiteId,value:e.worksiteId},"".concat(e.worksiteName,", ").concat(e.address))}):null,r.a.createElement("option",{value:""},"Other")))):null,this.state.worksiteOtherSelected||!s?r.a.createElement(Lb,{placeholder:"Address",className:"addr-edit",id:"commuteEnd",value:this.state.workAddress,onChange:function(t){return e.updateWorkAddress(t.address)}}):null)}}]),a}(n.Component),NN=Object(o.b)(function(e){return{worksites:e.commuteProfile.worksites}},function(e){return{init:function(){e({type:Tt})}}})(ON),kN=r.a.createElement("span",null,"The company entered is associated with a Commute with Enterprise partner. Please sign up with your valid work email.\xa0 If you have questions, please call ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),"."),jN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={employer:e.employer,showInvalidEmployer:!1},n.cancelEmployerWarning=n.cancelEmployerWarning.bind(Object(bp.a)(n)),n.changeEmail=n.changeEmail.bind(Object(bp.a)(n)),n.employerBlur=n.employerBlur.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"employerBlur",value:function(){var e=Object(sc.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.employer){e.next=2;break}return e.abrupt("return");case 2:return this.props.update({validEmployer:!1}),e.next=5,Pc.get("".concat(nr.apiBaseUrl,"/user/profile/validate/company?name=").concat(this.props.employer));case 5:t=e.sent,a=t.isPartner,this.props.update({validEmployer:!a}),this.setState({showInvalidEmployer:a});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelEmployerWarning",value:function(){this.setState({showInvalidEmployer:!1})}},{key:"changeEmail",value:function(){localStorage.setItem("mobileDeepLink","/profile/commute-info"),window.location.assign(kp.addNonceToUrl(vN))}},{key:"render",value:function(){var e=this.props,t=e.worksiteId,a=e.employer,n=e.activeDays,c=e.arriveAtWork,s=e.departFromWork,o=e.homeAddress,i=e.workAddress,l=e.mode,u=e.arriveFlexible,m=e.departFlexible,d=e.update,p=e.isPartner,v=1===n.length?n:[];return r.a.createElement("div",null,r.a.createElement(ag,{active:this.state.showInvalidEmployer,title:"Welcome Commute Vanpool Partner",message:kN,cancelMessage:"Cancel",cancel:this.cancelEmployerWarning,confirmMessage:"Change Email Address",confirm:this.changeEmail}),r.a.createElement("div",null,r.a.createElement(Wg,{type:"text",className:"edit-employer ".concat(a?"":"invalid"),disabled:p,placeholder:"Employer",maxLength:"100",value:a,onChange:function(e){return d({employer:e.target.value})},onBlur:this.employerBlur}),a?null:r.a.createElement("span",{className:"employer-invalid"},"Please enter an employer."),p?r.a.createElement("span",{className:"not-employer",onClick:this.changeEmail},"I do not work for the company listed above"):null,r.a.createElement("div",{className:"days-editor"},r.a.createElement("label",{htmlFor:"commuteSchedule"},"Commute Schedule"),r.a.createElement(Fb,{value:n,notAllowed:v,onChange:function(e){return d({activeDays:e})}})),r.a.createElement("label",{htmlFor:"arriveWorkTime"},"What time do you arrive at work?"),r.a.createElement(Bb,{id:"arriveWorkTime",value:c,onSelected:function(e){return d({arriveAtWork:e})}}),r.a.createElement(yN,{question:"Is your arrival time flexible?",onChange:function(e){return d({arriveFlexible:e})},value:u}),r.a.createElement("label",{htmlFor:"arriveHomeTime"},"What time do you depart for home?"),r.a.createElement(Bb,{id:"arriveHomeTime",value:s,onSelected:function(e){return d({departFromWork:e})}}),r.a.createElement(yN,{question:"Is your departure time flexible?",onChange:function(e){return d({departFlexible:e})},value:m}),r.a.createElement("label",{htmlFor:"commuteStart",className:"attach"},"Commute Start"),r.a.createElement(Lb,{placeholder:"Address",className:"addr-edit",id:"commuteStart",value:o,onChange:function(e){return d({homeAddress:e.address})}}),r.a.createElement("label",{htmlFor:"commuteEnd",className:"attach"},"Commute End"),r.a.createElement(NN,{workAddress:i,isPartner:p,worksiteId:t,update:d}),r.a.createElement("label",{htmlFor:"commuteStart",className:"attach"},"Transportation Mode"),r.a.createElement(CN,{value:l,onChange:function(e){return d({mode:e.target.value})}})))}}]),a}(n.Component),CN=Object(o.b)(function(e){return{modes:e.commuteProfile.modes}})(function(e){var t=e.modes,a=e.value,n=e.onChange;return r.a.createElement("div",{className:"select transportation"},r.a.createElement("select",{value:a,onChange:n},t.filter(function(e){return"Did not commute"!==e.label}).map(function(e){return r.a.createElement("option",{key:e.label,value:e.label},e.label)})))}),xN=function(e){var t=e.employer,a=e.worksiteId,n=e.workAddress,c=e.isPartner,s=e.validEmployer,o=e.cancel,i=e.save;return r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"button small cancel",onClick:o},"Cancel"),r.a.createElement("button",{className:"button small save",onClick:i,disabled:!t||!a&&!n&&c||!s},"Update Commute"))};function SN(e){var t=e.employer,a=e.activeDays,n=e.arriveAtWork,c=e.departFromWork,s=e.homeAddress,o=e.workAddress,i=e.mode,l=(e.arriveFlexible,e.departFlexible,e.isEditable),u=e.edit;return r.a.createElement(kb,{title:"Commute Profile",Icon:Af,isEditable:l,edit:u},l?null:r.a.createElement("div",{className:"note"},"Commute profile is not editable if part of an active vanpool."),r.a.createElement("div",{className:"employer"},t),r.a.createElement(jb,{label:"Commute Schedule",className:"schedule"},vc.formatDays(a)),r.a.createElement(jb,{label:"Work Arrival Time",className:"arrive"},vc.parseTime(n)),r.a.createElement(jb,{label:"Work Departure Time",className:"depart"},vc.parseTime(c)),r.a.createElement(jb,{label:"Commute Start",className:"home"},s),r.a.createElement(jb,{label:"Commute End",className:"work"},o),r.a.createElement(jb,{label:"Preferred Mode of Transportation",className:"mode"},i))}var DN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1,validEmployer:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"edit",value:function(){this.setState(Object(On.a)({editing:!0},this.props))}},{key:"cancel",value:function(){this.setState(Object(On.a)({editing:!1},this.props))}},{key:"save",value:function(){this.props.save(this.state),this.setState({editing:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.employer,n=t.worksiteId,c=t.workAddress,s=t.isPartner,o=t.validEmployer;return r.a.createElement("div",{className:"commute-info ".concat(this.state.editing?"edit":"")},this.state.editing?r.a.createElement(kb,{title:"Commute Profile",Icon:Af,isEditable:!1},r.a.createElement(jN,Object.assign({},this.state,{update:function(t){return e.setState(t)}})),r.a.createElement(xN,{employer:a,cancel:function(){return e.cancel()},save:function(){return e.save()},worksiteId:n,workAddress:c,isPartner:s,validEmployer:o})):r.a.createElement(SN,Object.assign({},this.props,{edit:function(){return e.edit()}})))}}]),a}(n.Component);var AN=Object(o.b)(function(e){return Object(On.a)(Object(On.a)({},e.commuteProfile.commute),{},{isPartner:e.userAuth.isPartner})},function(e){return{init:function(){e({type:xt}),e({type:Ut})},save:function(t){e({type:Dt,data:t})}}})(DN);function wN(e){var t=e.name,a=e.id,n=e.participant,c=e.role,s=e.status,o=e.isAbleToLeave,i=e.leaveVanpool;return r.a.createElement(kb,{title:"Vanpool",Icon:Rf},r.a.createElement("div",{className:"name"},t),r.a.createElement(jb,{label:"Vanpool ID",className:"id"},a),r.a.createElement(jb,{label:"Participant ID",className:"participant"},n),r.a.createElement(jb,{label:"Role",className:"role"},c),r.a.createElement(jb,{label:"Application Status",className:"status"},s),o?r.a.createElement("button",{className:"button leave",onClick:i},"Leave Vanpool"):null)}var TN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={confirming:!1,countdown:15},n.countdownToLogout=n.countdownToLogout.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({confirming:!1}),e.left&&this.countdownToLogout()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"countdownToLogout",value:function(){if(this.state.countdown)return this.setState({countdown:this.state.countdown-1}),this.timer=setTimeout(this.countdownToLogout,1e3);hp.logout()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"vanpool-info"},this.props.id?r.a.createElement(wN,Object.assign({},this.props,{leaveVanpool:function(){return e.setState({confirming:!0})}})):r.a.createElement(Sb,{matches:this.props.matches}),r.a.createElement(ag,{title:"Leave Vanpool",active:this.state.confirming,cancel:function(){return e.setState({confirming:!1})},confirm:function(){return e.props.leaveVanpool(e.props.participant)},message:"Once you leave, all data related to your vanpool (including scheduled payments) will be removed. Are you sure you want to leave your vanpool?",cancelMessage:"Cancel",confirmMessage:"Leave"}),r.a.createElement(ag,{title:"Successfully Left Vanpool",active:this.props.left,confirm:this.props.logout,message:"You have been removed from the Vanpool. You will be logged out in ".concat(this.state.countdown+1," seconds."),confirmMessage:"Logout"}))}}]),a}(n.Component);var PN=Object(cp.h)(Object(o.b)(function(e){return{left:e.profile.leftVanpool,requestResult:e.profile.requestToJoin}},function(e){return{leaveVanpool:function(t){e({type:Mt,data:t})},requestToJoin:function(){e({type:Kt})}}})(TN)),IN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={isEditing:!1,validExp:!1},n}return Object(ap.a)(a,[{key:"onEdit",value:function(){this.props.editToggle(),this.setState({isEditing:!0})}},{key:"onStopEditing",value:function(){this.props.editToggle(),this.setState({isEditing:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(sy,Object.assign({},this.props.card,{isEditable:!this.state.isEditing&&!this.props.isEditable,isEditing:this.state.isEditing,onEdit:function(){return e.onEdit()},validExp:!0,onStopEditing:function(){return e.onStopEditing()}})))}}]),a}(n.Component),MN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={addCardModalActive:!1,editCardActive:!1,card:{valid:!1}},n}return Object(ap.a)(a,[{key:"saveCard",value:function(){this.props.addPayment(this.state.card),this.setState({addCardModalActive:!1})}},{key:"closeSaveCardModal",value:function(){this.setState({addCardModalActive:!1})}},{key:"openModal",value:function(){this.setState({addCardModalActive:!0})}},{key:"addNewCard",value:function(e,t){this.setState({card:e})}},{key:"editMode",value:function(){this.setState({editCardActive:!this.state.editCardActive})}},{key:"render",value:function(){var e=this,t=this.props.cards;return r.a.createElement("div",{className:"payment-info"},r.a.createElement(kb,{title:"Card Wallet",Icon:Hf},t.map(function(t){return r.a.createElement(IN,{key:t.id,card:t,editToggle:function(){return e.editMode()},isEditable:e.state.editCardActive})}),r.a.createElement("button",{className:"button add-card",disabled:this.state.editCardActive,onClick:function(){return e.openModal()}},r.a.createElement(Vf,null)," Add Card")),r.a.createElement(vO,{title:"Add Card",active:this.state.addCardModalActive,save:function(){return e.saveCard()},cancel:function(){return e.closeSaveCardModal()},disabled:!this.state.card.valid,saveButtonText:"Save"},r.a.createElement("div",{className:"new-card"},r.a.createElement("div",{className:"radio selected"},r.a.createElement("fieldset",{className:"selected",disabled:!1},r.a.createElement(Gg,{onChange:function(t){return e.addNewCard(t,e.props)},value:this.props.newCard}))))))}}]),a}(n.Component);var RN=Ts([Bs])(Object(o.b)(null,function(e,t){return{addPayment:function(t){e({type:tt,data:t})}}})(MN)),_N=function(e){return!e||/^[A-Z0-9]{1,19}$/i.test(e)};function LN(e){var t=e.value,a=e.onChange,n=t.licenseNumber,c=void 0===n?"":n,s=t.licenseState,o=void 0===s?"":s;return r.a.createElement("div",{className:"drivers-license"},r.a.createElement(Wg,{type:"text",value:c,className:"edit-license ".concat(c?"":"invalid"),placeholder:"License Number",maxLength:"19",onChange:function(e){return _N(e.target.value)&&a({licenseNumber:e.target.value,licenseState:o})}}),c?null:r.a.createElement("span",{className:"license-invalid"},"Please enter a valid license number."),r.a.createElement("label",{htmlFor:"stateDropDown",className:"attach"},"State"),r.a.createElement(rN,{value:o,onChange:function(e){return a({licenseNumber:c,licenseState:e.target.value})}}))}function UN(e){var t=e.edit,a=e.profile,n=e.driver,c=n.license,s=n.state;return a.isInVanpool?r.a.createElement("div",{className:"driver-info"},r.a.createElement(kb,{title:"Driver Information",Icon:Gf,isEditable:!!a.isDriver,edit:t},a.isPendingDriverApproval?r.a.createElement("div",{className:"apply"},r.a.createElement("p",null,"Your driver application has been submitted and is pending approval. If you have questions, please call"," ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),".")):a.isDriver?r.a.createElement("div",null,r.a.createElement(jb,{label:"License",className:"license"},c),r.a.createElement(jb,{label:"State",className:"state"},s)):r.a.createElement("div",{className:"apply"},r.a.createElement("p",null,"Apply to be a driver for your Commute!"),r.a.createElement(tp.b,{className:"button",to:"/driver-application"},"Apply to be a Driver")))):null}function VN(e){var t=e.license,a=e.state,n=e.cancel,c=e.save,s=e.update;return r.a.createElement(kb,{title:"Driver Information",Icon:Gf,isEditable:!1},r.a.createElement(LN,{value:{licenseNumber:t,licenseState:a},onChange:function(e){var t=e.licenseNumber,a=e.licenseState;return s({license:t,state:a})}}),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{className:"button small cancel",onClick:n},"Cancel"),r.a.createElement("button",{className:"button small save",onClick:c,disabled:!t},"Update License")))}var FN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={editing:!1},n}return Object(ap.a)(a,[{key:"edit",value:function(){this.setState(Object(On.a)(Object(On.a)({editing:!0},this.props),{},{license:""}))}},{key:"cancel",value:function(){this.setState(Object(On.a)({editing:!1},this.props))}},{key:"save",value:function(){this.props.save(this.state),this.setState({editing:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"driver-info ".concat(this.state.editing?"edit":"")},this.state.editing?r.a.createElement(VN,Object.assign({},this.state,{update:function(t){return e.setState(t)},cancel:function(){return e.cancel()},save:function(){return e.save()}})):r.a.createElement(UN,Object.assign({},this.props,{edit:function(){return e.edit()}})))}}]),a}(n.Component);var BN=Object(o.b)(function(e){return{profile:e.userAuth}},function(e){return{save:function(t){e({type:It,data:t})}}})(FN);var YN=Object(o.b)(null,function(e){return{toggle:function(t){e({type:Ft,data:t})}}})(function(e){var t=e.preferences,a=e.toggle;return r.a.createElement("div",{className:"preferences"},r.a.createElement(kb,{title:"Notification Preferences",Icon:Qf,isEditable:!1},t.map(function(e){return r.a.createElement("div",{className:"preference",key:e.preferenceCode},r.a.createElement(sO,{label:e.preferenceName,checked:e.isSelected,disabled:!1,onChange:function(){return a(e)}}),"EPI"===e.preferenceCode?r.a.createElement("p",{className:"note"},"If you sign up for paperless billing, you\u2019ll receive an email every month with your invoice to view and pay. You can view, print, or download your current and previous invoices from your"," ",r.a.createElement(tp.b,{className:"underline",to:"/payment/history/invoices"},"account Invoice tab"),"."):null)})))}),WN=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){nr.toggleFeatures.profile&&this.props.init()}},{key:"componentWillReceiveProps",value:function(e){if(!e.profile.loading&&!this.scrolled){var t="."+this.props.location.pathname.replace(this.props.match.path,"").substr(1);setTimeout(function(){return QO(t)},100),this.scrolled=!0}}},{key:"render",value:function(){var e=Ds([Bs])&&!Ds([Fs]);return r.a.createElement("div",{className:"profile ".concat(e?"no-trip":"")},r.a.createElement(Vy,{name:"profile"},r.a.createElement(mp,{isLoading:this.props.profile.loading}),r.a.createElement("div",{className:"sidebar"},r.a.createElement(XO,{selector:".profile-info"},r.a.createElement(Af,null)," My Profile"),r.a.createElement(XO,{selector:".azure-settings"},r.a.createElement(cb,null)," Password"),r.a.createElement(XO,{selector:".commute-info"},r.a.createElement(Af,null)," Commute Profile"),r.a.createElement(XO,{selector:".vanpool-info"},r.a.createElement(Rf,null)," Vanpool"),this.props.authorization.isInVanpool?r.a.createElement(XO,{className:"driver-info-link",selector:".driver-info"},r.a.createElement(Gf,null)," Driver Information"):null,r.a.createElement(XO,{selector:".preferences"},r.a.createElement(Qf,null)," Notification Preferences"),r.a.createElement(Is,{roles:[Bs,Gs],required:!1},r.a.createElement(XO,{selector:".payment-info"},r.a.createElement(Hf,null)," Card Wallet"))),r.a.createElement("div",{className:"body"},r.a.createElement(mN,this.props.profile),r.a.createElement(gN,null),r.a.createElement(AN,null),r.a.createElement(PN,this.props.profile.vanpool),r.a.createElement(Is,{roles:[Gs],required:!1},r.a.createElement(BN,this.props.profile)),r.a.createElement(YN,{preferences:this.props.profile.preferences}),r.a.createElement(Is,{roles:[Gs],required:!1},r.a.createElement(RN,{cards:this.props.cards})))))}}]),a}(n.Component);var HN=Object(o.b)(function(e){return{profile:e.profile,cards:e.payments.cards,authorization:e.userAuth}},function(e,t){return{init:function(){e({type:Nt}),e({type:st})}}})(WN),GN=60,qN=60*GN,zN=24*qN;function KN(e,t,a){return e*qN+t*GN+a}function JN(e,t){if(e===t)return zN;if(e<t)return zN-JN(t,e);var a=e.split(":").map(function(e){return parseInt(e,10)}),n=Object(hc.a)(a,3),r=n[0],c=n[1],s=n[2],o=t.split(":").map(function(e){return parseInt(e,10)}),i=Object(hc.a)(o,3),l=i[0],u=i[1],m=i[2];return KN(r,c,s)-KN(l,u,m)}function QN(e){var t=e.inboundRoutePoints,a=e.outboundRoutePoints;if(!t.length)return{index:-1,route:"outboundRoutePoints"};var n=vc.currentTime();return[].concat(Object(Wn.a)(t.map(function(e,t){return{diff:JN(e.stopTime,n),index:t,route:"inboundRoutePoints"}})),Object(Wn.a)(a.map(function(e,t){return{diff:JN(e.stopTime,n),index:t,route:"outboundRoutePoints"}}))).reduce(function(e,t){return t.diff<e.diff?t:e})}function XN(e){var t=e.balance;return null===t?null:r.a.createElement("div",{className:"fuel-card"},r.a.createElement("div",{className:"title"},"Fuel Card"),r.a.createElement("div",{className:"label"},"Avail. Balance"),r.a.createElement("div",{className:"balance"},bc.formatUSD(t)),r.a.createElement("div",{className:"note"},"To add funds, increase your limit, call"," ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),"."))}var $N=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){if(!this.props[this.props.show])return null;var e=this.props[this.props.show].current,t=bc.formatUSD(e.fuelSavings);return r.a.createElement("div",{className:"impact-data"},r.a.createElement("div",{className:"miles-saved cell"},r.a.createElement("img",{src:Ih.a,alt:"van"}),r.a.createElement("span",null,r.a.createElement("label",null,"Miles Saved"),r.a.createElement("span",{className:"value"},e.milesSaved.toLocaleString()),r.a.createElement("span",{className:"units"},"mi"))),r.a.createElement("div",{className:"fuel-saved cell"},r.a.createElement("img",{src:Gh.a,alt:"pump"}),r.a.createElement("span",null,r.a.createElement("label",null,"Fuel Gallons Saved"),r.a.createElement("span",{className:"value"},e.fuelGallonsSaved.toLocaleString()),r.a.createElement("span",{className:"units"},"gal"))),r.a.createElement("div",{className:"co2-saved cell"},r.a.createElement("img",{src:zh.a,alt:"tree"}),r.a.createElement("span",null,r.a.createElement("label",null,"CO2 lbs Saved"),r.a.createElement("span",{className:"value"},e.co2Savings.toLocaleString()),r.a.createElement("span",{className:"units"},"lbs"))),r.a.createElement("div",{className:"fuel-savings cell"},r.a.createElement("img",{src:Bh.a,alt:"money"}),r.a.createElement("span",null,r.a.createElement("label",null,"Fuel Cost Savings"),r.a.createElement("span",{className:"value"},t.substring(0,t.indexOf("."))))))}}]),a}(n.Component);var ZN=Object(o.b)(function(e){return e.impactData},function(e){return{init:function(){Ds([_s])?e({type:We}):e({type:He})}}})($N);function ek(e){var t=e.includeParking,a=e.includeAccountDashboardInfo;return r.a.createElement("div",{className:"lookup"},r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Miles Saved"),r.a.createElement("div",{className:"value"},"Weekly distance traveled both directions")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Fuel Saved"),r.a.createElement("div",{className:"value"},"Single Occupancy Vehicle MPG value (24.8 MPG)")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"CO2 Saved"),r.a.createElement("div",{className:"value"},"Constant CO2 lbs saved per gallon of gas burned x fuel gallons saved")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Fuel Savings"),r.a.createElement("div",{className:"value"},"Fuel gallons saved times weekly state fuel price")),t?r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Parking Spots Saved"),r.a.createElement("div",{className:"value"},"Riders trips, minus driver, multipled by scheduled days this month")):null,a?r.a.createElement("div",null,r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Parking Spots Saved"),r.a.createElement("div",{className:"value"},"Spots saved by not utilizing single occupancy vehicles")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Parking Savings"),r.a.createElement("div",{className:"value"},"Monetary value of a parking space x total parking spaces saved.\xa0\xa0National average for a US surface\xa0spot equals $24,000.00")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Goals"),r.a.createElement("div",{className:"value"},"Quarterly established target (optional)")),r.a.createElement("div",{className:"pair"},r.a.createElement("div",{className:"key"},"Potential"),r.a.createElement("div",{className:"value"},"Quarterly established target of total employees likely to participate (optional)"))):null)}var tk=function(e){var t=e.includeParking;e.includeAccountDashboardInfo;return r.a.createElement(Jg,{message:r.a.createElement(ek,{includeParking:t,includeAccountDashboardInfo:!0})})},ak=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={show:Ds([_s])?"participant":"registeredUser"},n}return Object(ap.a)(a,[{key:"render",value:function(){var e=this,t=this.state.show,a="participant"===t,n="registeredUser"===t;return r.a.createElement("div",{className:"impact-data-container solid"},n?r.a.createElement("div",{className:"toggle"},r.a.createElement("div",{className:"label"},r.a.createElement("div",{className:"title"},"My Data ",r.a.createElement(tk,null)),r.a.createElement("div",{className:"time"},"Month to Date"))):r.a.createElement("div",{className:"toggle"},r.a.createElement("button",{className:"".concat(a?"active":""," my-data"),disabled:a,onClick:function(){e.setState({show:"participant"})}},r.a.createElement(Af,null)),r.a.createElement("button",{className:"".concat(a?"":"active"," vanpool"),disabled:!a,onClick:function(){e.setState({show:"vanpool"})}},r.a.createElement(Rf,null)),r.a.createElement("div",{className:"label"},r.a.createElement("div",{className:"title"},a?"My Data":"Vanpool",r.a.createElement(tk,null)),r.a.createElement("div",{className:"time"},"Month to Date"))),r.a.createElement(ZN,{show:t}))}}]),a}(n.Component),nk=function(e){var t=e.children;return r.a.createElement("span",{className:"green"},t)};function rk(e){var t=e.recurringPayments;return t.length>1?r.a.createElement(tp.b,{className:"payment-recurring",to:"/payment/history/payments"},"Multiple recurring payments are scheduled for"," ",t[0].month,". ",r.a.createElement(nk,null,"Click to view")):1===t.length?r.a.createElement(tp.b,{className:"payment-recurring",to:"/payment/history/payments"},"A recurring payment of"," ",r.a.createElement("b",null,bc.formatUSD(t[0].amount))," is scheduled for ",t[0].month," ",t[0].every,"."," ",r.a.createElement(nk,null,"Click to view")):r.a.createElement(tp.b,{className:"payment-recurring",to:"/payment/history/payments"},"No recurring payments are scheduled")}function ck(e){var t=e.recurringPayments;return r.a.createElement("div",{className:"vanpool-payment-summary solid"},r.a.createElement("div",{className:"tablet-left"},r.a.createElement("div",{className:"payment-group"},r.a.createElement(jg,null),r.a.createElement(tp.b,{className:"primary button",to:"/payment"},"Payments")),r.a.createElement(rk,{recurringPayments:t})))}function sk(e){var t=e.recurringPayments,a=e.allocation,n=a.billingDate,c=a.amount,s="N/A"!==n?vc.parseDateAsMonthDayOrdinal(n).toUpperCase():n,o=bc.formatUSD(c);return r.a.createElement("div",{className:"vanpool-payment-summary solid"},r.a.createElement("div",{className:"tablet-right"},r.a.createElement("div",{className:"payment-due-date"},"PAYMENT REQUEST DUE ",s),r.a.createElement("div",{className:"payment-balance-due"},o),r.a.createElement("div",{className:"tools"},r.a.createElement(tp.b,{className:"button split",to:"/payment/pay"},"Pay Now"),r.a.createElement(tp.b,{className:"primary button",to:"/payment"},"Payments"))),r.a.createElement("div",{className:"tablet-left"},r.a.createElement("div",{className:"payment-group"},r.a.createElement(jg,null)),r.a.createElement(rk,{recurringPayments:t})))}function ok(e){var t=e.recurringPayments,a=e.paymentSummary,n=a.invoiceDueDate,c="N/A"!==n?vc.parseDateAsMonthDayOrdinal(n).toUpperCase():n,s="N/A"===a.currentAccountBalance?"$0.00":a.currentAccountBalance;return r.a.createElement("div",{className:"vanpool-payment-summary solid"},r.a.createElement("div",{className:"tablet-right"},r.a.createElement("div",{className:"payment-due-date"},"NEXT PAYMENT DUE ",c),r.a.createElement("div",{className:"payment-balance-due"},s),r.a.createElement("div",{className:"tools"},r.a.createElement(tp.b,{className:"button split",to:"/payment/manage"},"Split Bill"),r.a.createElement(tp.b,{className:"primary button",to:"/payment"},"Payments"))),r.a.createElement(Is,{roles:[qs],required:!1},r.a.createElement("div",{className:"tablet-left"},r.a.createElement("div",{className:"payment-group"},r.a.createElement(jg,null)),r.a.createElement(rk,{recurringPayments:t}))))}var ik=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props.allocation.amount,t=Ds([Vs])&&!Ds([Ms]);return 0!==e&&t&&!Ds([Hs])?r.a.createElement(sk,this.props):Ds([Hs])||t?r.a.createElement(ck,this.props):r.a.createElement(ok,this.props)}}]),a}(n.Component);var lk=Object(o.b)(function(e){return{paymentSummary:e.dashboardPaymentSummary,recurringPayments:e.scheduledPayments.scheduled,allocation:e.paymentManagement}},function(e){return{init:function(){!Ds([Hs])&&Ds([Us,Ms,qs])&&e({type:ma}),!Ds([Hs])&&Ds([Vs])&&e({type:fa}),e({type:bt})}}})(ik);var uk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e,t=this.props,a=t.title,n=t.details,c=t.clickThruURL;return a?c?r.a.createElement("div",{className:"employer-content"},r.a.createElement("a",{href:c,target:(e=c,e.includes(window.location.origin)?"":"_blank")},r.a.createElement("div",{className:"title"},a),r.a.createElement("div",{className:"details"},n))):r.a.createElement("div",{className:"employer-content"},r.a.createElement("div",{className:"title"},a),r.a.createElement("div",{className:"details"},n)):null}}]),a}(n.Component);var mk=Object(o.b)(function(e){return e.dashboard.employerContent||{}},function(e){return{init:function(){e({type:se})}}})(uk),dk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props.contactInfo;return e?r.a.createElement("div",{className:"contact-info"},e.coordinator?r.a.createElement(Is,{roles:[Us],required:!1},r.a.createElement(pk,Object.assign({},e.coordinator,{type:"coordinator",title:"Coordinator"}))):null,e.branchContactDetails?r.a.createElement(pk,Object.assign({},e.branchContactDetails,{fullName:"Commute with Enterprise",type:"branch",title:""})):null,e.participantEmployer?r.a.createElement(pk,Object.assign({},e.participantEmployer,{type:"employer",title:e.participantEmployer.employerName})):null):null}}]),a}(n.Component);function pk(e){var t=e.type,a=e.fullName,n=e.title,c=e.email,s=e.phoneNumber;return r.a.createElement("div",{className:"contact ".concat(t)},r.a.createElement("div",{className:"name"},a),r.a.createElement("div",{className:"title"},n),r.a.createElement("div",{className:"phone"},r.a.createElement(wf,null),r.a.createElement(up,{phone:s})),r.a.createElement("div",{className:"email",onClick:function(){window.open("mailto:".concat(c),"_self")}},r.a.createElement(Tf,null),c))}var vk=Object(o.b)(function(e){return{contactInfo:e.dashboard.contactInfo}},function(e){return{init:function(){e({type:re})}}})(dk);function hk(e){var t=e.stop,a=e.index;return r.a.createElement("div",{className:"top stop-tracker"},r.a.createElement("div",{className:"next"},"Next Stop"),r.a.createElement("div",{className:"letter"},String.fromCharCode("A".charCodeAt(0)+a)),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"desc"},t.description),r.a.createElement("div",{className:"addr"},t.address)),r.a.createElement("div",{className:"time"},vc.parseTimeAsTimeOnly(t.stopTime),r.a.createElement("span",null,vc.parseTimeAsAmPm(t.stopTime))))}var fk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this;if(!this.props.status)return null;var t=this.props.status,a=t.displayDidEveryoneRideToday,n=t.daysPastDue,c=t.isPastMonthApproved,s=Ds([Bs])?"you":"everyone";if(!c){var o=ic()().format("MMMM"),i=ic()().add(-1,"month").format("MMMM"),l=ic()().add(-1,"month").year();return r.a.createElement("div",{className:"row trip-banner solid overdue"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement(Jf,null),r.a.createElement("div",{className:"message"},i," ",l," is open for approval until"," ",o," 10th.")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button warning",to:"/trip-recording",desktopafter:i},"Approve")))}return n?r.a.createElement("div",{className:"row trip-banner solid overdue"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement("div",{className:"days"},n),r.a.createElement("div",{className:"message"},"You have travel days that need to be recorded.")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button warning",to:"/trip-recording",desktopafter:"Past Days"},"Record"))):a?r.a.createElement("div",{className:"row trip-banner solid"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement(Of,null),r.a.createElement("div",{className:"message"},"Did ",s," ride both AM and PM trips today?")),r.a.createElement("div",{className:"trip-banner-tools yes-no"},r.a.createElement("button",{className:"button primary",onClick:function(){return e.props.submit()}},"Yes"),r.a.createElement(tp.b,{className:"button cancel",to:"/trip-recording"},"No"))):r.a.createElement("div",{className:"row trip-banner solid overdue"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement(Of,null),r.a.createElement("div",{className:"message desktop-only"},"You are all caught up!"),r.a.createElement("div",{className:"message mobile-only"},"You are all caught up on trip recording!")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button primary",to:"/trip-recording",desktopafter:"Trip Recording"},"View")))}}]),a}(n.Component);var bk=ws([Fs])(Object(o.b)(function(e){return{status:e.dashboard.status}},function(e){return{init:function(){e({type:H})},submit:function(){e({type:q})}}})(fk)),Ek=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={stopShowing:!1,status:{}},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=Object(sc.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.next=3,Pc.get("".concat(nr.apiBaseUrl,"/vanpools/vanpool/participant/tripdata/status "));case 3:t=e.sent,this.mounted&&this.setState({status:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return!this.state.status.daysPastDue||this.state.stopShowing?r.a.createElement("div",{className:"row trip-banner solid overdue"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement(Of,null),r.a.createElement("div",{className:"message desktop-only"},"You are all caught up!"),r.a.createElement("div",{className:"message mobile-only"},"You are all caught up on trip recording!")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button primary",to:"/trip-recording",desktopafter:"Trip Recording"},"View"))):this.state.status.displayDidYouCommuteToday?r.a.createElement("div",{className:"row trip-banner solid"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement(Of,null),r.a.createElement("div",{className:"message"},"Did you commute today?")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button primary",to:"/trip-recording"},"Yes"),r.a.createElement("button",{className:"button cancel",onClick:function(){return e.setState({stopShowing:!0})}},"No"))):r.a.createElement("div",{className:"row trip-banner solid overdue"},r.a.createElement("div",{className:"trip-banner-message"},r.a.createElement("div",{className:"message small"},"When you do not commute in the vanpool, you have until the end of the month to let us know how you traveled.")),r.a.createElement("div",{className:"trip-banner-tools"},r.a.createElement(tp.b,{className:"button primary",to:"/trip-recording",desktopafter:"Trip Recording"},"View")))}}]),a}(n.Component),gk=ws([Ls])(Ts([Fs])(Object(o.b)(function(e){return e.myTrips})(Ek))),yk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={showRoute:"outboundRoutePoints",inviting:!1},n.redirectTo=n.redirectTo.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(),this.props.setDirections([])}},{key:"componentWillReceiveProps",value:function(e){if(e.route!==this.props.route){var t=QN(e.route),a=t.route,n=t.index;this.setState({showRoute:a,nextStop:n}),this.props.setDirections(e.route[a])}}},{key:"redirectTo",value:function(e){var t=this;return function(){return t.setState({navigateTo:e})}}},{key:"render",value:function(){var e=this,t=this.props.dashboard.vanpoolDetails,a=this.state,n=a.navigateTo,c=a.showRoute,s=a.nextStop,o=a.inviting;if(n)return r.a.createElement(cp.b,{push:!0,to:n});var i=s>-1?this.props.route[c][s]:{},l=this.props.dashboard.profile,u=r.a.createElement("div",{className:"badges"},r.a.createElement("div",{className:"app-store"},r.a.createElement("a",{href:"https://itunes.apple.com/us/app/commute-with-enterprise/id1440331154",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:uf.a,alt:"download-app-store-badge"}))),r.a.createElement("div",{className:"play-store"},r.a.createElement("a",{href:"https://play.google.com/store/apps/details?id=com.commutewithenterprise.mobile",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:of.a,alt:"download-play-store-badge"}))));return r.a.createElement("div",{className:"non-pre-delivery"},r.a.createElement(hk,{stop:i,index:s}),r.a.createElement("div",{className:"map-spacer",onClick:this.redirectTo("/route")},r.a.createElement(eE,{controls:!1,padding:window.innerWidth>768?{bottom:125,top:-100,left:0,right:0}:null})),r.a.createElement("div",{className:"bottom bottom-grid main-content"},r.a.createElement("div",{className:"left-side"},r.a.createElement(bk,null),r.a.createElement(gk,null),r.a.createElement("div",{className:"vanpool-details solid"},r.a.createElement("div",{className:"maintenance-container",onClick:this.redirectTo("/vanpool")},r.a.createElement(AO,{nextMaintenanceDate:t.nextScheduledMaintenanceDate,nextMaintenanceMileage:t.nextScheduledMaintenanceOdometer,lastMaintenanceDate:t.lastPreventativeMaintenanceOdometerDate,lastMaintenanceMileage:t.lastPreventativeMaintenanceOdometer})),r.a.createElement("div",{className:"row vehicle",onClick:this.redirectTo("/vanpool")},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.vehicleImage,alt:"Vehicle Type"})),r.a.createElement("div",{className:"column"},t.vanpoolName,r.a.createElement("div",{className:"id"},t.vanpoolId)),r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"seats"},r.a.createElement("div",{className:"label-text"},"Seats"),r.a.createElement("img",{src:Ih.a,alt:"van"}),r.a.createElement("span",null,t.vehicleCapacity)),r.a.createElement("div",{className:"occupancy"},r.a.createElement("div",{className:"label-text"},"Riders"),r.a.createElement("img",{src:Rh.a,alt:"people"}),r.a.createElement("span",null,t.participantCount)))),r.a.createElement(Ps,{roles:[Us,Fs],required:!1},r.a.createElement("div",{className:"row invite"},r.a.createElement("div",{className:"message"},"Invite others to join your Commute."),r.a.createElement("button",{className:"button",onClick:function(){return e.setState({inviting:!0})}},"Invite Riders"))),r.a.createElement(Is,{roles:[qs],required:!1},l?""!==l.driverStatus&&null!==l.driverStatus&&void 0!==l.driverStatus||l.roles.includes("driver")||l.roles.driver?"":r.a.createElement("div",{className:"row drive"},r.a.createElement("div",{className:"apply-drive"},r.a.createElement("a",{href:"https://members.commutewithenterprise.com/#/driver-application"},"Apply To Drive For Your Commute"))):"")),r.a.createElement(Is,{roles:[qs],required:!1},r.a.createElement(ak,null)),r.a.createElement(mk,null)),r.a.createElement("div",{className:"right-side"},r.a.createElement(lk,null),r.a.createElement("div",{className:"ipad-horizontal"},r.a.createElement(XN,{balance:this.props.dashboard.fuelCardBalance}),r.a.createElement(vk,null))),r.a.createElement(EO,{active:o,close:function(){return e.setState({inviting:!1})}})),u)}}]),a}(n.Component);var Ok=ws([_s,qs])(Object(o.b)(function(e){return{dashboard:e.dashboard,route:e.vanpoolRoute}},function(e){return{init:function(){e({type:ae}),e({type:Oe})},setDirections:function(t){e({type:Fe,data:t})}}})(yk));var Nk=ws([Rs])(function(){return r.a.createElement("div",{className:"pre-delivery"},r.a.createElement("div",{className:"title"},"Welcome to Commute with Enterprise"),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"message"},r.a.createElement("p",null,"From this dashboard, you\u2019ll be able to access everything you need to make sure your vanpool runs smoothly."),r.a.createElement(Ps,{roles:[Us],required:!1},r.a.createElement("p",null,"Immediately, you can set up your profile, make or schedule a payment, view the status of your roster, apply to be a driver or invite others to join your commute."),r.a.createElement("p",null,"Upon delivery of your vehicle, you'll have even more options: split the balance with your fellow riders, manage the route and roster, update your vehicle and Commute details and, when available, record trip data.")),r.a.createElement(Is,{roles:[Us],required:!1},r.a.createElement("p",null,"Immediately, you can set up your profile, make or schedule a payment, or apply to be a driver."),r.a.createElement("p",null,"Upon delivery of your vehicle, please check back as you\u2019ll have even more options and features available.")))),r.a.createElement("div",{className:"footer"},"Call us at"," ",r.a.createElement("span",{className:"phone"},r.a.createElement(up,{phone:"1-(800)-VAN-4-WORK"}))," ","if you have questions or need additional information."))}),kk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={showRoute:"outboundRoutePoints"},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){if(e.route!==this.props.route){var t=QN(e.route),a=t.route,n=t.index;this.setState({showRoute:a,nextStop:n}),this.props.setDirections(e.route[a])}}},{key:"render",value:function(){var e=this.state,t=e.showRoute,a=e.nextStop,n=a>-1?this.props.route[t][a]:{},c=Ds([Fs]);return r.a.createElement("div",{className:"registered-user ".concat(c?"":"no-trip")},r.a.createElement(hk,{stop:n,index:a}),r.a.createElement("div",{className:"map-spacer no-click"},r.a.createElement(eE,{controls:!1,padding:window.innerWidth>768?{bottom:125,top:-100,left:0,right:0}:null})),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"left-side"},r.a.createElement(Ps,{roles:[Fs],required:!1},r.a.createElement(bk,null)),r.a.createElement(ak,null),r.a.createElement(Sb,{showVan:!0}),r.a.createElement(mk,null)),r.a.createElement("div",{className:"right-side"},r.a.createElement(vk,null))))}}]),a}(n.Component);var jk=ws([Bs])(Object(o.b)(function(e){return{route:e.participantRoute}},function(e,t){return{init:function(){e({type:ge})},setDirections:function(t){e({type:Fe,data:t})}}})(kk));var Ck={};function xk(){return{startDate:vc.formatMoment(vc.firstDayOfQuarter(vc.yesterdayMoment()),dc),endDate:vc.yesterday(),displayValue:"".concat(vc.formatMoment(vc.firstDayOfQuarter(vc.yesterdayMoment()),"MMMM D")," - ").concat(vc.formatMoment(vc.yesterdayMoment(),"MMMM D, YYYY"))}}Ck.currentQuarter=function(){return xk()},Ck.generateQuartersList=function(){var e,t=[];for(t.push(xk()),e=1;e<12;e++){var a=vc.startOfQuarter(-e),n=vc.endOfQuarter(-e);t.push({startDate:vc.formatMoment(a,dc),endDate:vc.formatMoment(n,dc),displayValue:"".concat(vc.formatMoment(a,"MMMM D")," - ").concat(vc.formatMoment(n,"MMMM D, YYYY"))})}return t.filter(function(e){return parseInt(e.startDate.split(" ").pop(),10)>=2019})},Ck.generateMonthsList=function(){return[{displayValue:"January",value:0},{displayValue:"February",value:1},{displayValue:"March",value:2},{displayValue:"April",value:3},{displayValue:"May",value:4},{displayValue:"June",value:5},{displayValue:"July",value:6},{displayValue:"August",value:7},{displayValue:"September",value:8},{displayValue:"October",value:9},{displayValue:"November",value:10},{displayValue:"December",value:11}]},Ck.generateYearsList=function(){var e=(new Date).getFullYear();return new Array(4).fill(e).map(function(e,t){return e-t}).filter(function(e){return e>=2019})},Ck.currentMonth=function(){var e=vc.currentMoment();return{displayValue:e.format("MMMM"),value:e.month()}},Ck.currentYear=function(){return vc.currentMoment().year()},Ck.mapMonthYearToTimePeriod=function(e,t){return{startDate:vc.formatMoment(vc.getMoment("".concat(e.displayValue,", ").concat(t),"MMMM, YYYY").startOf("month"),dc),endDate:vc.formatMoment(vc.getMoment("".concat(e.displayValue,", ").concat(t),"MMMM, YYYY").endOf("month"),dc),displayValue:"".concat(e.displayValue," ").concat(t)}};var Sk=Ck;function Dk(e){var t=e.data,a=t.employees,n=t.vanpoolers,c=t.privateSubsidies,s=t.transitSubsidies,o=a&&(a.count||0===a.count)?r.a.createElement("div",{className:"badge employees"},r.a.createElement("img",{src:Lh.a,alt:"person"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Employees"),r.a.createElement("div",{className:"data"},a.count.toLocaleString("en-us")),r.a.createElement("div",{className:"context"},a.description))):null,i=n&&(n.count||0===n.count)?r.a.createElement("div",{className:"badge potential-vanpoolers"},r.a.createElement("img",{src:Ih.a,alt:"van"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Potential Vanpoolers"),r.a.createElement("div",{className:"data"},n.count.toLocaleString("en-us")),r.a.createElement("div",{className:"context"},n.description))):null,l=c&&(c.count||0===c.count)?r.a.createElement("div",{className:"badge private-subsidies"},r.a.createElement("img",{src:Bh.a,alt:"Money"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Private Subsidies"),r.a.createElement("div",{className:"data"},bc.formatUSD(c.count)),r.a.createElement("div",{className:"context"},c.description))):null,u=s&&(s.count||0===s.count)?r.a.createElement("div",{className:"badge transit-subsidies"},r.a.createElement("img",{src:Bh.a,alt:"Money"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Transit Subsidies"),r.a.createElement("div",{className:"data"},bc.formatUSD(s.count)),r.a.createElement("div",{className:"context"},s.description))):null;return r.a.createElement("div",{className:"impact-data"},o,i,l,u)}var Ak={root:{width:"100%",height:"2.5rem",position:"relative",border:"solid 2px #a5b0ba",borderRadius:"25px",display:"inline-block"},potential:{position:"absolute",padding:"1rem",top:0,left:0,width:"100%",height:"100%"},total:function(e,t){return{zIndex:e,position:"absolute",padding:"1rem",top:0,left:0,height:"100%",width:"".concat(t,"%"),backgroundColor:"#5e83ad",color:"white",border:"solid 1px white",borderRadius:"25px",display:"inline-block",lineHeight:"0px",textAlign:"right",maxWidth:"100%"}},goals:function(e,t){return{zIndex:e,position:"absolute",padding:"1rem",top:0,left:0,width:"".concat(t,"%"),maxWidth:"100%",height:"100%",backgroundColor:"#a5b0ba",display:"inline-block",border:"solid 1px white",borderRadius:"25px"}}},wk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"render",value:function(){var e=this.props,t=e.total,a=e.potential,n=e.goals,c=e.isCurrency,s=a?t/a*100:0,o=a?n/a*100:0;return t=t||0,r.a.createElement("div",{className:"stacked-bar",style:Ak.root},r.a.createElement("div",{className:"bar-potential",style:Ak.potential}),r.a.createElement("div",{style:Ak.goals(1,o)}),r.a.createElement("div",{style:Ak.total(2,s)},c?bc.formatUSD(t):Object(_i.round)(t,1).toLocaleString()))}}]),a}(n.Component);function Tk(e){var t=e.label,a=e.total,n=e.goals,c=e.potential,s=e.metric,o=e.isCurrency,i=e.noDataMessage;a=a||0;var l=n||c;return r.a.createElement("div",{className:"impact-data-stacked-bar"},r.a.createElement("div",{className:l?"label":"label  underline"},t),r.a.createElement(Pk,{hide:!l,total:a,isCurrency:o,goals:n,potential:c}),r.a.createElement(Ik,{hide:l,total:a,isCurrency:o,metric:s,noDataMessage:i}))}function Pk(e){var t=e.total,a=e.goals,n=e.potential,c=e.isCurrency;if(e.hide)return null;var s=Object(_i.round)(t/a*100,1).toLocaleString(),o=Object(_i.round)(t/n*100,1).toLocaleString(),i=a?r.a.createElement("div",null,r.a.createElement("label",null,"Goal:"),r.a.createElement("span",{className:"percent goal"},s,"%")):null,l=n?r.a.createElement("div",null,r.a.createElement("label",null,"Potential:"),r.a.createElement("span",{className:"percent potential"},o,"%")):null;return r.a.createElement("div",{className:"bar-container"},r.a.createElement(wk,{total:t,goals:a,potential:n,isCurrency:c}),r.a.createElement("div",{className:"details"},i,l))}function Ik(e){var t=e.hide,a=e.total,n=e.isCurrency,c=e.metric,s=e.noDataMessage;return t?null:a?r.a.createElement("div",{className:"total"},n?bc.formatUSD(a):a.toLocaleString(),r.a.createElement("span",{className:"metric"},c)):r.a.createElement("div",{className:"no-data"},s||"No data for selected time period")}var Mk=function(e){var t=e.title,a=e.timePeriod,n=e.data,c=e.isVanpool,s=n||{},o=s.milesSaved,i=s.parkingSpotsSaved,l=s.parkingSavings,u=s.fuelGallonsSaved,m=s.fuelSavings,d=s.co2Saved;return r.a.createElement("div",{className:"impact-data-container"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"label"},c?r.a.createElement(Rf,null):r.a.createElement(Jf,null)," ",t," ",r.a.createElement(tk,{includeAccountDashboardInfo:!0})),r.a.createElement("div",{className:"selected-dates"},a)),r.a.createElement("div",{className:"content"},r.a.createElement(Tk,Object.assign({label:"Miles Saved"},o,{metric:"mi"})),r.a.createElement(Tk,Object.assign({label:"CO2 Saved"},d,{metric:"lbs"})),r.a.createElement(Tk,Object.assign({label:"Fuel Gallons Saved"},u,{metric:"gal"})),r.a.createElement(Tk,Object.assign({label:"Fuel Savings"},m)),r.a.createElement(Tk,Object.assign({label:"Parking Spots Saved"},i)),r.a.createElement(Tk,Object.assign({label:"Parking Savings"},l))))},Rk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={quarters:Sk.generateQuartersList(),months:Sk.generateMonthsList(),years:Sk.generateYearsList(),selectedQuarter:Sk.currentQuarter(),selectedMonth:Sk.currentMonth(),selectedYear:Sk.currentYear(),open:!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=function(){return e.setState({open:!1})},window.addEventListener("click",this.unsubscribe)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.unsubscribe)}},{key:"toggleOpen",value:function(){this.setState({open:!this.state.open})}},{key:"toggleSelector",value:function(e){e?this.props.selectTimePeriod(this.state.selectedQuarter,e):this.selectYear(this.state.selectedYear)}},{key:"selectMonth",value:function(e){var t=this;this.setState({selectedMonth:e},function(){var a=Sk.mapMonthYearToTimePeriod(e,t.state.selectedYear);t.props.selectTimePeriod(a,!1)})}},{key:"selectQuarter",value:function(e){var t=this;this.setState({selectedQuarter:e},function(){t.props.selectTimePeriod(e,!0)})}},{key:"selectYear",value:function(e){var t=this;this.setState({selectedYear:e},function(){var a=Sk.mapMonthYearToTimePeriod(t.state.selectedMonth,e);t.props.selectTimePeriod(a,!1)})}},{key:"render",value:function(){var e=this,t=this.props.isQuarter,a=this.state,n=a.quarters,c=a.selectedQuarter,s=a.months,o=a.selectedMonth,i=a.selectedYear,l=a.years,u=a.open;return r.a.createElement("div",{className:"stats-period-selector-container",onClick:function(e){return e.stopPropagation()&&e.preventDefault()}},r.a.createElement("div",{className:"display",onClick:function(){return e.toggleOpen()}},t?_k(c.displayValue):"".concat(o.displayValue," ").concat(i)),u?r.a.createElement("div",{className:"selector toggle-tip"},r.a.createElement("div",{className:"toggle"},r.a.createElement("button",{className:t?"quarter active":"quarter",onClick:function(t){return e.toggleSelector(!0)}},"Quarter"),r.a.createElement("button",{className:t?"month":"month active",onClick:function(t){return e.toggleSelector(!1)}},"Month")),t?r.a.createElement(Lk,Object.assign({},this.props,{quarters:n,selectedQuarter:c,selectQuarter:function(t){return e.selectQuarter(t)}})):r.a.createElement(Uk,Object.assign({},this.props,{months:s,selectedMonth:o,years:l,selectedYear:i,selectMonth:function(t){return e.selectMonth(t)},selectYear:function(t){return e.selectYear(t)}}))):null)}}]),a}(n.Component),_k=function(e){return e.replace(/([a-z]{3})[a-z]+/gi,"$1").replace(/Sep/g,"Sept")};function Lk(e){var t=e.quarters,a=e.selectedQuarter,n=e.selectQuarter;return r.a.createElement("div",{className:"select"},r.a.createElement("select",{defaultValue:JSON.stringify(a),onChange:function(e){return n(JSON.parse(e.target.value))}},t.map(function(e){return r.a.createElement("option",{key:e.displayValue,value:JSON.stringify(e)},_k(e.displayValue))})))}function Uk(e){var t=e.months,a=e.selectedMonth,n=e.years,c=e.selectedYear,s=e.selectMonth,o=e.selectYear;return r.a.createElement("div",{className:"month-year-select"},r.a.createElement("div",{className:"select month"},r.a.createElement("select",{defaultValue:JSON.stringify(a),onChange:function(e){return s(JSON.parse(e.target.value))}},t.map(function(e){return r.a.createElement("option",{key:e.displayValue,value:JSON.stringify(e)},e.displayValue)}))),r.a.createElement("div",{className:"select year"},r.a.createElement("select",{defaultValue:c,onChange:function(e){return o(e.target.value)}},n.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}var Vk=a(226);function Fk(e){var t=e.gridData,a=e.displayType,n=e.useCustomTooltip,c=a&&a===Wm?zm:qm;return n&&(c.tooltips=Object.assign({},c.tooltips,Bk)),c.scales.yAxes[0].ticks.suggestedMax=Gm(t.datasets),r.a.createElement(Vk.b,{height:100,data:Zm.formatVanpoolLineChart(t),legend:Xm,options:c})}var Bk={enabled:!1,callbacks:{title:function(e){return e[0].xLabel},label:function(e,t){var a=e.index,n=t.datasets.find(function(e){return"Total"===e.label})||{data:[0]};return t.datasets.map(function(e){if("Potential"===e.label||"Goal"===e.label){var t=Math.floor((n.data[a]||0)/e.data[a]*100)+"%";return"Infinity%"!==t&&"NaN%"!==t||(t="0%"),[e.label,(e.data[a]||0).toLocaleString(),t]}return[e.label,(e.data[a]||0).toLocaleString()]})}},custom:function(e){var t=function(){var e=document.getElementById("chartjs-tooltip");return e||((e=document.createElement("div")).id="chartjs-tooltip",e.innerHTML="",document.body.appendChild(e)),e}();if(e.opacity){if(t.classList.remove("above","below","no-transform"),t.classList.add(e.yAlign||"no-transform"),e.body){var a=e.title||[],n=e.body.map(function(e){return e.lines});t.innerHTML='\n            <div class="custom-chart-js-tooltip">\n                '.concat(a.map(function(e){return'<div class="title">'.concat(e,"</div>")}),"\n                ").concat(n[0].map(function(e){return'<div class="item">\n                    <div class="label">'.concat(e[0],'</div>\n                    <div class="values">\n                        ').concat(e.slice(1).map(function(e){return'<div class="value">'.concat(e,"</div>")}).join(""),"\n                    </div>\n                </div>")}).join(""),"\n            </div>\n            ")}var r=this._chart.canvas.getBoundingClientRect(),c=r.left+window.pageXOffset+e.caretX,s=r.top+window.pageYOffset+e.caretY;Object.assign(t.style,{opacity:1,position:"absolute",left:"".concat(c,"px"),top:"".concat(s,"px")})}else t.style.opacity=0}};function Yk(e){var t=e.gridData,a=e.displayType,n=e.height,c=Km;switch(a){case Wm:c=Qm;break;case Hm:c=Jm}return r.a.createElement(Vk.a,{height:n,data:Zm.formatVanpoolBarChart(t),legend:Xm,options:c})}function Wk(e){var t=e.gridData,a=e.legendData;return a||t?(a=a||Zm.generateLegend(t),r.a.createElement("div",{className:"current-legend"},a.map(function(e,t){return r.a.createElement("div",{className:"legend",key:t},r.a.createElement("div",{className:"legend-circle",style:{borderColor:e.color}},r.a.createElement("img",{alt:""})),r.a.createElement("span",{className:"legend-label"},e.label))}))):null}function Hk(e){var t=e.isQuarter,a=e.timePeriod;return r.a.createElement("div",{className:"participation-container"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"label"},r.a.createElement(Af,null)," Participation"),t?null:r.a.createElement("div",{className:"selected-dates"},a)),t?r.a.createElement(Gk,e):r.a.createElement(qk,e))}var Gk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={init:!1,selectedGridDisplay:"participants",legend:null},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.state.init||this.setState({init:!0,selectedGridDisplay:"participants",legend:e.participants})}},{key:"componentDidMount",value:function(){this.setState({legend:this.props.participants})}},{key:"render",value:function(){var e=this,t=this.props,a=t.participants,n=t.vehicles,c=t.occupancy,s=this.state,o=s.selectedGridDisplay,i=s.legend;return r.a.createElement("div",null,r.a.createElement("div",{className:"control-section"},r.a.createElement("div",{className:"grid-navigation"},r.a.createElement("button",{className:"participants"===o?"active":null,onClick:function(){e.setState({selectedGridDisplay:"participants",legend:a})}},"Participants"),r.a.createElement("button",{className:"vehicles"===o?"active":null,onClick:function(){e.setState({selectedGridDisplay:"vehicles",legend:n})}},"Vehicles"),r.a.createElement("button",{className:"occupancy"===o?"active":null,onClick:function(){e.setState({selectedGridDisplay:"occupancy",legend:c})}},"Occupancy")),r.a.createElement(Wk,{gridData:i})),r.a.createElement("div",{className:"content"},null!=i?r.a.createElement(zk,{data:i.datasets}):null,"participants"===o?r.a.createElement(Fk,{gridData:a,useCustomTooltip:!0}):null,"vehicles"===o?r.a.createElement(Fk,{gridData:n,useCustomTooltip:!0}):null,"occupancy"===o?r.a.createElement(Fk,{gridData:c,displayType:Wm,useCustomTooltip:!0}):null))}}]),a}(n.Component),qk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"render",value:function(){var e=this.props,t=e.participants,a=e.vehicles,n=e.occupancy,c=Object.keys($m).reduce(function(e,t){return e.push({label:t,color:$m[t]}),e},[]);return r.a.createElement("div",{className:"month-charts-container"},r.a.createElement("div",{className:"legend control-section"},r.a.createElement(Wk,{legendData:c})),r.a.createElement("div",{className:"charts"},r.a.createElement("div",{className:"bar-chart"},r.a.createElement(zk,{data:t.datasets}),r.a.createElement(Yk,{gridData:t,height:400}),r.a.createElement("div",{className:"label"},"PARTICIPANTS")),r.a.createElement("div",{className:"bar-chart"},r.a.createElement(zk,{data:a.datasets}),r.a.createElement(Yk,{gridData:a,height:400}),r.a.createElement("div",{className:"label"},"VEHICLES")),r.a.createElement("div",{className:"bar-chart"},r.a.createElement(zk,{data:n.datasets}),r.a.createElement(Yk,{gridData:n,displayType:Wm,height:400}),r.a.createElement("div",{className:"label"},"OCCUPANCY"))))}}]),a}(n.Component);function zk(e){var t=e.data;return 0===t.length?r.a.createElement("div",{className:"no-bar-data"},"No data for selected time period"):null}var Kk=function(e){var t=e.timePeriod,a=e.data;return r.a.createElement("div",{className:"active-users-impact-data-container"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"label"},r.a.createElement(Af,null)," Active Users"),r.a.createElement("div",{className:"selected-dates"},t)),r.a.createElement("div",{className:"content"},r.a.createElement(Tk,Object.assign({},a,{noDataMessage:"No data for selected time period"}))))};function Jk(e){var t=e.timePeriod,a=e.data;return r.a.createElement("div",{className:"commute-modes-container"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"label"},r.a.createElement(ab,{className:"less-shift"})," Primary Modes of Commute"),r.a.createElement("div",{className:"selected-dates"},t)),r.a.createElement("div",{className:"content"},r.a.createElement(Qk,{data:a.datasets}),r.a.createElement(Yk,{gridData:a,height:100,displayType:Hm})))}function Qk(e){var t=e.data;return 0===t.length?r.a.createElement("div",{className:"no-bar-data"},"No data for selected time period"):null}var Xk=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={currentAggregate:{},timePeriod:Sk.currentQuarter(),isQuarter:!0,csvData:null,loadingCsv:null,csvClicked:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.currentAggregate,n=e.csvData;e.csvLoaded&&n&&this.setState({csvData:n,loadingCsv:!1}),Object(_i.isEqual)(this.state.currentAggregate,a)||this.setState({currentAggregate:a},function(){t.props.loadStats(a,t.state.timePeriod,t.state.isQuarter)})}},{key:"componentDidUpdate",value:function(e,t,a){if(this.state.csvData&&!this.state.csvClicked){this.setState({csvClicked:!0});var n=this.state.csvData.map(function(e){return e.join(",")}).join("\n"),r=new Blob([n],{type:"text/csv;charset=utf-8"});HE.a.saveAs(r,"Commute Aggregate ".concat(this.state.timePeriod.displayValue,".csv"))}}},{key:"selectTimePeriod",value:function(e,t){var a=this;this.setState({timePeriod:e,isQuarter:t},function(){a.props.loadStats(a.state.currentAggregate,e,t)})}},{key:"csvLoad",value:function(){var e=this.state,t=e.currentAggregate,a=e.timePeriod;this.setState({loadingCsv:!0,csvData:null,csvClicked:!1}),this.props.loadCSV(t,a)}},{key:"render",value:function(){var e=this,t=this.props.impactData,a=this.state,n=a.currentAggregate,c=a.timePeriod,s=a.isQuarter,o=a.loadingCsv;return r.a.createElement("div",{className:"stats-page"},r.a.createElement("div",{className:"stats-container"},r.a.createElement(ej,{currentAggregate:n}),r.a.createElement("div",{className:"stats-header"},r.a.createElement(Rk,{isQuarter:s,selectTimePeriod:function(t,a){return e.selectTimePeriod(t,a)},setChart:function(t){return e.setState({isQuarter:t})}}),r.a.createElement("div",{className:"stats-export-container desktop-only"},r.a.createElement(ib,null),r.a.createElement("button",{type:"button",onClick:function(t){return e.csvLoad()}},"Export CSV ",r.a.createElement("span",null,"(complete data)")))),r.a.createElement(Dk,{data:t}),r.a.createElement("div",{className:"secondary-nav"},r.a.createElement(tp.c,{activeClassName:"active",id:"vanpool-aggregate-link",exact:!0,to:"/stats/vanpool"},r.a.createElement(Rf,{className:"mobile-only"}),r.a.createElement("span",{className:"desktop-only"},"Vanpool")),r.a.createElement(tp.c,{activeClassName:"active",id:"recorded-trips-aggregate-link",exact:!0,to:"/stats/recordedTrips"}," ",r.a.createElement(Jf,{className:"mobile-only"}),r.a.createElement("span",{className:"desktop-only"},"Recorded Trips"))),r.a.createElement(cp.e,null,r.a.createElement(cp.c,{path:"/stats/vanpool",render:function(){return r.a.createElement($k,Object.assign({},e.props,{loading:o,isQuarter:s,displayValue:c.displayValue}))}}),r.a.createElement(cp.c,{path:"/stats/recordedTrips",render:function(){return r.a.createElement(Zk,Object.assign({},e.props,{loading:o,displayValue:c.displayValue}))}}),r.a.createElement(cp.b,{from:"/stats",to:"/stats/vanpool"}))))}}]),a}(n.Component);function $k(e){var t=e.chartData,a=e.impactData,n=e.monthlyEnrollment,c=e.isQuarter,s=e.displayValue,o=e.loading;return t&&!o?r.a.createElement("div",null,r.a.createElement(Hk,Object.assign({},n,{isQuarter:c,timePeriod:s})),r.a.createElement(Mk,{isVanpool:!0,data:a.vanpoolImpactData,title:"Vanpool Data",timePeriod:s})):r.a.createElement(mp,{isLoading:!t||o})}function Zk(e){var t=e.chartData,a=e.tripData,n=e.displayValue,c=e.loading;return t&&!c?r.a.createElement("div",null,r.a.createElement(Kk,{data:a.activeUsers,timePeriod:n}),r.a.createElement(Jk,{timePeriod:n,data:a.commutePrimaryModes}),r.a.createElement(Mk,{isVanpool:!1,data:a.recordedTripsImpactData,title:"Recorded Trips Data",timePeriod:n})):r.a.createElement(mp,{isLoading:!t||c})}function ej(e){var t=e.currentAggregate;return t.isTransit?r.a.createElement("div",{className:"selected-aggregate-title"},t.name,r.a.createElement("span",{className:"alternate-title"}," (Transit)")):t.isVanpool&&t.name?r.a.createElement("div",{className:"selected-aggregate-title"},t.id,r.a.createElement("span",{className:"alternate-title"}," (",t.name,")")):t.isVanpool?r.a.createElement("div",{className:"selected-aggregate-title"},t.id):r.a.createElement("div",{className:"selected-aggregate-title"},t.name)}var tj=Object(o.b)(function(e){return e.stats},function(e){return{loadStats:function(t,a){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e({type:Ea,data:{currentAggregate:t,timePeriod:a}}),e({type:Ca,data:{currentAggregate:t,timePeriod:a,isQuarter:n}}),e({type:Da,data:{currentAggregate:t,timePeriod:a}})},loadCSV:function(t,a){e({type:Na,data:{currentAggregate:t,timePeriod:a}})}}})(Xk),aj=function(){return{licenseNumber:"",licenseState:""}};var nj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={licenses:[aj()],licenseFiveOrMore:null,foreignLicense:null,militaryLicense:null},n}return Object(ap.a)(a,[{key:"update",value:function(e){var t,a=this;e.licenses&&(e.validLicenses=(t=e.licenses).length&&t.every(function(e){return e.licenseNumber&&e.licenseState}));var n=Object(On.a)(Object(On.a)({},this.state),e),r=n.licenseFiveOrMore&&null===n.foreignLicense||!1===n.licenseFiveOrMore&&null!==n.foreignLicense;this.setState(e,function(){return a.props.onChange(Object(On.a)(Object(On.a)({},n),{},{driverInformationIsValid:n.validLicenses&&null!==n.licenseFiveOrMore&&null!==n.militaryLicense&&r}))})}},{key:"toggleSecondLicense",value:function(e){this.update({licenseFiveOrMore:e,foreignLicense:null}),e&&this.state.licenses.length>1&&this.update({licenses:[this.state.licenses[0]]})}},{key:"toggleForeignLicense",value:function(e){this.update({foreignLicense:e}),e||1!==this.state.licenses.length||this.update({licenses:[].concat(Object(Wn.a)(this.state.licenses),[aj()])}),e&&this.state.licenses.length>1&&this.update({licenses:[this.state.licenses[0]]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.licenseFiveOrMore,n=t.foreignLicense,c=t.licenses,s=t.militaryLicense;return r.a.createElement("div",null,r.a.createElement("div",{className:"driver-information"},r.a.createElement("h3",null,r.a.createElement(hf,null)," Driver Information"),r.a.createElement("div",{className:"pad-desk"},r.a.createElement(LN,{value:c[0],onChange:function(t){return e.update({licenses:[t].concat(Object(Wn.a)(c.slice(1)))})}}),r.a.createElement(yN,{className:"five-or-more-question",question:"Have you had the above license for 5 or more years?",onChange:function(t){return e.toggleSecondLicense(t)},value:a}),!1===a?r.a.createElement(yN,{className:"foreign-question",question:"For driver verification purposes, have you ever had a foreign driver's license?",onChange:function(t){return e.toggleForeignLicense(t)},value:n}):null,!1===n&&c.length>1?r.a.createElement(rj,{licenses:c,onChange:function(t){return e.update({licenses:t})},addLicense:function(){return e.addLicense(1)},removeLicense:function(){return e.setLicenseLength(2)}}):null)),r.a.createElement("div",{className:"military-service"},r.a.createElement("h3",null,r.a.createElement(vf,null)," Military Service"),r.a.createElement(yN,{question:"Are you active military ?",onChange:function(t){return e.update({militaryLicense:t})},value:s})))}}]),a}(n.Component);function rj(e){var t=e.licenses,a=e.onChange;return r.a.createElement("div",{className:"second-license"},r.a.createElement("p",{className:"pad-desk warning"},r.a.createElement(yf,null)," You must provide 5+ years of driver history to be approved to drive for Commute with Enterprise."),r.a.createElement("p",{className:"note"},"If you do not have your prior driver license information available, your local DMV or your insurance may be able to assist"," "),r.a.createElement(LN,{value:t[1],className:"second-license-comp",onChange:function(e){return a([t[0],e].concat(Object(Wn.a)(t.slice(2))))}}),t.length<3?r.a.createElement("button",{className:"another-license-button",onClick:function(){return a([].concat(Object(Wn.a)(t),[aj()]))}},r.a.createElement(Vf,null)," Another Drivers License"):r.a.createElement(cj,{licenses:t,onChange:a}))}function cj(e){var t=e.licenses,a=e.onChange;return r.a.createElement("div",{className:"third-license"},r.a.createElement("button",{onClick:function(){return a(t.slice(0,2))},className:"remove"},r.a.createElement(gf,null)),r.a.createElement(LN,{value:t[2],className:"third-license-comp",onChange:function(e){return a([t[0],t[1],e])}}))}var sj={active:!1,ready:!1,deactivating:!1},oj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state=Object(On.a)(Object(On.a)({},sj),{},{confirming:!1}),n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.docusign?this.setState({active:!0,ready:!1}):e.confirmation.declined?this.declined():this.setState(Object(On.a)({},sj)),e.confirmation.title&&this.setState({confirming:!0})}},{key:"ready",value:function(){this.setState({ready:!0,confirming:!1})}},{key:"docusignComplete",value:function(e){this.setState({ready:!1}),this.props.status(e)}},{key:"handleFrame",value:function(e){var t=this;try{if(!0===this.state.ready&&e.target.contentDocument.URL.startsWith(window.location.origin))return this.docusignComplete(e.target.contentDocument.URL)}catch(a){console.log(a)}if(e.target.src===this.props.docusign){if(!this.state.ready)return this.setState({ready:setTimeout(function(){return t.ready()},5e3)});clearTimeout(this.state.ready),this.ready()}}},{key:"confirm",value:function(){this.props.history.replace(this.props.redirectUrl),this.setState({confirming:!1}),this.props.dispatch({type:p,data:this.props.nextProfile})}},{key:"declined",value:function(){this.props.history.replace(this.props.cancelRedirectUrl),this.setState({confirming:!1})}},{key:"render",value:function(){var e=this;return this.props.error?null:this.state.active||this.props.loading||this.state.confirming?r.a.createElement("div",{className:"popup-container ".concat(this.state.deactivating?"out":"")},r.a.createElement(mp,{isLoading:!0!==this.state.ready}),r.a.createElement("div",{className:"docusign ".concat(!0===this.state.ready?"ready":"")},this.props.docusign?r.a.createElement("iframe",{id:"docusign-frame",title:"Docusign",src:this.props.docusign,onLoad:function(t){return e.handleFrame(t)}}):null),r.a.createElement(ag,Object.assign({active:this.state.confirming,confirm:function(){return e.confirm()}},this.props.confirmation))):null}}]),a}(n.Component);var ij=Object(cp.h)(Object(o.b)(function(e){return{error:e.application.error,docusign:e.application.docusignSessionURL,title:e.application.title||"",confirmation:e.application.confirmation,nextProfile:e.application.nextProfile}})(oj)),lj=function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.preventDefault()},uj=function(e){var t=e.target;return setTimeout(function(){return t.selectionStart=t.selectionEnd=t.value.length},0)},mj=function(e){var t=(e=function(e){return e.replace(/[^\d]/g,"")}(e)).substr(0,2),a=e.substr(2,2),n=e.substr(4,4),r=parseInt(t,10);r>12&&(a="".concat(parseInt(t,10)%10),t="0"+Math.floor(t/10)),0===r&&(t="0");var c=parseInt(a,10);a&&(c>31||c>3&&c<10||(c>29||c>2&&c<10)&&"02"===t)&&(a="0"+c),0===c&&(a="0"),a.length>2&&(a=a.substr(0,2)),e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a?"".concat(e,"/").concat(t,"/").concat(a):t?"".concat(e,"/").concat(t):"".concat(e)}(t,a,n);var s=ic()(e,"MM/DD/YYYY");return{value:e,valid:/^\d\d\/\d\d\/\d{4}$/.test(e)&&s.isValid()}},dj=function(e){var t=e.value,a=e.onChange;return r.a.createElement("input",{type:"text",placeholder:"MM / DD / YYYY",className:"date-input ".concat(mj(t).valid?"valid":"invalid"),value:t,onClick:uj,onKeyDown:lj,onFocus:function(e){return a(mj(e.target.value))},onChange:function(e){return a(mj(e.target.value))}})},pj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={validBirthDate:!0,birthDate:""},n}return Object(ap.a)(a,[{key:"onChange",value:function(e,t){var a={birthDate:e,validBirthDate:t};this.setState(a),this.props.onChange(a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.birthDate,n=t.validBirthDate;return r.a.createElement("div",{className:"dob"},r.a.createElement("h3",null,r.a.createElement(Jf,{className:"calendar"})," Date of Birth"," ",r.a.createElement(Jg,{message:"All drivers must be 25 years or older (21 years or older in Michigan or New York)\n\n      and meet minimum driver requirements. As part of the Enterprise Commute driver application process, each \n      driver's MVR (Motor Vehicle Record) is checked annually to ensure that it is in compliance with our policies. \n      Only approved drivers may operate the vehicles."})),r.a.createElement("div",{className:"date-picker pad-desk birthdate"},r.a.createElement(dj,{value:a,onChange:function(t){return e.onChange(t.value,t.valid)}}),n?null:r.a.createElement("div",{className:"invalid-date"},r.a.createElement(yf,null)," Please enter a valid birthdate.")),r.a.createElement("p",{className:"note pad-desk"},"You must be 25 years or older (21 years in MI and NY)"))}}]),a}(n.Component),vj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={validAddresses:!0,validPhones:!0,validBirthDate:!1,loading:!0,valid:!0},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({homeAddress:e.profile.homeAddress,mailingAddress:e.profile.mailingAddress,phone:e.profile.phone,secondPhone:e.profile.secondPhone,loading:e.profile.loading,validAddresses:!!e.profile.homeAddress.line1,validPhones:!!e.profile.phone,valid:!0},function(){return t.update({},t.state)})}},{key:"update",value:function(e,t){var a=this;this.setState(e,function(){a.props.onChange(Object(On.a)(Object(On.a)(Object(On.a)({},t),e),{},{personalInformationIsValid:!!(a.state.validAddresses&&a.state.validPhones&&a.state.validBirthDate&&a.state.valid)}))})}},{key:"updateBirthdate",value:function(e){var t=e.validBirthDate,a=Object(uo.a)(e,["validBirthDate"]);this.update({validBirthDate:t},a)}},{key:"updatePhones",value:function(e){var t=e.validPhones,a=e.primary,n=e.secondary;this.update({validPhones:t},{phone:a,secondPhone:n})}},{key:"updateAddresses",value:function(e){var t=e.validAddresses,a=e.valid,n=Object(uo.a)(e,["validAddresses","valid"]);this.update({validAddresses:t,valid:a},n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.homeAddress,n=t.mailingAddress,c=t.phone,s=t.secondPhone;return t.loading||!c?null:r.a.createElement("div",null,r.a.createElement("p",{className:"note"},"Any new changes below to your contact info will update your information in your profile."),r.a.createElement(nN,{primary:c,secondary:s,update:function(t){return e.updatePhones(t)}}),r.a.createElement(oN,{homeAddress:a,mailingAddress:n,update:function(t){return e.updateAddresses(t)}}),r.a.createElement(pj,{onChange:function(t){return e.updateBirthdate(t)}}))}}]),a}(n.Component);var hj=Object(o.b)(function(e){return{profile:e.profile}},function(e,t){return{init:function(){e({type:jt})}}})(vj),fj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={birthDate:"",homeAddress:null,mailingAddress:null,phone:null,secondPhone:null,personalInformationIsValid:!1,militaryLicense:null,licenses:[],driverInformationIsValid:!1,continueClicked:!1},n.update=function(e){return n.setState(e)},n}return Object(ap.a)(a,[{key:"save",value:function(){this.setState({loading:!0}),this.props.save(this.state)}},{key:"pendingNotification",value:function(){var e=this;return r.a.createElement("div",{className:"pending-notification"},r.a.createElement("h2",null,"Driver Application"),r.a.createElement("p",null,"Thank you for volunteering to be a Driver of your commute. Please complete and sign the Driver Application. Should you have any questions, contact us at ",r.a.createElement(up,{phone:"800-VAN-4-WORK"})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{id:"continue",className:"button primary",onClick:function(){e.setState({continueClicked:!0})}},"Continue")))}},{key:"render",value:function(){var e=this,t=this.props.profile.isPendingDriver,a=this.state,n=a.personalInformationIsValid,c=a.driverInformationIsValid,s=a.loading;return r.a.createElement("div",null,!this.state.continueClicked&&t?this.pendingNotification():r.a.createElement("div",{className:"driver-application"},r.a.createElement("h2",null,"Driver Application"),r.a.createElement("p",null,"You have requested to be a vanpool driver. Please complete the below form. All fields are required."),r.a.createElement(hj,{onChange:this.update}),r.a.createElement(nj,{onChange:this.update}),r.a.createElement("hr",null),r.a.createElement("p",null,"On Submit, a contract with Commute with Enterprise will be displayed. This is a binding legal contract."),r.a.createElement("div",{className:"tools"},r.a.createElement(tp.b,{className:"button cancel",to:"/profile"},"Cancel"),r.a.createElement("button",{className:"button primary save",onClick:function(){return e.save()},disabled:!n||!c||s},"Review & Sign")),r.a.createElement(ij,{status:function(t){return e.props.docusignStatus(t)},loading:s,redirectUrl:"/profile",cancelRedirectUrl:"/profile"})))}}]),a}(n.Component);var bj=Object(o.b)(function(e){return{profile:e.userAuth}},function(e,t){return{save:function(t){e({type:na,data:t})},docusignStatus:function(t){e({type:sa,data:t})}}})(fj),Ej={isAuthorized:function(){var e=gn.getUserProfile();return e&&e.isInVanpool&&!e.isDriver}},gj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={applyToBeDriver:n.shouldApplyToBeDriver(),personalInformationIsValid:!1,militaryLicense:!1,foreignLicense:!1,driverInformationIsValid:!1,continueClicked:!1},n.update=function(e){return n.setState(e)},n}return Object(ap.a)(a,[{key:"save",value:function(){this.setState({loading:!0}),this.props.save(this.state)}},{key:"shouldApplyToBeDriver",value:function(){return this.props.profile.isDriver||this.props.profile.isPendingDriver}},{key:"applyToBeDriverQuestion",value:function(){var e=this;return this.shouldApplyToBeDriver()?null:r.a.createElement(yN,{className:"apply-to-be-driver-question",question:"Would you also like to apply to be a driver?",onChange:function(t){return e.setState({applyToBeDriver:t})},value:this.state.applyToBeDriver})}},{key:"pendingNotification",value:function(){var e=this,t="",a="";return this.props.profile.isPendingCoordinator&&this.props.profile.isPendingDriver?(t="Vanpool Coordinator/Driver Application",a="Thank you for volunteering to be the Coordinator/Driver of your commute. Before you can proceed, please complete and sign the Vanpool Coordinator and Driver Application. Should you have any questions, contact us at "):this.props.profile.isPendingCoordinator&&(t="Vanpool Coordinator Application",a="Thank you for volunteering to be the Coordinator of your commute. Before you can proceed, please complete and sign the Vanpool Coordinator and Driver Application. Should you have any questions, contact us at "),r.a.createElement("div",{className:"pending-notification"},r.a.createElement("h2",null,t),r.a.createElement("p",null,a,r.a.createElement(up,{phone:"800-VAN-4-WORK"})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{id:"continue",className:"button primary",onClick:function(){e.setState({continueClicked:!0})}},"Continue")))}},{key:"shouldShowPendingNofication",value:function(){return this.props.profile.isPendingCoordinator&&!this.state.continueClicked}},{key:"render",value:function(){var e=this,t=this.state,a=t.applyToBeDriver,n=t.personalInformationIsValid,c=t.driverInformationIsValid,s=t.loading,o=a?n&&c:n;return r.a.createElement("div",null,this.shouldShowPendingNofication()?this.pendingNotification():r.a.createElement("div",{className:"coordinator-application"},r.a.createElement("h2",null,"Coordinator Application"),r.a.createElement("p",null,"You have requested to be a vanpool coordinator. Please complete the below form. All fields are required."),r.a.createElement(hj,{onChange:this.update}),this.applyToBeDriverQuestion(),a?r.a.createElement(nj,{onChange:this.update}):null,r.a.createElement("div",{className:"tools"},r.a.createElement("a",{className:"button cancel",href:nr.brochureUrl},"Cancel"),r.a.createElement("button",{className:"button primary save",onClick:function(){return e.save()},disabled:!o},"Review & Sign")),r.a.createElement(ij,{status:function(t){return e.props.status(t)},loading:s,redirectUrl:"/",cancelRedirectUrl:"/login"})))}}]),a}(n.Component);var yj=Object(o.b)(function(e){return{profile:e.userAuth}},function(e,t){return{save:function(t){e({type:ra,data:t})},status:function(t){e({type:ca,data:t})}}})(gj),Oj={isAuthorized:function(){var e=gn.getUserProfile();return!!e&&e.isPendingCoordinator}},Nj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={open:!1},n.opening=!1,n.close=function(){n.setState({open:n.opening}),n.opening=!1},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.close)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.close)}},{key:"render",value:function(){var e=this,t=this.props,a=t.firstName,n=t.lastName,c=t.driver,s=this.state.open;return r.a.createElement("div",{className:"vanpooler ".concat(s?"open":""),onClick:function(){return e.opening=!s}},r.a.createElement(NE,null,a+" "+n),r.a.createElement("div",{className:"name"},a+" "+n,c?r.a.createElement("div",{className:"driver"},"Driver"):null))}}]),a}(n.Component),kj=function(e){var t=e.vanpoolers;return r.a.createElement("div",{className:"vanpoolers"},t.map(function(e){return r.a.createElement(Nj,Object.assign({},e,{key:e.id}))}))};function jj(e,t){var a=t.editing,n=t.open,r=t.change,c=t.toWork,s=t.toHome;return a&&n(),"r"===e?r(!0,!0):"w"===e?r(!0,!1):"h"===e?r(!1,!0):"x"===e?r(!1,!1):" "===e?c&&s?r(!0,!1):c&&!s?r(!1,!0):!c&&s?r(!1,!1):c||s?void 0:r(!0,!0):void 0}function Cj(e){var t=e.toWork,a=e.toHome;return a&&t?r.a.createElement(Of,null):t?"W":a?"H":r.a.createElement(Xf,{className:"block"})}function xj(e){var t=e.toWork,a=e.toHome,n=e.none,c=e.change;return r.a.createElement("div",{className:"edit-trip-status",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{onClick:function(){return c(!0,!0)},className:!n&&a&&t?"selected":""},r.a.createElement(Of,null)),r.a.createElement("div",{onClick:function(){return c(!0,!1)},className:n||!t||a?"":"selected"},"W"),r.a.createElement("div",{onClick:function(){return c(!1,!0)},className:n||!a||t?"":"selected"},"H"),r.a.createElement("div",{onClick:function(){return c(!1,!1)},className:n||a||t?"":"selected"},r.a.createElement(Xf,null)))}var Sj=function(e){var t=e.inVanpool,a=e.editing,n=e.saved,c=e.open,s=e.toWork,o=e.toHome,i=e.change,l=e.isChanged;return r.a.createElement("div",{tabIndex:"0",className:"trip-status ".concat(t?"":"disabled").concat(a?"selected":""," ").concat(n&&!l?"saved":""," ").concat(l?"changed":""),onClick:function(e){return e.stopPropagation()||c()},onKeyDown:function(e){return jj(e.key,{editing:a,open:c,change:i,toWork:s,toHome:o})}},a?r.a.createElement(xj,{toWork:s,toHome:o,change:i}):null,r.a.createElement("div",{className:"symbol"},r.a.createElement(Cj,{toWork:s,toHome:o})))},Dj=function(e){var t=e.date,a=e.future,n=e.selected,c=e.selectDay,s=e.vanpoolers,o=e.changeDay,i=vc.isToday(t),l=n.date===t&&n.wholeDay,u=function(e){if(!e)return{none:!0};var t=e.map(function(e){return e.toWork+2*e.toHome}),a=t[0];if(t.every(function(e){return e===a}))return[{toWork:!1,toHome:!1},{toWork:!0,toHome:!1},{toWork:!1,toHome:!0},{toWork:!0,toHome:!0}][a];return{none:!0}}(s);return r.a.createElement("div",{className:"day ".concat(vc.dayOfWeek(t).toLowerCase()," ").concat(l?"selected":"")},r.a.createElement("div",{className:"label ".concat(i?"current":""),tabIndex:a?-1:0,onClick:a?void 0:c,onKeyDown:function(e){return jj(e.key,Object(On.a)({editing:l,open:function(){return c(e)},change:o},u))}},l?r.a.createElement(xj,Object.assign({},u,{change:o})):null,r.a.createElement("span",{className:"day-of-week"},vc.dayOfWeek(t)),r.a.createElement("span",{className:"day-of-month ".concat(a?"other-month":"")},parseInt(t.split("-").pop(),10))),r.a.createElement(Aj,e))};function Aj(e){var t=e.date,a=e.vanpoolers,n=e.future,c=e.openStatus,s=e.changeStatus,o=e.selected;if(n)return r.a.createElement("div",{className:"future"});var i=a.every(function(e){return e.didNotCommute&&!e.isChanged});return r.a.createElement("div",{className:i?"none":""},a.map(function(e,a){return r.a.createElement(Sj,Object.assign({},e,{editing:o.date===t&&o.index===a,open:function(){return c(t,a)},change:function(e,n){return s(t,a,e,n)},isChanged:e.isChanged,key:a}))}))}function wj(e){var t=e.days,a=e.next,n=e.prev;if(!t.length)return null;var c=parseInt(t[0].date.split("-").pop(),10),s=parseInt(t[t.length-1].date.split("-").pop(),10);return r.a.createElement("div",{className:"week-nav"},r.a.createElement("button",{className:"prev-week",disabled:!n,onClick:n},r.a.createElement(bf,null)),r.a.createElement("button",{className:"next-week",disabled:!a,onClick:a},r.a.createElement(Ef,null)),r.a.createElement("span",{className:"month"},vc.parseDateAsMonth(t[0].date)),c===s?r.a.createElement("span",{className:"start"},c):r.a.createElement("span",null,r.a.createElement("span",{className:"start"},c),"-",r.a.createElement("span",{className:"end"},s)))}var Tj=function(){return r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"symbols"},r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"symbol"},r.a.createElement(Of,null))," ","Roundtrip"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"symbol"},"W")," To Work Only"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"symbol"},"H")," To Home Only"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"symbol"},r.a.createElement(Xf,null))," ","Did Not Commute")),r.a.createElement("div",{className:"colors"},r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color black"})," Default"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color green"})," Saved"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color grey"})," Future / Past")))},Pj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){return Object(Nc.a)(this,a),t.apply(this,arguments)}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){if(!this.props.impactData)return null;var e=this.props,t=e.impactData,a=e.section,n=bc.formatUSD(t.fuelSavings);return r.a.createElement("div",{className:"impact-data"},r.a.createElement("div",{className:"impact-title"},"vanpool"===a?"Vanpool":"My"," Savings for the month"," ",r.a.createElement(tk,{includeParking:!0})),r.a.createElement("div",{className:"miles-saved cell"},r.a.createElement("img",{src:Ih.a,alt:"van"}),r.a.createElement("span",null,r.a.createElement("label",null,"Miles Saved"),r.a.createElement("span",{className:"value"},t.milesSaved.toLocaleString(),r.a.createElement("span",{className:"units"},"mi")))),r.a.createElement("div",{className:"fuel-savings cell"},r.a.createElement("img",{src:Gh.a,alt:"money"}),r.a.createElement("span",null,r.a.createElement("label",null,"Fuel Cost Savings"),r.a.createElement("span",{className:"value"},n.substring(0,n.indexOf("."))))),r.a.createElement("div",{className:"fuel-saved cell"},r.a.createElement("img",{src:Wh.a,alt:"fuel pump"}),r.a.createElement("span",null,r.a.createElement("label",null,"Fuel Gallons Saved"),r.a.createElement("span",{className:"value"},t.fuelGallonsSaved.toLocaleString(),r.a.createElement("span",{className:"units"},"gal")))),r.a.createElement("div",{className:"co2-saved cell"},r.a.createElement("img",{src:zh.a,alt:"tree"}),r.a.createElement("span",null,r.a.createElement("label",null,"CO2 lbs Saved"),r.a.createElement("span",{className:"value"},t.co2Savings.toLocaleString(),r.a.createElement("span",{className:"units"},"lbs")))),r.a.createElement("div",{className:"parking-savings cell"},r.a.createElement("img",{src:Jh.a,alt:"road"}),r.a.createElement("span",null,r.a.createElement("label",null,"Parking Spots Saved"),r.a.createElement("span",{className:"value"},t.parkingSavings.toLocaleString()))))}}]),a}(n.Component);var Ij=Object(o.b)(function(e,t){var a=t.section,n=t.month;return{impactData:e.impactData[a][n]}},function(e){return{init:function(){Ds([_s])?e({type:We}):e({type:He})}}})(Pj);function Mj(e){return e instanceof Array?e.map(function(e){return e}).join(" "):e instanceof Object?Object.keys(e).filter(function(t){return e[t]}).join(" "):e.split(" ").filter(function(e){return e}).join(" ")}var Rj=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Mj(t.map(Mj).join(" "))};function _j(){return r.a.createElement("div",null,r.a.createElement("p",null,"Click to change or use the keyboard."),r.a.createElement("p",null,"'R' ",r.a.createElement("span",null,"- Roundtrip")),r.a.createElement("p",null,"'W' ",r.a.createElement("span",null,"- To Work")),r.a.createElement("p",null,"'H' ",r.a.createElement("span",null,"- To Home")),r.a.createElement("p",null,"'X' ",r.a.createElement("span",null,"- Did Not Commute")),r.a.createElement("p",null,"Space to rotate through options."))}function Lj(e,t,a,n,r,c){return e.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{vanpoolers:e.vanpoolers.map(function(s,o){return Object(On.a)(Object(On.a)({},s),{},{toWork:t===e.date&&a===o?n:s.toWork,toHome:t===e.date&&a===o?r:s.toHome,isChanged:t===e.date&&a===o?c:s.isChanged})})})})}var Uj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={month:e.month||"current",monthDays:e.current?e[e.month].days:[],week:n.latestWeekOf(e.month||"current"),days:[],before:[],after:[],selected:{date:"",index:-1},loading:!1,requireExpenses:!1,showAcknowledgement:!1,acknowledged:!1,currentMonthDays:[],previousMonthDays:[]},n.next=n.next.bind(Object(bp.a)(n)),n.prev=n.prev.bind(Object(bp.a)(n)),n.openStatus=n.openStatus.bind(Object(bp.a)(n)),n.unselect=function(){return n.setState({selected:{date:"",index:-1}})},n.changeStatus=n.changeStatus.bind(Object(bp.a)(n)),n.saveTripRecording=n.saveTripRecording.bind(Object(bp.a)(n)),n.saveAndApproveTripRecording=n.saveAndApproveTripRecording.bind(Object(bp.a)(n)),n.goToExpenses=n.goToExpenses.bind(Object(bp.a)(n)),n.getPreviousMonth=n.getPreviousMonth.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){if(window.addEventListener("click",this.unselect),!this.props.current.vanpoolers.length){var e=this.getPreviousMonth(),t=vc.currentYear();return this.props.init(e,t)}this.setState({loading:!1}),this.updateDays(this.props[this.props.month].days),this.props.hasPreviousData(!!this.props.previous.vanpoolers.length)}},{key:"getPreviousMonth",value:function(){return"0"+(vc.currentMonthAsTwoDigits()-1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.unselect)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.month&&e.month!==this.state.month){var a=this.state.currentMonthDays.length>0&&"current"===e.month?this.state.currentMonthDays:this.state.previousMonthDays.length>0&&"previous"===e.month?this.state.previousMonthDays:this.props[e.month].days;return this.setState({month:e.month,week:this.latestWeekOf(e.month),monthDays:a},function(){return t.props.current.vanpoolers.length&&t.updateDays(a)})}if(e.error!==this.props.error)return this.state.currentMonthDays.length>0?this.props.validation(this.state.currentMonthDays):this.state.previousMonthDays.length>0&&this.props.validation(this.state.previousMonthDays),this.setState({loading:!e.error});e.current.vanpoolers.length&&null===e.error&&(this.setState({monthDays:e[e.month].days,loading:!1,currentMonthDays:[],previousMonthDays:[]}),this.props.hasPreviousData(!!e.previous.vanpoolers.length),this.updateDays(e[this.state.month].days))}},{key:"latestWeekOf",value:function(e){var t=ic()();return"previous"===e&&(t=t.subtract(t.date(),"day")),vc.weekOf(t)}},{key:"updateDays",value:function(e){var t,a=vc.currentYear()-1,n=ic()(a).weeksInYear();0===this.state.week?(this.setState({week:n}),t=n):this.state.week===n+1?(this.setState({week:1}),t=1):t=this.state.week;var r=e.filter(function(e){return vc.weekOf(e.date)===t});if(!r.length)return Rc.log("no days found, stopping early"),void Rc.log("passed days",e);if(this.setState({days:r,before:[],after:[]}),r.length<7){var c=new Array(7-r.length).fill(null),s=vc.getMomentInFromDateFormat(r[0].date);if(s=s.add(-s.day(),"day"),"Sun"!==vc.dayOfWeek(r[0].date))return this.setState({before:c.map(function(e,t){return{future:!0,date:s.clone().add(t,"day").format("YYYY-MM-DD")}})});s=s.add(6,"day"),this.setState({after:c.map(function(e,t){return{future:!0,date:s.clone().add(-t,"day").format("YYYY-MM-DD")}}).reverse()})}}},{key:"next",value:function(){var e=this;this.setState({week:this.state.week+1},function(){return e.updateDays(e.state.monthDays)})}},{key:"prev",value:function(){var e=this;this.setState({week:this.state.week-1},function(){return e.updateDays(e.state.monthDays)})}},{key:"openStatus",value:function(e,t){var a=this.state.selected;a.date===e&&a.index===t?this.unselect():this.setState({selected:{date:e,index:t}})}},{key:"changeStatus",value:function(e,t,a,n){var r=this.props[this.state.month].days.find(function(t){return t.date===e}).vanpoolers[t],c=r.toHome!==n||r.toWork!==a,s=this.state,o=s.days,i=Lj(s.monthDays,e,t,a,n,c);"current"===this.state.month?this.setState({days:Lj(o,e,t,a,n,c),monthDays:i,currentMonthDays:i},function(){this.props.validation(this.state.days)}):this.setState({days:Lj(o,e,t,a,n,c),monthDays:i,previousMonthDays:i},function(){this.props.validation(this.state.days)}),this.unselect()}},{key:"selectDate",value:function(e){var t=this.state.selected;t.date===e&&t.wholeDay?this.unselect():this.setState({selected:{date:e,wholeDay:!0}})}},{key:"changeDate",value:function(e,t,a){var n=this.props[this.state.month].days.find(function(t){return t.date===e}),r=this.state,c=r.days,s=r.monthDays,o=n.vanpoolers.reduce(function(n,r,c){var s=r.toHome!==a||r.toWork!==t;return r.inVanpool?Lj(n,e,c,t,a,s):n},c),i=n.vanpoolers.reduce(function(n,r,c){var s=r.toHome!==a||r.toWork!==t;return r.inVanpool?Lj(n,e,c,t,a,s):n},s);"current"===this.state.month?this.setState({days:o,monthDays:i,currentMonthDays:i},function(){this.props.validation(this.state.days)}):this.setState({days:o,monthDays:i,previousMonthDays:i},function(){this.props.validation(this.state.days)}),this.unselect()}},{key:"saveTripRecording",value:function(){this.setState({loading:!0}),this.props.save(this.state.monthDays,this.state.month)}},{key:"saveAndApproveTripRecording",value:function(e){if(!this.state.acknowledged)return this.setState({showAcknowledgement:!0});this.setState({loading:!0}),this.props.saveAndApprove(this.state.monthDays,e)}},{key:"saveAction",value:function(e){return e?null:r.a.createElement("div",{className:"action"},r.a.createElement("p",null,"By clicking Save you confirm that the data in the calendar above is accurate."),r.a.createElement("button",{className:"button save",onClick:this.saveTripRecording},"Save"))}},{key:"goToExpenses",value:function(){window.location.hash="#/trip-recording/expenses"}},{key:"render",value:function(){var e=this,t=this.state,a=t.days,n=t.before,c=t.after,s=t.month,o=t.loading,i=t.selected,l=t.showAcknowledgement,u=t.requireExpenses;if(!this.props.current||0===a.length)return this.props.error?r.a.createElement(mp,{isLoading:!1}):r.a.createElement(mp,{isLoading:!0});var m=this.props[s],d=m.vanpoolers,p=m.days,v=[].concat(Object(Wn.a)(n),Object(Wn.a)(a),Object(Wn.a)(c)),h=!c.length&&a[a.length-1].date!==p[p.length-1].date,f=!n.length&&a[0].date!==p[0].date,b=(!this.props.beforeEleventh||this.props.approved)&&"previous"===this.props.month,E=vc.parseDateAsFullMonth(ic()().subtract(1,"month"));return r.a.createElement("div",null,r.a.createElement("div",{className:Rj("trip-table",{submitted:b})},r.a.createElement(mp,{isLoading:o}),r.a.createElement(Jg,{message:r.a.createElement(_j,null)}),r.a.createElement("div",{className:"column"},r.a.createElement(wj,{days:a,prev:f?this.prev:null,next:h?this.next:null}),r.a.createElement(kj,{vanpoolers:d})),v.map(function(t){return r.a.createElement(Dj,Object.assign({},t,{selectDay:function(a){return a.stopPropagation()||e.selectDate(t.date)},changeDay:function(a,n){return e.changeDate(t.date,a,n)},changeStatus:e.changeStatus,openStatus:e.openStatus,selected:i,key:t.date}))})),r.a.createElement(Tj,null),r.a.createElement("div",{className:"tools"},this.saveAction(b),this.props.beforeEleventh&&!this.props.approved&&"previous"===this.props.month&&r.a.createElement("div",{className:"action approval"},r.a.createElement("p",null,"By clicking Approve, you are acknowledging your data is complete for ",E,"."),r.a.createElement("button",{className:"button approve primary",onClick:function(){return e.saveAndApproveTripRecording(E)}},"Approve"))),r.a.createElement(ag,{id:"acknowledgement",title:"Are you sure?",cancelMessage:"Cancel",confirmMessage:"Yes, Approve",cancel:function(){return e.setState({showAcknowledgement:!1})},confirm:function(){return e.setState({acknowledged:!0,showAcknowledgement:!1},function(){return e.saveAndApproveTripRecording(E)})},active:l,message:"By approving, you are acknowledging your Trip and Expense data is complete for ".concat(E,".  Your data will be submitted and will no longer be updatable.")}),r.a.createElement(ag,{id:"expenses",title:"Update Expenses",active:u,cancel:function(){return e.setState({requireExpenses:!1})},confirm:function(){return e.goToExpenses()},message:"You can not approve Trip Data for ".concat(E," until you have recorded Fuel expenses and Fuel Gallons. Please update and try again."),cancelMessage:"Cancel",confirmMessage:"Record Expenses"}),r.a.createElement(Is,{roles:[qs],required:!1},r.a.createElement(Ij,{section:"vanpool",month:s})))}}]),a}(n.Component);var Vj=Object(o.b)(function(e){return Object(On.a)(Object(On.a)({},e.tripRecording),{},{expenses:e.expenses.expenses,wexTransactions:e.expenses.wexTransactions})},function(e){return{init:function(t,a){e({type:M}),Ds([Ys])&&e({type:S,data:{month:t,year:a}})},save:function(t,a){e({type:_,data:{tripData:t,monthStatus:a}})},saveAndApprove:function(t,a){e({type:V,data:{tripData:t,monthStatus:!1,monthToSave:a}})},validation:function(t){e({type:qa,data:t})}}})(Uj),Fj=["Vanpool","Car","Carpool (Driver)","Carpool (Rider)","Commuter Rail","Light Rail","Ferry","Bus","Ride-Hailing (TNC)","Bike","Walk","Did not commute"],Bj={Vanpool:r.a.createElement(Rf,{className:"less-shift"}),Car:r.a.createElement(Gf,null),"Carpool (Driver)":r.a.createElement(Gf,null),"Carpool (Rider)":r.a.createElement(Gf,null),"Commuter Rail":r.a.createElement(Zf,{className:"less-shift"}),"Light Rail":r.a.createElement(eb,{className:"less-shift"}),Ferry:r.a.createElement(tb,null),Bus:r.a.createElement(ab,{className:"less-shift"}),"Ride-Hailing (TNC)":r.a.createElement(nb,null),Bike:r.a.createElement(rb,null),Walk:r.a.createElement($f,null),"Did not commute":r.a.createElement(Xf,{className:"less-shift"})},Yj={"Ride-Hailing (TNC)":"Ride-Hailing TNC","Carpool (Driver)":"Carpool Driver","Carpool (Rider)":"Carpool Rider","Did not commute":"Did Not Commute"};function Wj(e){var t=e.value,a=e.onChange;return r.a.createElement("div",{className:"editor"},Fj.map(function(e){return r.a.createElement("div",{className:"icon ".concat(t===e?"selected":""),key:e,onClick:function(t){return t.stopPropagation()||a(e)}},Bj[e],r.a.createElement("span",{className:"label ".concat(e.toLowerCase().split(" ").join("-"))},e in Yj?Yj[e]:e))}))}function Hj(){return r.a.createElement("div",{className:"day empty future"})}function Gj(e){var t=e.date,a=e.toWork,n=e.toHome,c=e.saved,s=e.editable,o=e.orientation,i=e.differentToWork,l=e.differentToHome,u=e.selected,m=e.select,d=e.change,p=vc.isToday(t),v=vc.afterToday(t),h=vc.dayOfWeek(t),f=parseInt(t.split("-").pop(),10);return r.a.createElement("div",{className:Rj("day",h.toLowerCase(),{future:v,current:p,saved:c,empty:!s})},r.a.createElement("div",{className:"dow mobile-only"},h),r.a.createElement("div",{className:"date"},f),r.a.createElement("div",{className:Rj("to-work",{selected:u.date===t&&u.work,different:i,greyed:["R","W"].includes(o)}),onClick:function(e){return s&&(e.stopPropagation()||m(t,"work"))}},Bj[a],u.date===t&&u.work?r.a.createElement(Wj,{value:a,onChange:function(e){return d(t,"work",e)}}):null),r.a.createElement("div",{className:Rj("to-home",{selected:u.date===t&&u.home,different:l,greyed:["R","H"].includes(o)}),onClick:function(e){return s&&(e.stopPropagation()||m(t,"home"))}},Bj[n],u.date===t&&u.home?r.a.createElement(Wj,{value:n,onChange:function(e){return d(t,"home",e)}}):null))}function qj(){return r.a.createElement("div",{className:"legend registered"},r.a.createElement("div",{className:"colors"},r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color black"})," Default"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color green"})," Saved"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color grey"})," Future / Past")))}function zj(){return r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"symbols"},r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"symbol"},r.a.createElement(Xf,null))," ","Did Not Commute")),r.a.createElement("div",{className:"colors"},r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color green"})," Active / Saved"),r.a.createElement("div",{className:"pair"},r.a.createElement("span",{className:"color grey"})," Future / Past / Inactive")))}var Kj=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var Jj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={showAcknowledgement:!1,month:e.month,loading:!1,noChanges:!0,days:[],selected:{date:"",home:!1,work:!1}},n.change=n.change.bind(Object(bp.a)(n)),n.select=n.select.bind(Object(bp.a)(n)),n.save=n.save.bind(Object(bp.a)(n)),n.saveAndApprove=n.saveAndApprove.bind(Object(bp.a)(n)),n.unselect=function(){return n.select("","")},n.loadingAction=Ds([_s])?K:X,n.savingAction=Ds([_s])?Q:Z,n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.init(this.loadingAction),this.setState({loading:!0}),window.addEventListener("click",this.unselect),this.props.hasPreviousData(this.props.previous&&!!this.props.previous.length)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.unselect)}},{key:"componentWillReceiveProps",value:function(e){if(e.error&&this.setState({loading:!e.error}),e[e.month]!==this.props[this.props.month]&&this.calculateChange(e[e.month]||[]),e.month&&e.month!==this.state.month)return this.setState({month:e.month});this.props.hasPreviousData(e.previous&&!!e.previous.length)}},{key:"calculateChange",value:function(e){var t=!Ds([_s])&&e.some(function(e){return e.editable&&!e.saved});this.setState({days:e,noChanges:!e.some(function(e){return e.differentToWork||e.differentToHome})&&!t,loading:!e.length})}},{key:"select",value:function(e,t){var a=this.state.days.find(function(t){return t.date===e});if(!a||"R"===a.orientation||"W"===a.orientation&&"work"===t||"H"===a.orientation&&"home"===t)return this.setState({selected:{date:"",home:!1,work:!1}});this.setState({selected:{date:e,work:"work"===t,home:"home"===t}})}},{key:"change",value:function(e,t,a){this.unselect();var n=this.props[this.props.month].find(function(t){return t.date===e}),r=Object(On.a)(Object(On.a)({},this.state.days.find(function(t){return t.date===e})),{},Object(er.a)({},"home"===t?"toHome":"toWork",a)),c=r.toWork!==n.toWork,s=r.toHome!==n.toHome;this.calculateChange(this.state.days.map(function(n){var r;return n.date===e?Object(On.a)(Object(On.a)({},n),{},(r={},Object(er.a)(r,"home"===t?"toHome":"toWork",a),Object(er.a)(r,"differentToWork",c),Object(er.a)(r,"differentToHome",s),r)):n}))}},{key:"save",value:function(){this.props.save(this.state.days,this.props.month,this.savingAction),this.setState({loading:!0})}},{key:"saveAndApprove",value:function(e){this.setState({showAcknowledgement:!1}),this.props.saveAndApprove(this.state.days,e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.days,n=t.selected,c=t.noChanges,s=t.loading,o=t.showAcknowledgement,i=this.props,l=i.beforeEleventh,u=i.approved,m="current"===this.props.month,d=ic()().subtract(1,"month").format("MMMM");if(1==this.props.error)return r.a.createElement("div",{className:"calendar"},r.a.createElement(mp,{isLoading:!1,absolute:!0}));if(!a.length&&!this.props.error)return r.a.createElement("div",{className:"calendar"},r.a.createElement(mp,{isLoading:!0,absolute:!0}));var p=function(e){var t=vc.getMomentInFromDateFormat(e);t=t.add(-t.day(),"day");for(var a=[];t.format("YYYY-MM-DD")!==e;)a.push({date:t}),t=t.clone().add(1,"day");return a}(a[0].date),v=function(e){var t=vc.getMomentInFromDateFormat(e);t=t.add(6-t.day(),"day");for(var a=[];t.format("YYYY-MM-DD")!==e;)a.unshift({date:t}),t=t.clone().add(-1,"day");return a}(a[a.length-1].date),h=Ds([_s])?r.a.createElement(zj,null):r.a.createElement(qj,null);return r.a.createElement("div",{className:"calendar"},r.a.createElement(mp,{isLoading:s,absolute:!0}),r.a.createElement("div",{className:"week"},Kj.map(function(e){return r.a.createElement("div",{className:"day",key:e},e)})),r.a.createElement("div",{className:"month ".concat(m||l&&!u?"":"approved")},p.map(function(e,t){return r.a.createElement(Hj,{key:"before"+t})}),a.map(function(t,a){return r.a.createElement(Gj,Object.assign({key:"days"+a},t,{selected:n,select:e.select,change:e.change}))}),v.map(function(e,t){return r.a.createElement(Hj,{key:"after"+t})})),h,m||l&&!u?r.a.createElement("div",{className:"tools"},r.a.createElement("div",{className:"action save"},r.a.createElement("p",null,"By clicking Save, you confirm that the data in the calendar above is accurate."),r.a.createElement("button",{className:"button save",disabled:c,onClick:this.save},"Save")),r.a.createElement(Ps,{roles:[Bs],required:!1},m?null:r.a.createElement("div",{className:"action approval"},r.a.createElement("p",null,"By clicking Approve, you are acknowledging your data is complete for ",d,"."),r.a.createElement("button",{className:"button approve primary",onClick:function(){return e.setState({showAcknowledgement:!0})}},"Approve")))):null,r.a.createElement(Ij,{section:"participant",month:this.props.month}),r.a.createElement(ag,{id:"acknowledgement",title:"Are you sure?",cancelMessage:"Cancel",confirmMessage:"Yes, Approve",cancel:function(){return e.setState({showAcknowledgement:!1})},confirm:function(){return e.saveAndApprove(d)},active:o,message:"By approving, you are acknowledging your trip data is complete for ".concat(d,".  Your data will be submitted and will no longer be updatable.")}))}}]),a}(n.Component);var Qj=Object(o.b)(function(e){return Object(On.a)(Object(On.a)({},e.myTrips),e.userAuth)},function(e){return{init:function(t){e({type:t})},save:function(t,a,n){e({type:n,data:{days:t,monthStatus:a}})},saveAndApprove:function(t,a){e({type:ee,data:{days:t,monthStatus:a}})}}})(Jj);function Xj(){return r.a.createElement("div",{className:"tooltiptext"},"Add/Remove Expenses")}function $j(e){var t=e.activityDateTime,a=e.merchantName,n=e.isSelected,c=e.fuelGallons,s=e.cost,o=e.toggleSelected,i=bc.formatUSD(s),l=vc.parseFormalDate1(t);return r.a.createElement("div",{className:"etable-body wex-transactions-table"},r.a.createElement("div",{className:"etable-row ".concat(n?"":"unchosen")},r.a.createElement("div",{className:"etable-column"},r.a.createElement("div",{className:"etable-cell wexSelect tooltip"},r.a.createElement("button",{className:"selected ".concat(n?"chosen":""),onClick:o},n?r.a.createElement(jf,null):r.a.createElement(kf,null)),r.a.createElement(Xj,null)),r.a.createElement("div",{className:"etable-cell activityDate"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Activity Date:\xa0"),r.a.createElement("span",null,l))),r.a.createElement("div",{className:"etable-cell vendorName"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Vendor:\xa0"),r.a.createElement("span",null,a))),r.a.createElement("div",{className:"etable-cell gallons"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Gallons:\xa0"),r.a.createElement("span",null,"".concat(c?c+" Gallons":"N/A")))),r.a.createElement("div",{className:"etable-cell expenses"},r.a.createElement("div",{className:"mobile-only-label"},r.a.createElement("label",null,"Expense:\xa0"),r.a.createElement("span",null,i))))))}var Zj=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).props=e,n.state={deactivating:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=e.active&&!this.props.active;this.setState({deactivating:!1,activating:t})}},{key:"saveModal",value:function(){this.setState({deactivating:!0}),setTimeout(this.props.save,200)}},{key:"render",value:function(){var e=this,t=this.props,a=t.active,n=t.title,c=t.children;this.props.saveButtonText;return a?r.a.createElement("div",{className:"form-popup-container popup-container ".concat(this.state.deactivating?"out":"")},r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{onClick:function(){return e.props.cancel()},className:"close"},r.a.createElement(gf,null))),r.a.createElement("h3",{className:"title"},n),r.a.createElement("div",{className:"body",ref:function(t){return e.body=t}},c),r.a.createElement("div",{className:"tools response"}))):null}}]),a}(n.Component),eC=a(227),tC=a.n(eC);function aC(e){e.props;var t=e.state,a=e.vendor,n=e.activityDate,c=(e.subtract,e.add),s=e.dollars,o=e.onChange,i=(e.onOtherError,t);function l(e){var t=vc.formatexpenses(e);return/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/.test(t)}function u(e){return"vendor"==e?""!==i.vendor&&void 0!==i.vendor:"dollars"==e?"0.00"!==i.dollars&&"0"!==i.dollars&&""!==i.dollars:"activity"==e?l(i.activityDate):void 0}return""==n&&(n=new Date),r.a.createElement("div",{className:"addexpenses"},r.a.createElement("div",{className:"expensesInput activity"},r.a.createElement("label",null,"Activity Date"),r.a.createElement(tC.a,{onChange:function(e){return function(e){o({activityDate:e,vendor:a,dollars:s})}(e)},format:"MM/dd/yyyy",disableClock:!0,value:n,clearIcon:null,required:!0,maxDate:new Date})),r.a.createElement("div",{className:"expensesInput"},r.a.createElement("label",null,"Vendor Name"),r.a.createElement("input",{type:"text",className:"vendor ".concat(u("vendor")?"":"invalid"),placeholder:"Vendor",value:a,onChange:function(e){return o({vendor:e.target.value,dollars:s,activityDate:n})}})),r.a.createElement("div",{className:"expensesInput"},r.a.createElement("label",null,"Other Expenses"),r.a.createElement(Cf,null),r.a.createElement(Ag,{type:"text",className:"dollars ".concat(u("dollars")?"":"invalid"),placeholder:"0.00",value:s,onChange:function(e){return o({vendor:a,dollars:e,activityDate:n})}})),r.a.createElement("button",{className:"primary add button",onClick:c,disabled:function(){var e="0.00"!==i.dollars&&"0"!==i.dollars&&""!==i.dollars,t=""!==i.vendor&&void 0!==i.vendor,a=l(i.activityDate);return!(e&&t&&a)}()},"Add to Expenses"))}function nC(e){e.props;var t,a,n,c,s=e.state,o=e.vendor,i=e.activityDate,l=(e.subtract,e.add),u=e.dollars,m=e.gallons,d=e.onChange,p=(e.onError,s);function v(e){return"vendor"==e?""!==p.vendor&&void 0!==p.vendor:"gallons"==e?"0.00"!==p.gallons&&"0"!==p.gallons&&""!==p.gallons:"dollars"==e?"0.00"!==p.dollars&&"0"!==p.dollars&&""!==p.dollars:void 0}return""==i&&(i=new Date),r.a.createElement("div",{className:"addexpenses"},r.a.createElement("div",{className:"expensesInput activity"},r.a.createElement("label",null,"Activity Date"),r.a.createElement(tC.a,{onChange:function(e){return function(e){d({activityDate:e,vendor:o,dollars:u,gallons:m})}(e)},format:"MM/dd/yyyy",disableClock:!0,value:i,clearIcon:null,required:!0,maxDate:new Date})),r.a.createElement("div",{className:"expensesInput"},r.a.createElement("label",null,"Vendor Name"),r.a.createElement("input",{type:"text",className:"vendor ".concat(v("vendor")?"":"invalid"),placeholder:"Vendor",value:o,onChange:function(e){return d({vendor:e.target.value,dollars:u,gallons:m,activityDate:i})}})),r.a.createElement("div",{className:"fuelGallons"},r.a.createElement("div",{className:"fuelGallonsInput"},r.a.createElement("label",null,"Fuel Expense"),r.a.createElement(Cf,null),r.a.createElement(Ag,{type:"text",className:"dollars ".concat(v("dollars")?"":"invalid"),placeholder:"0.00",value:u,onChange:function(e){return d({dollars:e,gallons:m,vendor:o,activityDate:i})}})),r.a.createElement("div",{className:"fuelGallonsInput GallonsInput"},r.a.createElement("label",null,"Fuel Gallons"),r.a.createElement("input",{type:"text",className:"gallons ".concat(v("gallons")?"":"invalid"),placeholder:"0",value:m,onChange:function(e){return(!(t=e.target.value).length||"0"===t||/^([1-9]\d*|0)(\.\d{0,3})?$/.test(t)&&parseFloat(t)<1e4)&&d({dollars:u,gallons:e.target.value,vendor:o,activityDate:i});var t}}),r.a.createElement("span",{className:"unitMeasure"},"gal"))),r.a.createElement("button",{className:"primary add button",onClick:l,disabled:(t="0.00"!==p.gallons&&"0"!==p.gallons&&""!==p.gallons,a="0.00"!==p.dollars&&"0"!==p.dollars&&""!==p.dollars,n=""!==p.vendor&&void 0!==p.vendor,c=function(e){var t=vc.formatexpenses(e);return/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/.test(t)}(p.activityDate),!(t&&a&&n&&c))},"Add to Expenses"))}var rC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).addFuelExpense=function(){var e=n.state,t=e.dollars,a=e.gallons,r=e.vendor,c=e.activityDate,s=vc.currentTime(),o=vc.formatexpenses(c)+" "+s;n.props.saveTransaction({cost:t?parseFloat(t):0,fuelGallons:a?parseFloat(a):0,merchantName:r,activityDateTime:o,expenseId:"",isSelected:!0,transactionId:"",type:"Fuel",updateTimestamp:"",id:n.props.transactionsLength}),n.closeExpenses()},n.subtractFuelExpense=function(){var e=n.state,t=e.dollars,a=e.gallons;t=t?parseFloat(t):0,a=a?parseFloat(a):0;var r=n.props.expenses[n.props.month];a>parseFloat(r.fuelGallons)?n.setState({fuelGallonsError:!0,gallons:"",errorMsg:"You can not subtract more than (".concat(parseFloat(r.fuelGallons),").")}):t>parseFloat(r.fuelCost)?n.setState({fuelcostError:!0,dollars:"",vendor:"",activityDate:"",errorMsg:"You can not subtract more than (".concat(parseFloat(r.fuelCost),").")}):t===parseFloat(r.fuelCost)||a===parseFloat(r.fuelGallons)?a===parseFloat(r.fuelGallons)&&t!==parseFloat(r.fuelCost)?n.setState({fuelGallonsError:!0,gallons:"",vendor:"",activityDate:"",errorMsg:"Fuel Gallons cannot be zero when you have Fuel Expense greater than zero."}):t===parseFloat(r.fuelCost)&&a!==parseFloat(r.fuelGallons)?n.setState({fuelcostError:!0,dollars:"",vendor:"",activityDate:"",errorMsg:"Fuel Expense cannot be zero when you have Fuel Gallons greater than zero."}):(n.props.subtractFuelExpense("current"===n.props.month,{fuelCost:t,fuelGallons:a}),n.setState({dollars:"",gallons:"",vendor:"",activityDate:""})):(n.props.subtractFuelExpense("current"===n.props.month,{fuelCost:t,fuelGallons:a}),n.setState({dollars:"",gallons:"",vendor:"",activityDate:""}))},n.addOthersExpense=function(){var e=n.state,t=e.dollars,a=e.vendor,r=e.activityDate,c=vc.currentTime(),s=vc.formatexpenses(r)+" "+c;n.props.saveTransaction({cost:t?parseFloat(t):0,fuelGallons:null,merchantName:a,activityDateTime:s,expenseId:"",isSelected:!0,transactionId:"",type:"Other",updateTimestamp:"",id:n.props.transactionsLength}),n.closeExpenses()},n.subtractOthersExpense=function(){var e=n.state.dollars,t=n.props.expenses[n.props.month];parseFloat(e)>t.others?n.setState({otherError:!0,dollars:"",vendor:"",activityDate:"",errorMsg:"You can not subtract more than (".concat(parseFloat(t.others),").")}):(n.props.subtractOthersExpense("current"===n.props.month,{othersCost:parseFloat(e)}),n.setState({dollars:"",vendor:"",activityDate:""}))},n.displayError=function(e){if("0.00"===e||null===e){n.props.displayError("You have nothing to subtract.")}else{var t=n.state.errorMsg?n.state.errorMsg:"Error while subtracting (".concat(e,").");n.props.displayError(t)}n.setState({dollars:"",gallons:"",vendor:"",activityDate:"",fuelcostError:!1,fuelGallonsError:!1,otherError:!1,errorMsg:"",addExpensesActive:!1})},n.state={adding:"fuel",dollars:"",gallons:"",vendor:"",activityDate:"",fuelcostError:!1,fuelGallonsError:!1,otherError:!1,errorMsg:""},n}return Object(ap.a)(a,[{key:"closeExpenses",value:function(){this.setState({dollars:"",gallons:"",vendor:"",activityDate:"",adding:"fuel"}),this.props.close()}},{key:"updateState",value:function(e){this.setState({dollars:e.dollars,gallons:e.gallons,activityDate:e.activityDate,vendor:e.vendor})}},{key:"render",value:function(){var e=this,t=this.state,a=t.adding,n=t.dollars,c=t.gallons,s=t.vendor,o=t.activityDate,i=this.props,l=i.month,u=i.beforeEleventh,m=i.active;return r.a.createElement(Zj,{active:m,title:"Add Expense",cancel:function(){return e.closeExpenses()}},"previous"!==l||u?r.a.createElement("div",{className:"big-buttons"},r.a.createElement("button",{className:"button fuel ".concat("fuel"===a?"active":""),onClick:function(){return e.setState({adding:"fuel",dollars:"",gallons:"",vendor:"",activityDate:""})}},r.a.createElement("img",{src:Gh.a,alt:"fuel pump"}),r.a.createElement("span",null,"Fuel")),r.a.createElement("button",{className:"button other ".concat("other"===a?"active":""),onClick:function(){return e.setState({adding:"other",dollars:"",gallons:"",vendor:"",activityDate:""})}},r.a.createElement("img",{src:Bh.a,alt:"money"}),r.a.createElement("span",null,"Other Expenses"))):null,"previous"!==l||u?r.a.createElement("div",{className:"add-on-expense"},"fuel"===a?r.a.createElement(nC,{props:this.props,state:this.state,subtract:this.subtractFuelExpense,add:this.addFuelExpense,dollars:n,gallons:c,vendor:s,activityDate:o,onChange:function(t){return e.updateState(t)},onError:function(t){return e.displayError(t)}}):r.a.createElement(aC,{props:this.props,state:this.state,subtract:this.subtractOthersExpense,add:this.addOthersExpense,dollars:n,vendor:s,activityDate:o,onChange:function(t){return e.updateState(t)},onOtherError:function(t){return e.displayError(t)}})):null)}}]),a}(n.Component);var cC=Object(o.b)(null,function(e){return{}})(rC);var sC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={expenses:{fuelCost:0,fuelGallons:0,others:0},allSelected:null,transactions:[],month:"current",lastUpdated:null},n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){var e=vc.currentMonthAsTwoDigits(),t="current"==this.props.month?e:"0"+(e-1),a=vc.currentYear();this.props.init(t,a)}},{key:"componentWillReceiveProps",value:function(e){if(e.expenses&&Object.keys(e.expenses.previous).length&&this.props.hasPreviousData(!0),e.month!==this.state.month){this.setState({month:e.month});var t=vc.currentMonthAsTwoDigits(),a="current"==e.month?t:"0"+(t-1),n=vc.currentYear();this.props.getWEXTransactions(a,n)}if(e.wextransaction.expenses&&e.wextransaction.expenses.length){var r=e.wextransaction.expenses;r.map(function(e,t){e.id=t}),r.sort(function(e,t){return new Date(t.activityDateTime)-new Date(e.activityDateTime)}),this.setState({transactions:r}),this.calculateExpenses(e.wextransaction.expenses)}}},{key:"calculateExpenses",value:function(e){var t=this,a=0,n=0,r=0;e.map(function(e){e.isSelected&&(a="Fuel"==e.type?a+e.cost:a,n+=e.fuelGallons,r="Other"==e.type?r+e.cost:r)}),this.setState({expenses:Object(On.a)(Object(On.a)({},this.state.expenses),{},{fuelCost:a,fuelGallons:parseFloat(n).toFixed(2),others:r})},function(){t.calculatelastUpdate()})}},{key:"updateTransactionSelected",value:function(e){var t=this,a=this.state.transactions;this.setState({transactions:a.map(function(t){return t.id!==e.id?t:Object(On.a)(Object(On.a)({},e),{},{isSelected:!e.isSelected})})},function(){t.calculateExpenses(t.state.transactions)})}},{key:"selectAll",value:function(){var e=this,t=this.state.transactions;this.setState({transactions:t.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{isSelected:!0})})},function(){e.calculateExpenses(e.state.transactions)})}},{key:"unselectAll",value:function(){var e=this,t=this.state.transactions;this.setState({transactions:t.map(function(e){return Object(On.a)(Object(On.a)({},e),{},{isSelected:!1})})},function(){e.calculateExpenses(e.state.transactions)})}},{key:"submitTransaction",value:function(){var e=this.state.transactions,t=[];e.map(function(e){if(e.isSelected){var a={activityDateTime:e.activityDateTime,merchantName:e.merchantName,transactionId:e.transactionId,cost:e.cost,fuelGallons:e.fuelGallons,expenseId:e.expenseId,type:e.type};t.push(a)}});var a=vc.currentMonthAsTwoDigits(),n="current"==this.props.month?a:"0"+(a-1),r=vc.currentYear(),c="current"==this.props.month;this.props.submitTransactions(t,n,r,c)}},{key:"openAddExpenses",value:function(){this.setState({addExpensesActive:!0})}},{key:"saveTransaction",value:function(e){var t=this,a=this.state.transactions;a.push(e),a.sort(function(e,t){return new Date(t.activityDateTime)-new Date(e.activityDateTime)}),this.setState({transactions:a},function(){t.calculateExpenses(t.state.transactions)})}},{key:"calculatelastUpdate",value:function(){var e=function(e){var t=e.map(function(e){return e&&vc.formatAsSortableDate2(e)}).reduce(function(e,t){return!t||e>t?e:t});return vc.formatAsSortableDate2(t)}(this.state.transactions.map(function(e){if(null!==e.updateTimestamp)return e.updateTimestamp}));this.setState({lastUpdated:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.month,n=t.beforeEleventh,c=this.state.expenses,s=bc.formatUSD(c.fuelCost),o=bc.formatUSD(c.others),i=this.state.transactions.every(function(e){return e.isSelected}),l=vc.formatToLocal(this.state.lastUpdated);return r.a.createElement("div",{className:"expenses",key:a},r.a.createElement("div",{className:"update"},r.a.createElement("div",{className:"totals"},"Monthly Totals"),r.a.createElement("div",{className:"last-updated"},"Last Updated ",l)),r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"fuel-expense"},r.a.createElement("img",{src:Gh.a,alt:"fuel expense"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Fuel Expense"),r.a.createElement("div",{className:"data"},s))),r.a.createElement("div",{className:"fuel-gallons"},r.a.createElement("img",{src:Wh.a,alt:"fuel gallons"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Fuel Gallons"),r.a.createElement("div",{className:"data"},c.fuelGallons||0))),r.a.createElement("div",{className:"other-expenses"},r.a.createElement("img",{src:Bh.a,alt:"other expenses"}),r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"label"},"Other Expenses"),r.a.createElement("div",{className:"data"},o)))),r.a.createElement("div",{className:"transactionsContainer"},r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"heading"},"All Expenses"),this.state.transactions.length?r.a.createElement("span",{className:"expenseCount"},this.state.transactions.length):null),this.state.transactions.length>0?r.a.createElement("div",{className:"etable"},r.a.createElement("div",{className:"etable-body header-labels"},r.a.createElement("div",{className:"etable-row"},r.a.createElement("div",{className:"etable-header wexheader  select-all wexSelectAll"},r.a.createElement("button",{className:"selected ".concat(i?"chosen":""),onClick:function(){return i?e.unselectAll():e.selectAll()}},i?r.a.createElement(jf,null):r.a.createElement(kf,null))),r.a.createElement("div",{className:"etable-header wexheader activityDate"},"ACTIVITY DATE"),r.a.createElement("div",{className:"etable-header wexheader vendorName"},"VENDOR"),r.a.createElement("div",{className:"etable-header wexheader gallons"},"GALLONS"),r.a.createElement("div",{className:"etable-header wexheader expenses"},"EXPENSES"))),this.state.transactions.map(function(t){return r.a.createElement($j,Object.assign({},t,{toggleSelected:function(){return e.updateTransactionSelected(t)}}))})):r.a.createElement("div",{className:"noTransactions"},"There are no open Transactions")),"previous"!==a||n?r.a.createElement("div",{className:"addExpenses"},r.a.createElement("button",{className:"addexpenseButton",onClick:function(){return e.openAddExpenses()}},r.a.createElement(ub,null),r.a.createElement("span",{className:"title"},"ADD EXPENSE")),r.a.createElement(cC,Object.assign({active:this.state.addExpensesActive,close:function(){return e.setState({addExpensesActive:!1})}},this.props,{saveTransaction:function(t){return e.saveTransaction(t)},transactionsLength:this.state.transactions.length}))):null,("previous"!==a||n)&&this.state.transactions.length?r.a.createElement("div",{className:"submitExpenses"},r.a.createElement("button",{className:"submitexpenseButton",onClick:function(){return e.submitTransaction()}},r.a.createElement("span",{className:"title"},"Submit Expenses"))):null)}}]),a}(n.Component);var oC=Object(o.b)(function(e){return{expenses:e.expenses.expenses,wextransaction:e.expenses.wexTransactions}},function(e){return{init:function(t,a){e({type:L,month:t,year:a})},getWEXTransactions:function(t,a){e({type:L,month:t,year:a})},addFuelExpense:function(t,a){e({type:A,current:t,payload:a})},subtractFuelExpense:function(t,a){e({type:w,current:t,payload:a})},addOthersExpense:function(t,a){e({type:T,current:t,payload:a})},subtractOthersExpense:function(t,a){e({type:P,current:t,payload:a})},displayError:function(t){e({type:fe,data:t})},submitTransactions:function(t,a,n,r){e({type:I,data:t,month:a,year:n,current:r})}}})(sC),iC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(){var e;Object(Nc.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={modalVisible:!1,lastLocation:null,confirmedNavigation:!1},e.showModal=function(t){return e.setState({modalVisible:!0,lastLocation:t})},e.closeModal=function(t){return e.setState({modalVisible:!1},t)},e.handleBlockedNavigation=function(t){var a=e.state.confirmedNavigation,n=e.props.shouldBlockNavigation;return!(!a&&n(t))||(e.showModal(t),!1)},e.handleConfirmNavigationClick=function(){return e.closeModal(function(){var t=e.props.navigate,a=e.state.lastLocation;a&&e.setState({confirmedNavigation:!0},function(){e.props.handleValidation(),e.setState({confirmedNavigation:!1}),t(a.pathname)})})},e}return Object(ap.a)(a,[{key:"render",value:function(){var e=this.props.when,t=this.state,a=t.modalVisible;t.lastLocation;return r.a.createElement("div",null,r.a.createElement(cp.a,{when:e,message:this.handleBlockedNavigation}),r.a.createElement(ag,{id:"checkvalidation",title:"Unsaved changes",active:a,cancel:this.handleConfirmNavigationClick,confirm:this.closeModal,message:"Please save your changes before leaving the page.",cancelMessage:"Cancel",confirmMessage:"Ok",validationcss:"true"}))}}]),a}(r.a.Component),lC=[[_s,Fs],[qs,Ls]],uC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).changeMonths=function(){var e="previous"===n.state.month?"current":"previous";n.setState({month:e,changeDetected:!1}),n.props.callChangeValidation()},n.state={month:"current",hasPreviousData:!1,beforeEleventh:ic()().date()<11,hasSetDefault:!1,changeDetected:!1},n.setHasPreviousData=n.setHasPreviousData.bind(Object(bp.a)(n)),n.changeMonths=n.changeMonths.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.getApprovalState()}},{key:"setHasPreviousData",value:function(e){var t=this;this.setState({hasPreviousData:e},function(){return t.setDefaultMonth(t.props)})}},{key:"setDefaultMonth",value:function(e){this.state.hasSetDefault||null===this.props.approved||this.setState({month:!e.approved&&this.state.hasPreviousData&&this.state.beforeEleventh?"previous":"current",hasSetDefault:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.month,n=t.hasPreviousData,c=t.beforeEleventh,s=t.changeDetected,o=this.props.approved,i=ic()().format("MMMM"),l=ic()().subtract(1,"month").format("MMMM");return r.a.createElement("div",{className:"trip-recording"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"month-nav"},n?r.a.createElement("button",{className:"prev-month ".concat("previous"===a?"selected":""),onClick:function(){e.setState({month:"previous"})}},l):null,r.a.createElement("button",{className:"curr-month ".concat("current"===a?"selected":""),onClick:function(){e.setState({month:"current"})}},i)),r.a.createElement(Ps,{roles:lC,required:!1},r.a.createElement("div",{className:"switch-bar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(tp.c,{exact:!0,to:"/trip-recording",activeClassName:"active"},"Vanpool Trips")),r.a.createElement(Is,{roles:[qs],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{exact:!0,to:"/trip-recording/me",activeClassName:"active"},"My Trips"))),r.a.createElement(Ps,{roles:[Ys],required:!1},r.a.createElement("li",null,r.a.createElement(tp.c,{to:"/trip-recording/expenses",activeClassName:"active"},"Expenses")))))),r.a.createElement(ag,{id:"checkvalidation",title:"Unsaved changes",active:s,cancel:function(){return e.changeMonths()},confirm:function(){return e.setState({changeDetected:!1})},message:"Please save your changes before leaving the page.",cancelMessage:"Cancel",confirmMessage:"Ok",validationcss:"true"}),r.a.createElement(iC,{when:this.props.changeValidation,navigate:function(t){return e.props.history.push(t)},shouldBlockNavigation:function(t){return!(!e.props.changeValidation||"/trip-recording"===t.pathname)},handleValidation:function(){e.props.callChangeValidation()}})),"previous"===a?c&&!o?r.a.createElement("div",{className:"message warning"},"Trips and expenses will be submitted on the 10th of"," ",ic()().format("MMMM"),". You are allowed to update this data at anytime prior."):r.a.createElement("div",{className:"message complete"},"Your ",l," trips and expenses have been submitted and can no longer be updated. If you have questions, please call"," ",r.a.createElement(up,{phone:"(855) 802-3683"}),"."):null,r.a.createElement(cp.e,null,Ds([[_s,Fs,Ys],[qs,Ls,Ys]])?r.a.createElement(cp.c,{path:"/trip-recording/expenses",render:function(){return r.a.createElement(oC,{month:a,beforeEleventh:c,hasPreviousData:e.setHasPreviousData})}}):null,Ds([qs])?null:r.a.createElement(cp.c,{path:"/trip-recording/me",render:function(){return r.a.createElement(Qj,{month:a,hasPreviousData:e.setHasPreviousData,beforeEleventh:c,approved:o})}}),Ds(lC)?r.a.createElement(cp.c,{exact:!0,path:"/trip-recording",render:function(){return r.a.createElement(Vj,{month:a,hasPreviousData:e.setHasPreviousData,beforeEleventh:c,approved:o})}}):null,r.a.createElement(cp.b,{to:Ds(lC)?"/trip-recording":"/trip-recording/me"})))}}]),a}(n.Component);var mC=Object(o.b)(function(e){return e.tripRecordingApproval},function(e){return{getApprovalState:function(){gn.getUserProfile().isInVanpool||Ds([qs])?e({type:B}):e({type:te})},callChangeValidation:function(){e({type:Ga,data:{changeValidation:!1}})}}})(uC),dC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ap.a)(a,[{key:"submit",value:function(e){this.setState({loading:!0}),this.props.submit(e)}},{key:"render",value:function(){var e=this,t=this.state.loading,a=this.props.profile.contracts[0],n=a.contractName,c="Update to ".concat(n),s="Your ".concat(n," has been updated. Before you can proceed you must read & sign your updated ").concat(n," agreement. If you have questions or require assistance, please call ");return r.a.createElement("div",{className:"contracts"},r.a.createElement("h2",null,c),r.a.createElement("p",null,s,r.a.createElement(up,{phone:"800-VAN-4-WORK"})),r.a.createElement("div",{className:"tools"},r.a.createElement("button",{id:"continue",className:"button primary",onClick:function(){return e.submit(a)}},"Continue")),r.a.createElement(ij,{status:function(t){return e.props.status(t)},loading:t,redirectUrl:"/",cancelRedirectUrl:"/login"}))}}]),a}(n.Component);var pC=Object(o.b)(function(e){return{profile:e.userAuth}},function(e){return{submit:function(t){e({type:ua,data:t})},status:function(t){e({type:la,data:t})}}})(dC),vC=r.a.createElement("div",null,"Your vanpool ID and coordinator can be found in your Commute Welcome email."," ","Otherwise, please contact your coordinator or call"," ",r.a.createElement(up,{phone:"800-VAN-4-WORK"})," to retrieve your vanpool ID."),hC=r.a.createElement("div",null,"The vanpool ID entered is associated with a Commute with Enterprise partner."," ","For the best Commute experience, please sign up with your valid work email.\xa0 If you have questions, please call ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),"."),fC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={vanpoolId:"",coordinatorName:"",loading:!1,failed:!1},n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.vanpoolLinkSuccess!==this.props.vanpoolLinkSuccess&&(this.setState({failed:!1===e.vanpoolLinkSuccess,loading:this.state.vanpoolId&&null===e.vanpoolLinkSuccess}),e.vanpoolLinkSuccess&&!e.domainMismatch&&this.reauthorize())}},{key:"reauthorize",value:function(){this.props.reauthorize(),this.setState({loading:!0})}},{key:"submit",value:function(){var e=this.state,t=e.vanpoolId,a=e.coordinatorName;this.props.submit({vanpoolId:t,coordinatorName:a}),this.setState({loading:!0,failed:!1})}},{key:"valid",value:function(){return/^[a-z0-9]{4}-\d{6}$/i.test(this.state.vanpoolId)&&this.state.coordinatorName}},{key:"setVanpoolId",value:function(e){return/^[a-z0-9]{0,4}$/i.test(e.substr(0,4))&&e.length<5?this.setState({vanpoolId:e}):/^[a-z0-9]{0,4}-$/i.test(e.substr(0,5))&&5===e.length?this.setState({vanpoolId:e}):/^[a-z0-9]{0,4}-\d{1,6}$/i.test(e)?this.setState({vanpoolId:e}):void 0}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,c=a.vanpoolId,s=a.coordinatorName,o=a.failed,i=this.props,l=i.forceLinking,u=i.domainMismatch,m=i.existingEmail;return r.a.createElement("div",null,r.a.createElement(ag,{title:"Welcome Commute Vanpool Partner",message:hC,active:!!u&&!n,cancel:function(){return t.reauthorize()},cancelMessage:"Continue Anyway",confirm:function(){return window.location.assign(vN)},confirmMessage:"Sign up with Work Email"}),r.a.createElement(ag,{title:"Existing Email Found",message:(e=m,r.a.createElement("div",null,"You already have a Commute account associated to this vanpool with the following e-mail:",r.a.createElement("div",{className:"email"},e),"Please return to login and use the above email address or call"," ",r.a.createElement(up,{phone:"800-VAN-4-WORK"})," if you require assistance.")),active:!!m&&!n,confirm:function(){return hp.logout()},confirmMessage:"Return to Log In"}),r.a.createElement("div",{className:"in-vanpool"},r.a.createElement(mp,{isLoading:n}),r.a.createElement("div",{className:"title"},"Vanpool ID",r.a.createElement(Jg,{message:vC})),r.a.createElement("div",{className:"desc"},"Please enter your vanpool ID and the first four letters of your coordinator\u2019s last name.",r.a.createElement("span",null,"Vanpool ID must Include the dash as it appears in your e-mail.")),o?r.a.createElement("div",{className:"desc error"},"We are unable to match your information with an active vanpool. Please try again. If you don't have this information contact Commute with Enterprise at ",r.a.createElement(up,{phone:"800-VAN-4-WORK"}),"."):null,r.a.createElement(Wg,{type:"text",placeholder:"12VP-008675",label:"Vanpool ID",value:c,onChange:function(e){return t.setVanpoolId(e.target.value)}}),r.a.createElement(Wg,{type:"text",placeholder:"XXXX",label:"Coordinator's Last Name",value:s,onChange:function(e){return t.setState({coordinatorName:e.target.value.substr(0,4)})}}),r.a.createElement("div",{className:"actions"},l?null:r.a.createElement(tp.b,{to:"/registration",className:"button"},"Back"),r.a.createElement("button",{className:"primary button",disabled:!this.valid(),onClick:function(){return t.submit()}},"Next"))))}}]),a}(n.Component);var bC=Object(o.b)(function(e){return Object(On.a)(Object(On.a)({},e.registration),{},{forceLinking:e.userAuth.linkVanpool})},function(e){return{submit:function(t){return e({type:Wt,data:t})},reauthorize:function(){return e({type:O})}}})(fC);function EC(e){return r.a.createElement(kb,{title:"Commute Profile",Icon:Af,isEditable:!1},r.a.createElement(jN,e),r.a.createElement(gC,e))}function gC(e){var t=e.phone,a=e.shouldContact,n=e.update;return r.a.createElement("div",{className:"other-stuff"},r.a.createElement("div",{className:"phone"},r.a.createElement("label",null,"What's the best number to reach you at?"),r.a.createElement(aN,{value:t,update:function(e){return n({phone:e})}})),r.a.createElement(yN,{question:"Please contact me when matching commutes are available",onChange:function(e){return n({shouldContact:e})},value:a}))}var yC=[{label:"The Web",icon:tf.a},{label:"Social Media",icon:cf.a},{label:"TV / Video",icon:Xh.a},{label:"Email",icon:Zh.a},{label:"Saw a Vehicle",icon:Ih.a},{label:"Employer",icon:nf.a},{label:"Coworker",icon:Rh.a},{label:"Friend",icon:Lh.a},{label:"Transit Agency",icon:Vh.a}];function OC(e){var t=e.label,a=e.icon,n=e.onChange,c=e.value;return r.a.createElement("button",{className:"option ".concat(t===c?"selected":""),onClick:function(){return n(t)}},r.a.createElement("img",{src:a,alt:t}),r.a.createElement("div",{className:"label"},t))}function NC(e){var t=e.value,a=e.onChange;return r.a.createElement("div",{className:"referral"},yC.map(function(e){return r.a.createElement(OC,Object.assign({},e,{onChange:a,value:t,key:e.label}))}))}var kC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={employer:e.profile.employer,validEmployer:!0,activeDays:["Monday","Tuesday","Wednesday","Thursday","Friday"],arriveAtWork:"08:00:00",departFromWork:"17:00:00",homeAddress:"",workAddress:"",mode:"Car",arriveFlexible:!1,departFlexible:!1,phone:e.profile.phone?Object(On.a)(Object(On.a)({},e.profile.phone),{},{number:eN(e.profile.phone.number)}):{type:"Mobile",number:"",extension:""},shouldContact:!0,referral:"",loading:!1,getReferral:!1,isPartner:e.profile.isPartner},n.update=n.update.bind(Object(bp.a)(n)),n}return Object(ap.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.message&&this.setState({loading:!1})}},{key:"componentDidMount",value:function(){this.props.init()}},{key:"update",value:function(e){this.setState(e)}},{key:"valid",value:function(){if(this.state.getReferral)return!!this.state.referral;var e=this.state,t=e.employer,a=e.validEmployer,n=e.arriveAtWork,r=e.departFromWork,c=e.homeAddress,s=e.workAddress,o=e.phone,i=e.worksiteId;return!!t&&a&&n!==r&&!!c&&(!!s||!!i)&&c!==s&&ZO(o.number)}},{key:"next",value:function(){this.setState({getReferral:!0}),window.scrollTo(0,0)}},{key:"prev",value:function(){this.setState({getReferral:!1}),window.scrollTo(0,0)}},{key:"save",value:function(){this.props.save(this.state),this.setState({loading:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.getReferral,n=t.referral;return a?r.a.createElement("div",{className:"commute-profile refer-question",key:"referral"},r.a.createElement(mp,{isLoading:this.state.loading}),r.a.createElement("div",{className:"title"},"Please tell us how you heard about Commute"),r.a.createElement(NC,{value:n,onChange:function(t){return e.setState({referral:t})}}),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:function(){return e.prev()}},"Back"),r.a.createElement("button",{className:"primary button",disabled:!this.valid(),onClick:function(){return e.save()}},"Next"))):r.a.createElement("div",null,r.a.createElement("div",{className:"commute-profile",key:"commute"},r.a.createElement("div",{className:"title"},this.state.isPartner?"Welcome ".concat(this.state.employer," Partner, Let's build your Commute Profile"):"Ok, let\u2019s build your Commute Profile"),r.a.createElement(EC,Object.assign({},this.state,{update:this.update})),r.a.createElement("div",{className:"actions"},r.a.createElement(tp.b,{to:"/registration",className:"button"},"Back"),r.a.createElement("button",{className:"primary button",disabled:!this.valid(),onClick:function(){return e.next()}},"Next"))))}}]),a}(n.Component);var jC=Object(o.b)(function(e){return{message:e.banner.message,profile:e.userAuth}},function(e){return{init:function(){e({type:Ut})},save:function(t){e({type:Yt,data:t})}}})(kC),CC=function(){return r.a.createElement("div",{className:"vanpool-question"},r.a.createElement("label",null,"Do you belong to a Commute Vanpool?"),r.a.createElement("div",{className:"yes-no"},r.a.createElement(tp.b,{to:"/registration/vanpool",className:"button yes pill"},"Yes"),r.a.createElement(tp.b,{to:"/registration/commute-profile",className:"button no primary pill"},"No")))},xC="/registration";var SC=[{component:HN,path:"/profile",authorized:function(){return!0}},{component:function(){return r.a.createElement("div",{className:"billing"},window.location.hash.includes("/payment/pay")||Ds([Bs])?null:r.a.createElement(Uy,null),r.a.createElement(Ps,{roles:[Bs],required:!1},r.a.createElement("div",{className:"tnav"})),r.a.createElement(cp.e,null,r.a.createElement(cp.c,{path:"/payment/history",component:Og}),Ds([Us,Ms,Vs])&&Ds([zs,Ks])&&!Ds([Js])?r.a.createElement(cp.c,{path:"/payment/fuel",component:Ly}):null,Ds([Bs])?null:r.a.createElement(cp.c,{path:"/payment/pay",component:Cy}),Ds([Ms,qs])&&!As([Hs])?r.a.createElement(cp.c,{path:"/payment/manage",component:Ty}):null,Ds([Ms,qs])&&!As([Hs])?r.a.createElement(cp.c,{component:XE}):null,!Ds([Ms,qs])||As([Hs])?r.a.createElement(cp.b,{to:"/payment/history"}):null))},path:"/payment",authorized:{isAuthorized:function(){return gn.getUserProfile()&&Ds([Ws,qs])}}.isAuthorized},{component:OO,path:"/roster",authorized:{isAuthorized:function(){return!!gn.getUserProfile()&&Ds([_s,qs])}}.isAuthorized},{component:nO,path:"/route",authorized:{isAuthorized:function(){var e=gn.getUserProfile();if(e){var t=Ds([qs])&&e.vanpoolId;return!As([Bs,Rs,Gs])||t}return!1}}.isAuthorized},{component:HO,path:"/vanpool",authorized:GO.isAuthorized},{component:function(){return r.a.createElement("div",{className:"dashboard"},r.a.createElement(Nk,null),r.a.createElement(Ok,null),r.a.createElement(jk,null))},path:"/dashboard",authorized:{isAuthorized:function(){var e=gn.getUserProfile();return!!e&&(Ds([qs])&&e.vanpoolId||!Ds([Gs]))}}.isAuthorized},{component:tj,path:"/stats",authorized:{isAuthorized:function(){return!!gn.getUserProfile()&&Ds([Gs])}}.isAuthorized},{component:bj,path:"/driver-application",authorized:Ej.isAuthorized},{component:mC,path:"/trip-recording",authorized:{isAuthorized:function(){return gn.isAuthenticated()&&Ds([[_s,Ls],[Bs,Fs],[qs,Ls]])}}.isAuthorized},{component:function(){return r.a.createElement("div",{className:"registration"},r.a.createElement(bC,null))},path:"/link-vanpool",authorized:{isAuthorized:function(){return gn.isAuthenticated()&&Ds([Bs])}}.isAuthorized},{component:function(){return gn.getUserProfile().linkVanpool?r.a.createElement("div",{className:"registration"},r.a.createElement(cp.e,null,r.a.createElement(cp.c,{path:xC+"/vanpool",component:bC}),r.a.createElement(cp.b,{to:xC+"/vanpool"}))):r.a.createElement("div",{className:"registration"},r.a.createElement(cp.e,null,r.a.createElement(cp.c,{path:xC+"/vanpool",component:bC}),r.a.createElement(cp.c,{path:xC+"/commute-profile",component:jC}),r.a.createElement(cp.c,{path:xC,component:CC}),r.a.createElement(cp.b,{to:xC})))},path:"/registration",authorized:{isAuthorized:function(){return gn.isAuthenticated()&&!gn.getUserProfile().registrationComplete}}.isAuthorized,override:!0},{component:yj,path:"/coordinator-application",authorized:Oj.isAuthorized,override:!0},{component:pC,path:"/contract",authorized:{isAuthorized:function(){var e=gn.getUserProfile();return!!e&&e.hasPendingContract}}.isAuthorized,override:!0}];SC.default="/dashboard";var DC=SC,AC=function(e){Object(np.a)(a,e);var t=Object(rp.a)(a);function a(e){var n;return Object(Nc.a)(this,a),(n=t.call(this,e)).state={},n.state.unlisten=n.props.history.listen(n.props.updateHistory),n}return Object(ap.a)(a,[{key:"componentDidMount",value:function(){this.props.authenticated&&this.props.init(),nr.keepAliveUrl&&(this.interval=setInterval(function(){nr.keepAliveUrl&&(document.getElementById("keepAlive").src=kp.addNonceToUrl(nr.keepAliveUrl))},nr.keepAliveInterval)),this.props.updateHistory(this.props.location)}},{key:"componentWillReceiveProps",value:function(e){e.authenticated&&!e.profile&&this.props.init()}},{key:"componentWillUnmount",value:function(){this.state.unlisten(),clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.authenticated,a=e.profile,n=e.error,c=e.showBackdrop;if(n){var s=gn.getAuthentication(),o={profileId:s?s.token.id:""};return s&&s.token&&Rc.serverLog({url:n.url?n.url:"",data:o,message:"Commute Technical Error : Authorization Error",error:n.stack?n.stack:n.message}),gn.clearAuthentication(),_n.analyticsEvent({type:"Login Error",error:n.stack?n.stack:n.message,api:n.url?n.url:""}),r.a.createElement("div",null,r.a.createElement(db,{root:!0}),r.a.createElement(Cp,null))}if(t&&!a)return null;var i=DC.filter(function(e){return e.authorized()}),l=i.find(function(e){return e.override});return r.a.createElement("div",{className:"app"},r.a.createElement(vb.a,null,r.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"})),r.a.createElement(_E,{hideNavigation:!!l}),r.a.createElement(db,{hideNavigation:!!l}),r.a.createElement("div",{id:"confirmation-popup"}),r.a.createElement("div",{className:c?"backdrop":""}),r.a.createElement("div",{className:"main"},r.a.createElement(cp.e,null,r.a.createElement(cp.c,{exact:!0,path:"/login",component:Sp}),r.a.createElement(cp.c,{path:"/passwordReset",render:function(e){return r.a.createElement(Ap,Object.assign({},e,{policy:"B2C_1A_PasswordReset"}))}}),r.a.createElement(cp.c,{path:"/phonePasswordReset",render:function(e){return r.a.createElement(Ap,Object.assign({},e,{policy:"B2C_1A_PhonePasswordReset"}))}}),l?r.a.createElement(fp,l):i.map(function(e){return r.a.createElement(fp,Object.assign({key:e.path},e))}),r.a.createElement(cp.b,{to:l?l.path:Ai.getRedirectUrl(a,window.location.hash)}))),r.a.createElement("div",{className:"push"},"\xa0"),r.a.createElement(LE,null),nr.keepAliveUrl?r.a.createElement("iframe",{id:"keepAlive",name:"keepAlive",title:"keepAlive"}):null)}}]),a}(n.Component);var wC=Object(cp.h)(Object(o.b)(function(e){return{profile:e.userAuth,error:e.loginState.error,authenticated:e.loginState.hasToken,showBackdrop:e.navigation.showBackdrop}},function(e){return{updateHistory:function(t){e({type:aa,data:{location:t}})},init:function(){e({type:O})}}})(AC));window.location.hash.startsWith("#/login")&&gn.clearAuthentication(),window.addEventListener("hashchange",function(){return window.location.hash.startsWith("#/stats")?null:window.scrollTo(0,0)}),s.a.render(r.a.createElement(o.a,{store:function(){var e={};nr.toggleFeatures.reduxDevTools&&(e=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var t=Object(u.c)({userAuth:yn,accountSummary:Cn,paymentHistory:Fn,invoiceHistory:Gn,loginState:Un,vanpoolRoute:Jn,participantRoute:Xn,vehicle:or,requestVehicle:lr,roster:Zn,vanpoolInfo:fr,impactData:Er,participants:ar,payments:dr,scheduledPayments:Yn,map:vr,profile:jr,commuteProfile:xr,banner:zn,serviceProvider:Dr,vanpoolAddOns:Nr,navigation:Pr,vanpoolAggregates:yr,application:wr,findARide:Mr,alerts:Lr,dashboard:Vr,tripRecording:Br,myTrips:Wr,expenses:Gr,dashboardPaymentSummary:zr,tripRecordingApproval:Jr,registration:Xr,paymentManagement:Zr,stats:tc,fuelCardPayment:nc,changeMyCommute:cc});return Xd=Object(u.d)(t,e,Object(u.a)(Zd)),Zd.run(ep),Xd}()},r.a.createElement(tp.a,{baseUrl:"/"},r.a.createElement(wC,null))),document.getElementById("root"))},223:function(e,t,a){e.exports=a.p+"static/media/commute_logo_full.7bdf5939.svg"},224:function(e,t,a){e.exports=a.p+"static/media/cvc-amex.2b20066c.svg"},225:function(e,t,a){e.exports=a.p+"static/media/cvc-left.7ed9759b.svg"},313:function(e,t,a){e.exports=a.p+"static/media/commute_logo.7bdf5939.svg"},314:function(e,t,a){e.exports=a.p+"static/media/commute_logo_mobile.c3f8c7ad.svg"},451:function(e,t,a){e.exports=a.p+"static/media/van.0fc33c70.svg"},452:function(e,t,a){e.exports=a.p+"static/media/people.ef5b8c1b.svg"},453:function(e,t,a){e.exports=a.p+"static/media/person.1c7e6721.svg"},454:function(e,t,a){e.exports=a.p+"static/media/distance.449c5537.svg"},455:function(e,t,a){e.exports=a.p+"static/media/money.ee42ed0c.svg"},456:function(e,t,a){e.exports=a.p+"static/media/fuel-gauge.0b341d20.svg"},457:function(e,t,a){e.exports=a.p+"static/media/fuel-pump.f0539f6c.svg"},458:function(e,t,a){e.exports=a.p+"static/media/tree.33c5116c.svg"},459:function(e,t,a){e.exports=a.p+"static/media/road.0d475cbd.svg"},460:function(e,t,a){e.exports=a.p+"static/media/video.3ba6d7d2.svg"},461:function(e,t,a){e.exports=a.p+"static/media/email.8614e7ea.svg"},462:function(e,t,a){e.exports=a.p+"static/media/globe.26e1dc43.svg"},463:function(e,t,a){e.exports=a.p+"static/media/employer.da754a66.svg"},464:function(e,t,a){e.exports=a.p+"static/media/social.52201700.svg"},465:function(e,t,a){e.exports=a.p+"static/media/menu.9c72641a.svg"},466:function(e,t,a){e.exports=a.p+"static/media/google-play-store-badge.c68e1c2f.svg"},467:function(e,t,a){e.exports=a.p+"static/media/app-store-apple-badge.e374ae72.svg"},546:function(e,t,a){e.exports=a.p+"static/media/commute_logo_footer.a6517529.svg"},547:function(e,t,a){e.exports=a.p+"static/media/cvc-right.f795f785.svg"},549:function(e,t,a){e.exports=a.p+"static/media/maintenance-card.09158d5e.png"},552:function(e,t,a){e.exports=a(1132)},759:function(e,t,a){}},[[552,1,2]]]);
//# sourceMappingURL=main.6c54e9ca.chunk.js.map